{"version":3,"file":"default~DashboardPage~SoloPanelPage.6310f9af5345c722b930.js","sources":["webpack:///webpack:///./node_modules/react-draggable/dist/react-draggable.js","webpack:///webpack:///./public/app/core/components/CopyToClipboard/CopyToClipboard.tsx","webpack:///webpack:///./public/app/core/components/FilterInput/FilterInput.tsx","webpack:///webpack:///./public/app/core/components/PluginHelp/PluginHelp.tsx","webpack:///webpack:///./public/app/features/alerting/AlertTab.tsx","webpack:///webpack:///./public/app/features/alerting/StateHistory.tsx","webpack:///webpack:///./public/app/features/alerting/TestRuleResult.tsx","webpack:///webpack:///./public/app/features/dashboard/components/AddPanelWidget/AddPanelWidget.tsx","webpack:///webpack:///./public/app/features/dashboard/components/AddPanelWidget/index.ts","webpack:///webpack:///./public/app/features/dashboard/components/DashboardRow/DashboardRow.tsx","webpack:///webpack:///./public/app/features/dashboard/components/DashboardRow/index.ts","webpack:///webpack:///./public/app/features/dashboard/dashgrid/DashboardPanel.tsx","webpack:///webpack:///./public/app/features/dashboard/dashgrid/PanelChrome.tsx","webpack:///webpack:///./public/app/features/dashboard/dashgrid/PanelHeader/PanelHeader.tsx","webpack:///webpack:///./public/app/features/dashboard/dashgrid/PanelHeader/PanelHeaderCorner.tsx","webpack:///webpack:///./public/app/features/dashboard/dashgrid/PanelHeader/PanelHeaderMenu.tsx","webpack:///webpack:///./public/app/features/dashboard/dashgrid/PanelHeader/PanelHeaderMenuItem.tsx","webpack:///webpack:///./public/app/features/dashboard/dashgrid/PanelResizer.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/DataSourceOption.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/EditorTabBody.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/GeneralTab.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/PanelEditor.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/QueriesTab.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/QueryEditorRows.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/QueryInspector.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/QueryOptions.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/VisualizationTab.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/VizPickerSearch.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/VizTypePicker.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/VizTypePickerPlugin.tsx","webpack:///webpack:///./public/app/features/dashboard/panel_editor/state/actions.ts","webpack:///webpack:///./public/app/features/dashboard/panel_editor/state/selectors.ts","webpack:///webpack:///./public/app/features/dashboard/state/initDashboard.ts","webpack:///webpack:///./public/app/features/dashboard/utils/getPanelMenu.ts","webpack:///webpack:///./public/app/features/panel/GeneralTabCtrl.ts","webpack:///webpack:///./public/app/features/plugins/PluginStateInfo.tsx"],"sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('react-dom'), require('react')) :\n\ttypeof define === 'function' && define.amd ? define(['react-dom', 'react'], factory) :\n\t(global.ReactDraggable = factory(global.ReactDOM,global.React));\n}(this, (function (ReactDOM,React) { 'use strict';\n\n\tReactDOM = ReactDOM && ReactDOM.hasOwnProperty('default') ? ReactDOM['default'] : ReactDOM;\n\tReact = React && React.hasOwnProperty('default') ? React['default'] : React;\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * \n\t */\n\n\tfunction makeEmptyFunction(arg) {\n\t  return function () {\n\t    return arg;\n\t  };\n\t}\n\n\t/**\n\t * This function accepts and discards inputs; it has no side effects. This is\n\t * primarily useful idiomatically for overridable function endpoints which\n\t * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n\t */\n\tvar emptyFunction = function emptyFunction() {};\n\n\temptyFunction.thatReturns = makeEmptyFunction;\n\temptyFunction.thatReturnsFalse = makeEmptyFunction(false);\n\temptyFunction.thatReturnsTrue = makeEmptyFunction(true);\n\temptyFunction.thatReturnsNull = makeEmptyFunction(null);\n\temptyFunction.thatReturnsThis = function () {\n\t  return this;\n\t};\n\temptyFunction.thatReturnsArgument = function (arg) {\n\t  return arg;\n\t};\n\n\tvar emptyFunction_1 = emptyFunction;\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\n\t/**\n\t * Use invariant() to assert state which your program assumes to be true.\n\t *\n\t * Provide sprintf-style format (only %s is supported) and arguments\n\t * to provide information about what broke and what you were\n\t * expecting.\n\t *\n\t * The invariant message will be stripped in production, but the invariant\n\t * will remain to ensure logic does not differ in production.\n\t */\n\n\tvar validateFormat = function validateFormat(format) {};\n\n\t{\n\t  validateFormat = function validateFormat(format) {\n\t    if (format === undefined) {\n\t      throw new Error('invariant requires an error message argument');\n\t    }\n\t  };\n\t}\n\n\tfunction invariant(condition, format, a, b, c, d, e, f) {\n\t  validateFormat(format);\n\n\t  if (!condition) {\n\t    var error;\n\t    if (format === undefined) {\n\t      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n\t    } else {\n\t      var args = [a, b, c, d, e, f];\n\t      var argIndex = 0;\n\t      error = new Error(format.replace(/%s/g, function () {\n\t        return args[argIndex++];\n\t      }));\n\t      error.name = 'Invariant Violation';\n\t    }\n\n\t    error.framesToPop = 1; // we don't care about invariant's own frame\n\t    throw error;\n\t  }\n\t}\n\n\tvar invariant_1 = invariant;\n\n\t/**\n\t * Similar to invariant but only logs a warning if the condition is not met.\n\t * This can be used to log issues in development environments in critical\n\t * paths. Removing the logging code for production environments will keep the\n\t * same logic and follow the same code paths.\n\t */\n\n\tvar warning = emptyFunction_1;\n\n\t{\n\t  var printWarning = function printWarning(format) {\n\t    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t      args[_key - 1] = arguments[_key];\n\t    }\n\n\t    var argIndex = 0;\n\t    var message = 'Warning: ' + format.replace(/%s/g, function () {\n\t      return args[argIndex++];\n\t    });\n\t    if (typeof console !== 'undefined') {\n\t      console.error(message);\n\t    }\n\t    try {\n\t      // --- Welcome to debugging React ---\n\t      // This error was thrown as a convenience so that you can use this stack\n\t      // to find the callsite that caused this warning to fire.\n\t      throw new Error(message);\n\t    } catch (x) {}\n\t  };\n\n\t  warning = function warning(condition, format) {\n\t    if (format === undefined) {\n\t      throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');\n\t    }\n\n\t    if (format.indexOf('Failed Composite propType: ') === 0) {\n\t      return; // Ignore CompositeComponent proptype check.\n\t    }\n\n\t    if (!condition) {\n\t      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n\t        args[_key2 - 2] = arguments[_key2];\n\t      }\n\n\t      printWarning.apply(undefined, [format].concat(args));\n\t    }\n\t  };\n\t}\n\n\tvar warning_1 = warning;\n\n\t/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/\n\t/* eslint-disable no-unused-vars */\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\n\t\treturn Object(val);\n\t}\n\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (getOwnPropertySymbols) {\n\t\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn to;\n\t};\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\n\tvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\n\tvar ReactPropTypesSecret_1 = ReactPropTypesSecret;\n\n\t{\n\t  var invariant$1 = invariant_1;\n\t  var warning$1 = warning_1;\n\t  var ReactPropTypesSecret$1 = ReactPropTypesSecret_1;\n\t  var loggedTypeFailures = {};\n\t}\n\n\t/**\n\t * Assert that the values match with the type specs.\n\t * Error messages are memorized and will only be shown once.\n\t *\n\t * @param {object} typeSpecs Map of name to a ReactPropType\n\t * @param {object} values Runtime values that need to be type-checked\n\t * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n\t * @param {string} componentName Name of the component for error messages.\n\t * @param {?Function} getStack Returns the component stack.\n\t * @private\n\t */\n\tfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n\t  {\n\t    for (var typeSpecName in typeSpecs) {\n\t      if (typeSpecs.hasOwnProperty(typeSpecName)) {\n\t        var error;\n\t        // Prop type validation may throw. In case they do, we don't want to\n\t        // fail the render phase where it didn't fail before. So we log it.\n\t        // After these have been cleaned up, we'll let them throw.\n\t        try {\n\t          // This is intentionally an invariant that gets caught. It's the same\n\t          // behavior as without this statement except with a better message.\n\t          invariant$1(typeof typeSpecs[typeSpecName] === 'function', '%s: %s type `%s` is invalid; it must be a function, usually from ' + 'the `prop-types` package, but received `%s`.', componentName || 'React class', location, typeSpecName, typeof typeSpecs[typeSpecName]);\n\t          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret$1);\n\t        } catch (ex) {\n\t          error = ex;\n\t        }\n\t        warning$1(!error || error instanceof Error, '%s: type specification of %s `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error);\n\t        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n\t          // Only monitor this failure once because there tends to be a lot of the\n\t          // same error.\n\t          loggedTypeFailures[error.message] = true;\n\n\t          var stack = getStack ? getStack() : '';\n\n\t          warning$1(false, 'Failed %s type: %s%s', location, error.message, stack != null ? stack : '');\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n\tvar checkPropTypes_1 = checkPropTypes;\n\n\tvar factoryWithTypeCheckers = function(isValidElement, throwOnDirectAccess) {\n\t  /* global Symbol */\n\t  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n\t  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n\t  /**\n\t   * Returns the iterator method function contained on the iterable object.\n\t   *\n\t   * Be sure to invoke the function with the iterable as context:\n\t   *\n\t   *     var iteratorFn = getIteratorFn(myIterable);\n\t   *     if (iteratorFn) {\n\t   *       var iterator = iteratorFn.call(myIterable);\n\t   *       ...\n\t   *     }\n\t   *\n\t   * @param {?object} maybeIterable\n\t   * @return {?function}\n\t   */\n\t  function getIteratorFn(maybeIterable) {\n\t    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n\t    if (typeof iteratorFn === 'function') {\n\t      return iteratorFn;\n\t    }\n\t  }\n\n\t  /**\n\t   * Collection of methods that allow declaration and validation of props that are\n\t   * supplied to React components. Example usage:\n\t   *\n\t   *   var Props = require('ReactPropTypes');\n\t   *   var MyArticle = React.createClass({\n\t   *     propTypes: {\n\t   *       // An optional string prop named \"description\".\n\t   *       description: Props.string,\n\t   *\n\t   *       // A required enum prop named \"category\".\n\t   *       category: Props.oneOf(['News','Photos']).isRequired,\n\t   *\n\t   *       // A prop named \"dialog\" that requires an instance of Dialog.\n\t   *       dialog: Props.instanceOf(Dialog).isRequired\n\t   *     },\n\t   *     render: function() { ... }\n\t   *   });\n\t   *\n\t   * A more formal specification of how these methods are used:\n\t   *\n\t   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n\t   *   decl := ReactPropTypes.{type}(.isRequired)?\n\t   *\n\t   * Each and every declaration produces a function with the same signature. This\n\t   * allows the creation of custom validation functions. For example:\n\t   *\n\t   *  var MyLink = React.createClass({\n\t   *    propTypes: {\n\t   *      // An optional string or URI prop named \"href\".\n\t   *      href: function(props, propName, componentName) {\n\t   *        var propValue = props[propName];\n\t   *        if (propValue != null && typeof propValue !== 'string' &&\n\t   *            !(propValue instanceof URI)) {\n\t   *          return new Error(\n\t   *            'Expected a string or an URI for ' + propName + ' in ' +\n\t   *            componentName\n\t   *          );\n\t   *        }\n\t   *      }\n\t   *    },\n\t   *    render: function() {...}\n\t   *  });\n\t   *\n\t   * @internal\n\t   */\n\n\t  var ANONYMOUS = '<<anonymous>>';\n\n\t  // Important!\n\t  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n\t  var ReactPropTypes = {\n\t    array: createPrimitiveTypeChecker('array'),\n\t    bool: createPrimitiveTypeChecker('boolean'),\n\t    func: createPrimitiveTypeChecker('function'),\n\t    number: createPrimitiveTypeChecker('number'),\n\t    object: createPrimitiveTypeChecker('object'),\n\t    string: createPrimitiveTypeChecker('string'),\n\t    symbol: createPrimitiveTypeChecker('symbol'),\n\n\t    any: createAnyTypeChecker(),\n\t    arrayOf: createArrayOfTypeChecker,\n\t    element: createElementTypeChecker(),\n\t    instanceOf: createInstanceTypeChecker,\n\t    node: createNodeChecker(),\n\t    objectOf: createObjectOfTypeChecker,\n\t    oneOf: createEnumTypeChecker,\n\t    oneOfType: createUnionTypeChecker,\n\t    shape: createShapeTypeChecker,\n\t    exact: createStrictShapeTypeChecker,\n\t  };\n\n\t  /**\n\t   * inlined Object.is polyfill to avoid requiring consumers ship their own\n\t   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n\t   */\n\t  /*eslint-disable no-self-compare*/\n\t  function is(x, y) {\n\t    // SameValue algorithm\n\t    if (x === y) {\n\t      // Steps 1-5, 7-10\n\t      // Steps 6.b-6.e: +0 != -0\n\t      return x !== 0 || 1 / x === 1 / y;\n\t    } else {\n\t      // Step 6.a: NaN == NaN\n\t      return x !== x && y !== y;\n\t    }\n\t  }\n\t  /*eslint-enable no-self-compare*/\n\n\t  /**\n\t   * We use an Error-like object for backward compatibility as people may call\n\t   * PropTypes directly and inspect their output. However, we don't use real\n\t   * Errors anymore. We don't inspect their stack anyway, and creating them\n\t   * is prohibitively expensive if they are created too often, such as what\n\t   * happens in oneOfType() for any type before the one that matched.\n\t   */\n\t  function PropTypeError(message) {\n\t    this.message = message;\n\t    this.stack = '';\n\t  }\n\t  // Make `instanceof Error` still work for returned errors.\n\t  PropTypeError.prototype = Error.prototype;\n\n\t  function createChainableTypeChecker(validate) {\n\t    {\n\t      var manualPropTypeCallCache = {};\n\t      var manualPropTypeWarningCount = 0;\n\t    }\n\t    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n\t      componentName = componentName || ANONYMOUS;\n\t      propFullName = propFullName || propName;\n\n\t      if (secret !== ReactPropTypesSecret_1) {\n\t        if (throwOnDirectAccess) {\n\t          // New behavior only for users of `prop-types` package\n\t          invariant_1(\n\t            false,\n\t            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n\t            'Use `PropTypes.checkPropTypes()` to call them. ' +\n\t            'Read more at http://fb.me/use-check-prop-types'\n\t          );\n\t        } else if (\"development\" !== 'production' && typeof console !== 'undefined') {\n\t          // Old behavior for people using React.PropTypes\n\t          var cacheKey = componentName + ':' + propName;\n\t          if (\n\t            !manualPropTypeCallCache[cacheKey] &&\n\t            // Avoid spamming the console because they are often not actionable except for lib authors\n\t            manualPropTypeWarningCount < 3\n\t          ) {\n\t            warning_1(\n\t              false,\n\t              'You are manually calling a React.PropTypes validation ' +\n\t              'function for the `%s` prop on `%s`. This is deprecated ' +\n\t              'and will throw in the standalone `prop-types` package. ' +\n\t              'You may be seeing this warning due to a third-party PropTypes ' +\n\t              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.',\n\t              propFullName,\n\t              componentName\n\t            );\n\t            manualPropTypeCallCache[cacheKey] = true;\n\t            manualPropTypeWarningCount++;\n\t          }\n\t        }\n\t      }\n\t      if (props[propName] == null) {\n\t        if (isRequired) {\n\t          if (props[propName] === null) {\n\t            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n\t          }\n\t          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n\t        }\n\t        return null;\n\t      } else {\n\t        return validate(props, propName, componentName, location, propFullName);\n\t      }\n\t    }\n\n\t    var chainedCheckType = checkType.bind(null, false);\n\t    chainedCheckType.isRequired = checkType.bind(null, true);\n\n\t    return chainedCheckType;\n\t  }\n\n\t  function createPrimitiveTypeChecker(expectedType) {\n\t    function validate(props, propName, componentName, location, propFullName, secret) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== expectedType) {\n\t        // `propValue` being instance of, say, date/regexp, pass the 'object'\n\t        // check, but we can offer a more precise error message here rather than\n\t        // 'of type `object`'.\n\t        var preciseType = getPreciseType(propValue);\n\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function createAnyTypeChecker() {\n\t    return createChainableTypeChecker(emptyFunction_1.thatReturnsNull);\n\t  }\n\n\t  function createArrayOfTypeChecker(typeChecker) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (typeof typeChecker !== 'function') {\n\t        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n\t      }\n\t      var propValue = props[propName];\n\t      if (!Array.isArray(propValue)) {\n\t        var propType = getPropType(propValue);\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n\t      }\n\t      for (var i = 0; i < propValue.length; i++) {\n\t        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret_1);\n\t        if (error instanceof Error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function createElementTypeChecker() {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      if (!isValidElement(propValue)) {\n\t        var propType = getPropType(propValue);\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function createInstanceTypeChecker(expectedClass) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (!(props[propName] instanceof expectedClass)) {\n\t        var expectedClassName = expectedClass.name || ANONYMOUS;\n\t        var actualClassName = getClassName(props[propName]);\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function createEnumTypeChecker(expectedValues) {\n\t    if (!Array.isArray(expectedValues)) {\n\t      warning_1(false, 'Invalid argument supplied to oneOf, expected an instance of array.');\n\t      return emptyFunction_1.thatReturnsNull;\n\t    }\n\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      for (var i = 0; i < expectedValues.length; i++) {\n\t        if (is(propValue, expectedValues[i])) {\n\t          return null;\n\t        }\n\t      }\n\n\t      var valuesString = JSON.stringify(expectedValues);\n\t      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + propValue + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function createObjectOfTypeChecker(typeChecker) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (typeof typeChecker !== 'function') {\n\t        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n\t      }\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n\t      }\n\t      for (var key in propValue) {\n\t        if (propValue.hasOwnProperty(key)) {\n\t          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret_1);\n\t          if (error instanceof Error) {\n\t            return error;\n\t          }\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function createUnionTypeChecker(arrayOfTypeCheckers) {\n\t    if (!Array.isArray(arrayOfTypeCheckers)) {\n\t      warning_1(false, 'Invalid argument supplied to oneOfType, expected an instance of array.');\n\t      return emptyFunction_1.thatReturnsNull;\n\t    }\n\n\t    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n\t      var checker = arrayOfTypeCheckers[i];\n\t      if (typeof checker !== 'function') {\n\t        warning_1(\n\t          false,\n\t          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n\t          'received %s at index %s.',\n\t          getPostfixForTypeWarning(checker),\n\t          i\n\t        );\n\t        return emptyFunction_1.thatReturnsNull;\n\t      }\n\t    }\n\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n\t        var checker = arrayOfTypeCheckers[i];\n\t        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret_1) == null) {\n\t          return null;\n\t        }\n\t      }\n\n\t      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function createNodeChecker() {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (!isNode(props[propName])) {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function createShapeTypeChecker(shapeTypes) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n\t      }\n\t      for (var key in shapeTypes) {\n\t        var checker = shapeTypes[key];\n\t        if (!checker) {\n\t          continue;\n\t        }\n\t        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret_1);\n\t        if (error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function createStrictShapeTypeChecker(shapeTypes) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n\t      }\n\t      // We need to check all keys in case some are required but missing from\n\t      // props.\n\t      var allKeys = objectAssign({}, props[propName], shapeTypes);\n\t      for (var key in allKeys) {\n\t        var checker = shapeTypes[key];\n\t        if (!checker) {\n\t          return new PropTypeError(\n\t            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n\t            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n\t            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n\t          );\n\t        }\n\t        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret_1);\n\t        if (error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\n\t    return createChainableTypeChecker(validate);\n\t  }\n\n\t  function isNode(propValue) {\n\t    switch (typeof propValue) {\n\t      case 'number':\n\t      case 'string':\n\t      case 'undefined':\n\t        return true;\n\t      case 'boolean':\n\t        return !propValue;\n\t      case 'object':\n\t        if (Array.isArray(propValue)) {\n\t          return propValue.every(isNode);\n\t        }\n\t        if (propValue === null || isValidElement(propValue)) {\n\t          return true;\n\t        }\n\n\t        var iteratorFn = getIteratorFn(propValue);\n\t        if (iteratorFn) {\n\t          var iterator = iteratorFn.call(propValue);\n\t          var step;\n\t          if (iteratorFn !== propValue.entries) {\n\t            while (!(step = iterator.next()).done) {\n\t              if (!isNode(step.value)) {\n\t                return false;\n\t              }\n\t            }\n\t          } else {\n\t            // Iterator will provide entry [k,v] tuples rather than values.\n\t            while (!(step = iterator.next()).done) {\n\t              var entry = step.value;\n\t              if (entry) {\n\t                if (!isNode(entry[1])) {\n\t                  return false;\n\t                }\n\t              }\n\t            }\n\t          }\n\t        } else {\n\t          return false;\n\t        }\n\n\t        return true;\n\t      default:\n\t        return false;\n\t    }\n\t  }\n\n\t  function isSymbol(propType, propValue) {\n\t    // Native Symbol.\n\t    if (propType === 'symbol') {\n\t      return true;\n\t    }\n\n\t    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n\t    if (propValue['@@toStringTag'] === 'Symbol') {\n\t      return true;\n\t    }\n\n\t    // Fallback for non-spec compliant Symbols which are polyfilled.\n\t    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n\t      return true;\n\t    }\n\n\t    return false;\n\t  }\n\n\t  // Equivalent of `typeof` but with special handling for array and regexp.\n\t  function getPropType(propValue) {\n\t    var propType = typeof propValue;\n\t    if (Array.isArray(propValue)) {\n\t      return 'array';\n\t    }\n\t    if (propValue instanceof RegExp) {\n\t      // Old webkits (at least until Android 4.0) return 'function' rather than\n\t      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n\t      // passes PropTypes.object.\n\t      return 'object';\n\t    }\n\t    if (isSymbol(propType, propValue)) {\n\t      return 'symbol';\n\t    }\n\t    return propType;\n\t  }\n\n\t  // This handles more types than `getPropType`. Only used for error messages.\n\t  // See `createPrimitiveTypeChecker`.\n\t  function getPreciseType(propValue) {\n\t    if (typeof propValue === 'undefined' || propValue === null) {\n\t      return '' + propValue;\n\t    }\n\t    var propType = getPropType(propValue);\n\t    if (propType === 'object') {\n\t      if (propValue instanceof Date) {\n\t        return 'date';\n\t      } else if (propValue instanceof RegExp) {\n\t        return 'regexp';\n\t      }\n\t    }\n\t    return propType;\n\t  }\n\n\t  // Returns a string that is postfixed to a warning about an invalid type.\n\t  // For example, \"undefined\" or \"of type array\"\n\t  function getPostfixForTypeWarning(value) {\n\t    var type = getPreciseType(value);\n\t    switch (type) {\n\t      case 'array':\n\t      case 'object':\n\t        return 'an ' + type;\n\t      case 'boolean':\n\t      case 'date':\n\t      case 'regexp':\n\t        return 'a ' + type;\n\t      default:\n\t        return type;\n\t    }\n\t  }\n\n\t  // Returns class name of the object, if any.\n\t  function getClassName(propValue) {\n\t    if (!propValue.constructor || !propValue.constructor.name) {\n\t      return ANONYMOUS;\n\t    }\n\t    return propValue.constructor.name;\n\t  }\n\n\t  ReactPropTypes.checkPropTypes = checkPropTypes_1;\n\t  ReactPropTypes.PropTypes = ReactPropTypes;\n\n\t  return ReactPropTypes;\n\t};\n\n\tvar propTypes = createCommonjsModule(function (module) {\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\n\t{\n\t  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n\t    Symbol.for &&\n\t    Symbol.for('react.element')) ||\n\t    0xeac7;\n\n\t  var isValidElement = function(object) {\n\t    return typeof object === 'object' &&\n\t      object !== null &&\n\t      object.$$typeof === REACT_ELEMENT_TYPE;\n\t  };\n\n\t  // By explicitly using `prop-types` you are opting into new development behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  var throwOnDirectAccess = true;\n\t  module.exports = factoryWithTypeCheckers(isValidElement, throwOnDirectAccess);\n\t}\n\t});\n\n\tvar classnames = createCommonjsModule(function (module) {\n\t/*!\n\t  Copyright (c) 2016 Jed Watson.\n\t  Licensed under the MIT License (MIT), see\n\t  http://jedwatson.github.io/classnames\n\t*/\n\t/* global define */\n\n\t(function () {\n\n\t\tvar hasOwn = {}.hasOwnProperty;\n\n\t\tfunction classNames () {\n\t\t\tvar classes = [];\n\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\tvar arg = arguments[i];\n\t\t\t\tif (!arg) continue;\n\n\t\t\t\tvar argType = typeof arg;\n\n\t\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\t\tclasses.push(arg);\n\t\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t\t} else if (argType === 'object') {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn classes.join(' ');\n\t\t}\n\n\t\tif ('object' !== 'undefined' && module.exports) {\n\t\t\tmodule.exports = classNames;\n\t\t} else if (typeof undefined === 'function' && typeof undefined.amd === 'object' && undefined.amd) {\n\t\t\t// register as 'classnames', consistent with npm package name\n\t\t\tundefined('classnames', [], function () {\n\t\t\t\treturn classNames;\n\t\t\t});\n\t\t} else {\n\t\t\twindow.classNames = classNames;\n\t\t}\n\t}());\n\t});\n\n\t// @credits https://gist.github.com/rogozhnikoff/a43cfed27c41e4e68cdc\n\tfunction findInArray(array /*: Array<any> | TouchList*/, callback /*: Function*/) /*: any*/ {\n\t  for (var i = 0, length = array.length; i < length; i++) {\n\t    if (callback.apply(callback, [array[i], i, array])) return array[i];\n\t  }\n\t}\n\n\tfunction isFunction(func /*: any*/) /*: boolean*/ {\n\t  return typeof func === 'function' || Object.prototype.toString.call(func) === '[object Function]';\n\t}\n\n\tfunction isNum(num /*: any*/) /*: boolean*/ {\n\t  return typeof num === 'number' && !isNaN(num);\n\t}\n\n\tfunction int(a /*: string*/) /*: number*/ {\n\t  return parseInt(a, 10);\n\t}\n\n\tfunction dontSetMe(props /*: Object*/, propName /*: string*/, componentName /*: string*/) {\n\t  if (props[propName]) {\n\t    return new Error('Invalid prop ' + propName + ' passed to ' + componentName + ' - do not set this, set it on the child.');\n\t  }\n\t}\n\n\tvar prefixes = ['Moz', 'Webkit', 'O', 'ms'];\n\tfunction getPrefix() /*: string*/ {\n\t  var prop /*: string*/ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'transform';\n\n\t  // Checking specifically for 'window.document' is for pseudo-browser server-side\n\t  // environments that define 'window' as the global context.\n\t  // E.g. React-rails (see https://github.com/reactjs/react-rails/pull/84)\n\t  if (typeof window === 'undefined' || typeof window.document === 'undefined') return '';\n\n\t  var style = window.document.documentElement.style;\n\n\t  if (prop in style) return '';\n\n\t  for (var i = 0; i < prefixes.length; i++) {\n\t    if (browserPrefixToKey(prop, prefixes[i]) in style) return prefixes[i];\n\t  }\n\n\t  return '';\n\t}\n\n\tfunction browserPrefixToKey(prop /*: string*/, prefix /*: string*/) /*: string*/ {\n\t  return prefix ? '' + prefix + kebabToTitleCase(prop) : prop;\n\t}\n\n\tfunction kebabToTitleCase(str /*: string*/) /*: string*/ {\n\t  var out = '';\n\t  var shouldCapitalize = true;\n\t  for (var i = 0; i < str.length; i++) {\n\t    if (shouldCapitalize) {\n\t      out += str[i].toUpperCase();\n\t      shouldCapitalize = false;\n\t    } else if (str[i] === '-') {\n\t      shouldCapitalize = true;\n\t    } else {\n\t      out += str[i];\n\t    }\n\t  }\n\t  return out;\n\t}\n\n\t// Default export is the prefix itself, like 'Moz', 'Webkit', etc\n\t// Note that you may have to re-test for certain things; for instance, Chrome 50\n\t// can handle unprefixed `transform`, but not unprefixed `user-select`\n\tvar browserPrefix = getPrefix();\n\n\tvar classCallCheck = function (instance, Constructor) {\n\t  if (!(instance instanceof Constructor)) {\n\t    throw new TypeError(\"Cannot call a class as a function\");\n\t  }\n\t};\n\n\tvar createClass = function () {\n\t  function defineProperties(target, props) {\n\t    for (var i = 0; i < props.length; i++) {\n\t      var descriptor = props[i];\n\t      descriptor.enumerable = descriptor.enumerable || false;\n\t      descriptor.configurable = true;\n\t      if (\"value\" in descriptor) descriptor.writable = true;\n\t      Object.defineProperty(target, descriptor.key, descriptor);\n\t    }\n\t  }\n\n\t  return function (Constructor, protoProps, staticProps) {\n\t    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t    if (staticProps) defineProperties(Constructor, staticProps);\n\t    return Constructor;\n\t  };\n\t}();\n\n\tvar defineProperty = function (obj, key, value) {\n\t  if (key in obj) {\n\t    Object.defineProperty(obj, key, {\n\t      value: value,\n\t      enumerable: true,\n\t      configurable: true,\n\t      writable: true\n\t    });\n\t  } else {\n\t    obj[key] = value;\n\t  }\n\n\t  return obj;\n\t};\n\n\tvar _extends = Object.assign || function (target) {\n\t  for (var i = 1; i < arguments.length; i++) {\n\t    var source = arguments[i];\n\n\t    for (var key in source) {\n\t      if (Object.prototype.hasOwnProperty.call(source, key)) {\n\t        target[key] = source[key];\n\t      }\n\t    }\n\t  }\n\n\t  return target;\n\t};\n\n\tvar inherits = function (subClass, superClass) {\n\t  if (typeof superClass !== \"function\" && superClass !== null) {\n\t    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n\t  }\n\n\t  subClass.prototype = Object.create(superClass && superClass.prototype, {\n\t    constructor: {\n\t      value: subClass,\n\t      enumerable: false,\n\t      writable: true,\n\t      configurable: true\n\t    }\n\t  });\n\t  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n\t};\n\n\tvar possibleConstructorReturn = function (self, call) {\n\t  if (!self) {\n\t    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\t  }\n\n\t  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n\t};\n\n\tvar slicedToArray = function () {\n\t  function sliceIterator(arr, i) {\n\t    var _arr = [];\n\t    var _n = true;\n\t    var _d = false;\n\t    var _e = undefined;\n\n\t    try {\n\t      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t        _arr.push(_s.value);\n\n\t        if (i && _arr.length === i) break;\n\t      }\n\t    } catch (err) {\n\t      _d = true;\n\t      _e = err;\n\t    } finally {\n\t      try {\n\t        if (!_n && _i[\"return\"]) _i[\"return\"]();\n\t      } finally {\n\t        if (_d) throw _e;\n\t      }\n\t    }\n\n\t    return _arr;\n\t  }\n\n\t  return function (arr, i) {\n\t    if (Array.isArray(arr)) {\n\t      return arr;\n\t    } else if (Symbol.iterator in Object(arr)) {\n\t      return sliceIterator(arr, i);\n\t    } else {\n\t      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n\t    }\n\t  };\n\t}();\n\n\t/*:: import type {ControlPosition, PositionOffsetControlPosition, MouseTouchEvent} from './types';*/\n\n\n\tvar matchesSelectorFunc = '';\n\tfunction matchesSelector(el /*: Node*/, selector /*: string*/) /*: boolean*/ {\n\t  if (!matchesSelectorFunc) {\n\t    matchesSelectorFunc = findInArray(['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'], function (method) {\n\t      // $FlowIgnore: Doesn't think elements are indexable\n\t      return isFunction(el[method]);\n\t    });\n\t  }\n\n\t  // Might not be found entirely (not an Element?) - in that case, bail\n\t  // $FlowIgnore: Doesn't think elements are indexable\n\t  if (!isFunction(el[matchesSelectorFunc])) return false;\n\n\t  // $FlowIgnore: Doesn't think elements are indexable\n\t  return el[matchesSelectorFunc](selector);\n\t}\n\n\t// Works up the tree to the draggable itself attempting to match selector.\n\tfunction matchesSelectorAndParentsTo(el /*: Node*/, selector /*: string*/, baseNode /*: Node*/) /*: boolean*/ {\n\t  var node = el;\n\t  do {\n\t    if (matchesSelector(node, selector)) return true;\n\t    if (node === baseNode) return false;\n\t    node = node.parentNode;\n\t  } while (node);\n\n\t  return false;\n\t}\n\n\tfunction addEvent(el /*: ?Node*/, event /*: string*/, handler /*: Function*/) /*: void*/ {\n\t  if (!el) {\n\t    return;\n\t  }\n\t  if (el.attachEvent) {\n\t    el.attachEvent('on' + event, handler);\n\t  } else if (el.addEventListener) {\n\t    el.addEventListener(event, handler, true);\n\t  } else {\n\t    // $FlowIgnore: Doesn't think elements are indexable\n\t    el['on' + event] = handler;\n\t  }\n\t}\n\n\tfunction removeEvent(el /*: ?Node*/, event /*: string*/, handler /*: Function*/) /*: void*/ {\n\t  if (!el) {\n\t    return;\n\t  }\n\t  if (el.detachEvent) {\n\t    el.detachEvent('on' + event, handler);\n\t  } else if (el.removeEventListener) {\n\t    el.removeEventListener(event, handler, true);\n\t  } else {\n\t    // $FlowIgnore: Doesn't think elements are indexable\n\t    el['on' + event] = null;\n\t  }\n\t}\n\n\tfunction outerHeight(node /*: HTMLElement*/) /*: number*/ {\n\t  // This is deliberately excluding margin for our calculations, since we are using\n\t  // offsetTop which is including margin. See getBoundPosition\n\t  var height = node.clientHeight;\n\t  var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n\t  height += int(computedStyle.borderTopWidth);\n\t  height += int(computedStyle.borderBottomWidth);\n\t  return height;\n\t}\n\n\tfunction outerWidth(node /*: HTMLElement*/) /*: number*/ {\n\t  // This is deliberately excluding margin for our calculations, since we are using\n\t  // offsetLeft which is including margin. See getBoundPosition\n\t  var width = node.clientWidth;\n\t  var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n\t  width += int(computedStyle.borderLeftWidth);\n\t  width += int(computedStyle.borderRightWidth);\n\t  return width;\n\t}\n\tfunction innerHeight(node /*: HTMLElement*/) /*: number*/ {\n\t  var height = node.clientHeight;\n\t  var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n\t  height -= int(computedStyle.paddingTop);\n\t  height -= int(computedStyle.paddingBottom);\n\t  return height;\n\t}\n\n\tfunction innerWidth(node /*: HTMLElement*/) /*: number*/ {\n\t  var width = node.clientWidth;\n\t  var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n\t  width -= int(computedStyle.paddingLeft);\n\t  width -= int(computedStyle.paddingRight);\n\t  return width;\n\t}\n\n\t// Get from offsetParent\n\tfunction offsetXYFromParent(evt /*: {clientX: number, clientY: number}*/, offsetParent /*: HTMLElement*/) /*: ControlPosition*/ {\n\t  var isBody = offsetParent === offsetParent.ownerDocument.body;\n\t  var offsetParentRect = isBody ? { left: 0, top: 0 } : offsetParent.getBoundingClientRect();\n\n\t  var x = evt.clientX + offsetParent.scrollLeft - offsetParentRect.left;\n\t  var y = evt.clientY + offsetParent.scrollTop - offsetParentRect.top;\n\n\t  return { x: x, y: y };\n\t}\n\n\tfunction createCSSTransform(controlPos /*: ControlPosition*/, positionOffset /*: PositionOffsetControlPosition*/) /*: Object*/ {\n\t  var translation = getTranslation(controlPos, positionOffset, 'px');\n\t  return defineProperty({}, browserPrefixToKey('transform', browserPrefix), translation);\n\t}\n\n\tfunction createSVGTransform(controlPos /*: ControlPosition*/, positionOffset /*: PositionOffsetControlPosition*/) /*: string*/ {\n\t  var translation = getTranslation(controlPos, positionOffset, '');\n\t  return translation;\n\t}\n\tfunction getTranslation(_ref2, positionOffset /*: PositionOffsetControlPosition*/, unitSuffix /*: string*/) /*: string*/ {\n\t  var x = _ref2.x,\n\t      y = _ref2.y;\n\n\t  var translation = 'translate(' + x + unitSuffix + ',' + y + unitSuffix + ')';\n\t  if (positionOffset) {\n\t    var defaultX = '' + (typeof positionOffset.x === 'string' ? positionOffset.x : positionOffset.x + unitSuffix);\n\t    var defaultY = '' + (typeof positionOffset.y === 'string' ? positionOffset.y : positionOffset.y + unitSuffix);\n\t    translation = 'translate(' + defaultX + ', ' + defaultY + ')' + translation;\n\t  }\n\t  return translation;\n\t}\n\n\tfunction getTouch(e /*: MouseTouchEvent*/, identifier /*: number*/) /*: ?{clientX: number, clientY: number}*/ {\n\t  return e.targetTouches && findInArray(e.targetTouches, function (t) {\n\t    return identifier === t.identifier;\n\t  }) || e.changedTouches && findInArray(e.changedTouches, function (t) {\n\t    return identifier === t.identifier;\n\t  });\n\t}\n\n\tfunction getTouchIdentifier(e /*: MouseTouchEvent*/) /*: ?number*/ {\n\t  if (e.targetTouches && e.targetTouches[0]) return e.targetTouches[0].identifier;\n\t  if (e.changedTouches && e.changedTouches[0]) return e.changedTouches[0].identifier;\n\t}\n\n\t// User-select Hacks:\n\t//\n\t// Useful for preventing blue highlights all over everything when dragging.\n\n\t// Note we're passing `document` b/c we could be iframed\n\tfunction addUserSelectStyles(doc /*: ?Document*/) {\n\t  if (!doc) return;\n\t  var styleEl = doc.getElementById('react-draggable-style-el');\n\t  if (!styleEl) {\n\t    styleEl = doc.createElement('style');\n\t    styleEl.type = 'text/css';\n\t    styleEl.id = 'react-draggable-style-el';\n\t    styleEl.innerHTML = '.react-draggable-transparent-selection *::-moz-selection {all: inherit;}\\n';\n\t    styleEl.innerHTML += '.react-draggable-transparent-selection *::selection {all: inherit;}\\n';\n\t    doc.getElementsByTagName('head')[0].appendChild(styleEl);\n\t  }\n\t  if (doc.body) addClassName(doc.body, 'react-draggable-transparent-selection');\n\t}\n\n\tfunction removeUserSelectStyles(doc /*: ?Document*/) {\n\t  try {\n\t    if (doc && doc.body) removeClassName(doc.body, 'react-draggable-transparent-selection');\n\t    // $FlowIgnore: IE\n\t    if (doc.selection) {\n\t      // $FlowIgnore: IE\n\t      doc.selection.empty();\n\t    } else {\n\t      window.getSelection().removeAllRanges(); // remove selection caused by scroll\n\t    }\n\t  } catch (e) {\n\t    // probably IE\n\t  }\n\t}\n\n\tfunction styleHacks() /*: Object*/ {\n\t  var childStyle /*: Object*/ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\t  // Workaround IE pointer events; see #51\n\t  // https://github.com/mzabriskie/react-draggable/issues/51#issuecomment-103488278\n\t  return _extends({\n\t    touchAction: 'none'\n\t  }, childStyle);\n\t}\n\n\tfunction addClassName(el /*: HTMLElement*/, className /*: string*/) {\n\t  if (el.classList) {\n\t    el.classList.add(className);\n\t  } else {\n\t    if (!el.className.match(new RegExp('(?:^|\\\\s)' + className + '(?!\\\\S)'))) {\n\t      el.className += ' ' + className;\n\t    }\n\t  }\n\t}\n\n\tfunction removeClassName(el /*: HTMLElement*/, className /*: string*/) {\n\t  if (el.classList) {\n\t    el.classList.remove(className);\n\t  } else {\n\t    el.className = el.className.replace(new RegExp('(?:^|\\\\s)' + className + '(?!\\\\S)', 'g'), '');\n\t  }\n\t}\n\n\t/*:: import type Draggable from '../Draggable';*/\n\t/*:: import type {Bounds, ControlPosition, DraggableData, MouseTouchEvent} from './types';*/\n\t/*:: import type DraggableCore from '../DraggableCore';*/\n\n\n\tfunction getBoundPosition(draggable /*: Draggable*/, x /*: number*/, y /*: number*/) /*: [number, number]*/ {\n\t  // If no bounds, short-circuit and move on\n\t  if (!draggable.props.bounds) return [x, y];\n\n\t  // Clone new bounds\n\t  var bounds = draggable.props.bounds;\n\n\t  bounds = typeof bounds === 'string' ? bounds : cloneBounds(bounds);\n\t  var node = findDOMNode(draggable);\n\n\t  if (typeof bounds === 'string') {\n\t    var ownerDocument = node.ownerDocument;\n\n\t    var ownerWindow = ownerDocument.defaultView;\n\t    var boundNode = void 0;\n\t    if (bounds === 'parent') {\n\t      boundNode = node.parentNode;\n\t    } else {\n\t      boundNode = ownerDocument.querySelector(bounds);\n\t    }\n\t    if (!(boundNode instanceof ownerWindow.HTMLElement)) {\n\t      throw new Error('Bounds selector \"' + bounds + '\" could not find an element.');\n\t    }\n\t    var nodeStyle = ownerWindow.getComputedStyle(node);\n\t    var boundNodeStyle = ownerWindow.getComputedStyle(boundNode);\n\t    // Compute bounds. This is a pain with padding and offsets but this gets it exactly right.\n\t    bounds = {\n\t      left: -node.offsetLeft + int(boundNodeStyle.paddingLeft) + int(nodeStyle.marginLeft),\n\t      top: -node.offsetTop + int(boundNodeStyle.paddingTop) + int(nodeStyle.marginTop),\n\t      right: innerWidth(boundNode) - outerWidth(node) - node.offsetLeft + int(boundNodeStyle.paddingRight) - int(nodeStyle.marginRight),\n\t      bottom: innerHeight(boundNode) - outerHeight(node) - node.offsetTop + int(boundNodeStyle.paddingBottom) - int(nodeStyle.marginBottom)\n\t    };\n\t  }\n\n\t  // Keep x and y below right and bottom limits...\n\t  if (isNum(bounds.right)) x = Math.min(x, bounds.right);\n\t  if (isNum(bounds.bottom)) y = Math.min(y, bounds.bottom);\n\n\t  // But above left and top limits.\n\t  if (isNum(bounds.left)) x = Math.max(x, bounds.left);\n\t  if (isNum(bounds.top)) y = Math.max(y, bounds.top);\n\n\t  return [x, y];\n\t}\n\n\tfunction snapToGrid(grid /*: [number, number]*/, pendingX /*: number*/, pendingY /*: number*/) /*: [number, number]*/ {\n\t  var x = Math.round(pendingX / grid[0]) * grid[0];\n\t  var y = Math.round(pendingY / grid[1]) * grid[1];\n\t  return [x, y];\n\t}\n\n\tfunction canDragX(draggable /*: Draggable*/) /*: boolean*/ {\n\t  return draggable.props.axis === 'both' || draggable.props.axis === 'x';\n\t}\n\n\tfunction canDragY(draggable /*: Draggable*/) /*: boolean*/ {\n\t  return draggable.props.axis === 'both' || draggable.props.axis === 'y';\n\t}\n\n\t// Get {x, y} positions from event.\n\tfunction getControlPosition(e /*: MouseTouchEvent*/, touchIdentifier /*: ?number*/, draggableCore /*: DraggableCore*/) /*: ?ControlPosition*/ {\n\t  var touchObj = typeof touchIdentifier === 'number' ? getTouch(e, touchIdentifier) : null;\n\t  if (typeof touchIdentifier === 'number' && !touchObj) return null; // not the right touch\n\t  var node = findDOMNode(draggableCore);\n\t  // User can provide an offsetParent if desired.\n\t  var offsetParent = draggableCore.props.offsetParent || node.offsetParent || node.ownerDocument.body;\n\t  return offsetXYFromParent(touchObj || e, offsetParent);\n\t}\n\n\t// Create an data object exposed by <DraggableCore>'s events\n\tfunction createCoreData(draggable /*: DraggableCore*/, x /*: number*/, y /*: number*/) /*: DraggableData*/ {\n\t  var state = draggable.state;\n\t  var isStart = !isNum(state.lastX);\n\t  var node = findDOMNode(draggable);\n\n\t  if (isStart) {\n\t    // If this is our first move, use the x and y as last coords.\n\t    return {\n\t      node: node,\n\t      deltaX: 0, deltaY: 0,\n\t      lastX: x, lastY: y,\n\t      x: x, y: y\n\t    };\n\t  } else {\n\t    // Otherwise calculate proper values.\n\t    return {\n\t      node: node,\n\t      deltaX: x - state.lastX, deltaY: y - state.lastY,\n\t      lastX: state.lastX, lastY: state.lastY,\n\t      x: x, y: y\n\t    };\n\t  }\n\t}\n\n\t// Create an data exposed by <Draggable>'s events\n\tfunction createDraggableData(draggable /*: Draggable*/, coreData /*: DraggableData*/) /*: DraggableData*/ {\n\t  var scale = draggable.props.scale;\n\t  return {\n\t    node: coreData.node,\n\t    x: draggable.state.x + coreData.deltaX / scale,\n\t    y: draggable.state.y + coreData.deltaY / scale,\n\t    deltaX: coreData.deltaX / scale,\n\t    deltaY: coreData.deltaY / scale,\n\t    lastX: draggable.state.x,\n\t    lastY: draggable.state.y\n\t  };\n\t}\n\n\t// A lot faster than stringify/parse\n\tfunction cloneBounds(bounds /*: Bounds*/) /*: Bounds*/ {\n\t  return {\n\t    left: bounds.left,\n\t    top: bounds.top,\n\t    right: bounds.right,\n\t    bottom: bounds.bottom\n\t  };\n\t}\n\n\tfunction findDOMNode(draggable /*: Draggable | DraggableCore*/) /*: HTMLElement*/ {\n\t  var node = ReactDOM.findDOMNode(draggable);\n\t  if (!node) {\n\t    throw new Error('<DraggableCore>: Unmounted during event!');\n\t  }\n\t  // $FlowIgnore we can't assert on HTMLElement due to tests... FIXME\n\t  return node;\n\t}\n\n\t/*eslint no-console:0*/\n\tfunction log() {\n\t}\n\n\t/*:: import type {EventHandler, MouseTouchEvent} from './utils/types';*/\n\n\n\t// Simple abstraction for dragging events names.\n\t/*:: import type {Element as ReactElement} from 'react';*/\n\tvar eventsFor = {\n\t  touch: {\n\t    start: 'touchstart',\n\t    move: 'touchmove',\n\t    stop: 'touchend'\n\t  },\n\t  mouse: {\n\t    start: 'mousedown',\n\t    move: 'mousemove',\n\t    stop: 'mouseup'\n\t  }\n\t};\n\n\t// Default to mouse events.\n\tvar dragEventFor = eventsFor.mouse;\n\n\t/*:: type DraggableCoreState = {\n\t  dragging: boolean,\n\t  lastX: number,\n\t  lastY: number,\n\t  touchIdentifier: ?number\n\t};*/\n\t/*:: export type DraggableBounds = {\n\t  left: number,\n\t  right: number,\n\t  top: number,\n\t  bottom: number,\n\t};*/\n\t/*:: export type DraggableData = {\n\t  node: HTMLElement,\n\t  x: number, y: number,\n\t  deltaX: number, deltaY: number,\n\t  lastX: number, lastY: number,\n\t};*/\n\t/*:: export type DraggableEventHandler = (e: MouseEvent, data: DraggableData) => void;*/\n\t/*:: export type ControlPosition = {x: number, y: number};*/\n\t/*:: export type PositionOffsetControlPosition = {x: number|string, y: number|string};*/\n\n\n\t//\n\t// Define <DraggableCore>.\n\t//\n\t// <DraggableCore> is for advanced usage of <Draggable>. It maintains minimal internal state so it can\n\t// work well with libraries that require more control over the element.\n\t//\n\n\t/*:: export type DraggableCoreProps = {\n\t  allowAnyClick: boolean,\n\t  cancel: string,\n\t  children: ReactElement<any>,\n\t  disabled: boolean,\n\t  enableUserSelectHack: boolean,\n\t  offsetParent: HTMLElement,\n\t  grid: [number, number],\n\t  handle: string,\n\t  onStart: DraggableEventHandler,\n\t  onDrag: DraggableEventHandler,\n\t  onStop: DraggableEventHandler,\n\t  onMouseDown: (e: MouseEvent) => void,\n\t};*/\n\n\tvar DraggableCore = function (_React$Component) {\n\t  inherits(DraggableCore, _React$Component);\n\n\t  function DraggableCore() {\n\t    var _ref;\n\n\t    var _temp, _this, _ret;\n\n\t    classCallCheck(this, DraggableCore);\n\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\n\t    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = DraggableCore.__proto__ || Object.getPrototypeOf(DraggableCore)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n\t      dragging: false,\n\t      // Used while dragging to determine deltas.\n\t      lastX: NaN, lastY: NaN,\n\t      touchIdentifier: null\n\t    }, _this.handleDragStart = function (e) {\n\t      // Make it possible to attach event handlers on top of this one.\n\t      _this.props.onMouseDown(e);\n\n\t      // Only accept left-clicks.\n\t      if (!_this.props.allowAnyClick && typeof e.button === 'number' && e.button !== 0) return false;\n\n\t      // Get nodes. Be sure to grab relative document (could be iframed)\n\t      var thisNode = ReactDOM.findDOMNode(_this);\n\t      if (!thisNode || !thisNode.ownerDocument || !thisNode.ownerDocument.body) {\n\t        throw new Error('<DraggableCore> not mounted on DragStart!');\n\t      }\n\t      var ownerDocument = thisNode.ownerDocument;\n\n\t      // Short circuit if handle or cancel prop was provided and selector doesn't match.\n\n\t      if (_this.props.disabled || !(e.target instanceof ownerDocument.defaultView.Node) || _this.props.handle && !matchesSelectorAndParentsTo(e.target, _this.props.handle, thisNode) || _this.props.cancel && matchesSelectorAndParentsTo(e.target, _this.props.cancel, thisNode)) {\n\t        return;\n\t      }\n\n\t      // Set touch identifier in component state if this is a touch event. This allows us to\n\t      // distinguish between individual touches on multitouch screens by identifying which\n\t      // touchpoint was set to this element.\n\t      var touchIdentifier = getTouchIdentifier(e);\n\t      _this.setState({ touchIdentifier: touchIdentifier });\n\n\t      // Get the current drag point from the event. This is used as the offset.\n\t      var position = getControlPosition(e, touchIdentifier, _this);\n\t      if (position == null) return; // not possible but satisfies flow\n\t      var x = position.x,\n\t          y = position.y;\n\n\t      // Create an event object with all the data parents need to make a decision here.\n\n\t      var coreEvent = createCoreData(_this, x, y);\n\n\t      // Call event handler. If it returns explicit false, cancel.\n\t      log('calling', _this.props.onStart);\n\t      var shouldUpdate = _this.props.onStart(e, coreEvent);\n\t      if (shouldUpdate === false) return;\n\n\t      // Add a style to the body to disable user-select. This prevents text from\n\t      // being selected all over the page.\n\t      if (_this.props.enableUserSelectHack) addUserSelectStyles(ownerDocument);\n\n\t      // Initiate dragging. Set the current x and y as offsets\n\t      // so we know how much we've moved during the drag. This allows us\n\t      // to drag elements around even if they have been moved, without issue.\n\t      _this.setState({\n\t        dragging: true,\n\n\t        lastX: x,\n\t        lastY: y\n\t      });\n\n\t      // Add events to the document directly so we catch when the user's mouse/touch moves outside of\n\t      // this element. We use different events depending on whether or not we have detected that this\n\t      // is a touch-capable device.\n\t      addEvent(ownerDocument, dragEventFor.move, _this.handleDrag);\n\t      addEvent(ownerDocument, dragEventFor.stop, _this.handleDragStop);\n\t    }, _this.handleDrag = function (e) {\n\n\t      // Prevent scrolling on mobile devices, like ipad/iphone.\n\t      if (e.type === 'touchmove') e.preventDefault();\n\n\t      // Get the current drag point from the event. This is used as the offset.\n\t      var position = getControlPosition(e, _this.state.touchIdentifier, _this);\n\t      if (position == null) return;\n\t      var x = position.x,\n\t          y = position.y;\n\n\t      // Snap to grid if prop has been provided\n\n\t      if (Array.isArray(_this.props.grid)) {\n\t        var _deltaX = x - _this.state.lastX,\n\t            _deltaY = y - _this.state.lastY;\n\n\t        var _snapToGrid = snapToGrid(_this.props.grid, _deltaX, _deltaY);\n\n\t        var _snapToGrid2 = slicedToArray(_snapToGrid, 2);\n\n\t        _deltaX = _snapToGrid2[0];\n\t        _deltaY = _snapToGrid2[1];\n\n\t        if (!_deltaX && !_deltaY) return; // skip useless drag\n\t        x = _this.state.lastX + _deltaX, y = _this.state.lastY + _deltaY;\n\t      }\n\n\t      var coreEvent = createCoreData(_this, x, y);\n\n\t      // Call event handler. If it returns explicit false, trigger end.\n\t      var shouldUpdate = _this.props.onDrag(e, coreEvent);\n\t      if (shouldUpdate === false) {\n\t        try {\n\t          // $FlowIgnore\n\t          _this.handleDragStop(new MouseEvent('mouseup'));\n\t        } catch (err) {\n\t          // Old browsers\n\t          var event = ((document.createEvent('MouseEvents') /*: any*/) /*: MouseTouchEvent*/);\n\t          // I see why this insanity was deprecated\n\t          // $FlowIgnore\n\t          event.initMouseEvent('mouseup', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\t          _this.handleDragStop(event);\n\t        }\n\t        return;\n\t      }\n\n\t      _this.setState({\n\t        lastX: x,\n\t        lastY: y\n\t      });\n\t    }, _this.handleDragStop = function (e) {\n\t      if (!_this.state.dragging) return;\n\n\t      var position = getControlPosition(e, _this.state.touchIdentifier, _this);\n\t      if (position == null) return;\n\t      var x = position.x,\n\t          y = position.y;\n\n\t      var coreEvent = createCoreData(_this, x, y);\n\n\t      var thisNode = ReactDOM.findDOMNode(_this);\n\t      if (thisNode) {\n\t        // Remove user-select hack\n\t        if (_this.props.enableUserSelectHack) removeUserSelectStyles(thisNode.ownerDocument);\n\t      }\n\n\t      // Reset the el.\n\t      _this.setState({\n\t        dragging: false,\n\t        lastX: NaN,\n\t        lastY: NaN\n\t      });\n\n\t      // Call event handler\n\t      _this.props.onStop(e, coreEvent);\n\n\t      if (thisNode) {\n\t        removeEvent(thisNode.ownerDocument, dragEventFor.move, _this.handleDrag);\n\t        removeEvent(thisNode.ownerDocument, dragEventFor.stop, _this.handleDragStop);\n\t      }\n\t    }, _this.onMouseDown = function (e) {\n\t      dragEventFor = eventsFor.mouse; // on touchscreen laptops we could switch back to mouse\n\n\t      return _this.handleDragStart(e);\n\t    }, _this.onMouseUp = function (e) {\n\t      dragEventFor = eventsFor.mouse;\n\n\t      return _this.handleDragStop(e);\n\t    }, _this.onTouchStart = function (e) {\n\t      // We're on a touch device now, so change the event handlers\n\t      dragEventFor = eventsFor.touch;\n\n\t      return _this.handleDragStart(e);\n\t    }, _this.onTouchEnd = function (e) {\n\t      // We're on a touch device now, so change the event handlers\n\t      dragEventFor = eventsFor.touch;\n\n\t      return _this.handleDragStop(e);\n\t    }, _temp), possibleConstructorReturn(_this, _ret);\n\t  }\n\n\t  createClass(DraggableCore, [{\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      // Remove any leftover event handlers. Remove both touch and mouse handlers in case\n\t      // some browser quirk caused a touch event to fire during a mouse move, or vice versa.\n\t      var thisNode = ReactDOM.findDOMNode(this);\n\t      if (thisNode) {\n\t        var ownerDocument = thisNode.ownerDocument;\n\n\t        removeEvent(ownerDocument, eventsFor.mouse.move, this.handleDrag);\n\t        removeEvent(ownerDocument, eventsFor.touch.move, this.handleDrag);\n\t        removeEvent(ownerDocument, eventsFor.mouse.stop, this.handleDragStop);\n\t        removeEvent(ownerDocument, eventsFor.touch.stop, this.handleDragStop);\n\t        if (this.props.enableUserSelectHack) removeUserSelectStyles(ownerDocument);\n\t      }\n\t    }\n\n\t    // Same as onMouseDown (start drag), but now consider this a touch device.\n\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      // Reuse the child provided\n\t      // This makes it flexible to use whatever element is wanted (div, ul, etc)\n\t      return React.cloneElement(React.Children.only(this.props.children), {\n\t        style: styleHacks(this.props.children.props.style),\n\n\t        // Note: mouseMove handler is attached to document so it will still function\n\t        // when the user drags quickly and leaves the bounds of the element.\n\t        onMouseDown: this.onMouseDown,\n\t        onTouchStart: this.onTouchStart,\n\t        onMouseUp: this.onMouseUp,\n\t        onTouchEnd: this.onTouchEnd\n\t      });\n\t    }\n\t  }]);\n\t  return DraggableCore;\n\t}(React.Component);\n\n\tDraggableCore.displayName = 'DraggableCore';\n\tDraggableCore.propTypes = {\n\t  /**\n\t   * `allowAnyClick` allows dragging using any mouse button.\n\t   * By default, we only accept the left button.\n\t   *\n\t   * Defaults to `false`.\n\t   */\n\t  allowAnyClick: propTypes.bool,\n\n\t  /**\n\t   * `disabled`, if true, stops the <Draggable> from dragging. All handlers,\n\t   * with the exception of `onMouseDown`, will not fire.\n\t   */\n\t  disabled: propTypes.bool,\n\n\t  /**\n\t   * By default, we add 'user-select:none' attributes to the document body\n\t   * to prevent ugly text selection during drag. If this is causing problems\n\t   * for your app, set this to `false`.\n\t   */\n\t  enableUserSelectHack: propTypes.bool,\n\n\t  /**\n\t   * `offsetParent`, if set, uses the passed DOM node to compute drag offsets\n\t   * instead of using the parent node.\n\t   */\n\t  offsetParent: function offsetParent(props /*: DraggableCoreProps*/, propName /*: $Keys<DraggableCoreProps>*/) {\n\t    if (props[propName] && props[propName].nodeType !== 1) {\n\t      throw new Error('Draggable\\'s offsetParent must be a DOM Node.');\n\t    }\n\t  },\n\n\t  /**\n\t   * `grid` specifies the x and y that dragging should snap to.\n\t   */\n\t  grid: propTypes.arrayOf(propTypes.number),\n\n\t  /**\n\t   * `scale` specifies the scale of the area you are dragging inside of. It allows\n\t   * the drag deltas to scale correctly with how far zoomed in/out you are.\n\t   */\n\t  scale: propTypes.number,\n\n\t  /**\n\t   * `handle` specifies a selector to be used as the handle that initiates drag.\n\t   *\n\t   * Example:\n\t   *\n\t   * ```jsx\n\t   *   let App = React.createClass({\n\t   *       render: function () {\n\t   *         return (\n\t   *            <Draggable handle=\".handle\">\n\t   *              <div>\n\t   *                  <div className=\"handle\">Click me to drag</div>\n\t   *                  <div>This is some other content</div>\n\t   *              </div>\n\t   *           </Draggable>\n\t   *         );\n\t   *       }\n\t   *   });\n\t   * ```\n\t   */\n\t  handle: propTypes.string,\n\n\t  /**\n\t   * `cancel` specifies a selector to be used to prevent drag initialization.\n\t   *\n\t   * Example:\n\t   *\n\t   * ```jsx\n\t   *   let App = React.createClass({\n\t   *       render: function () {\n\t   *           return(\n\t   *               <Draggable cancel=\".cancel\">\n\t   *                   <div>\n\t   *                     <div className=\"cancel\">You can't drag from here</div>\n\t   *                     <div>Dragging here works fine</div>\n\t   *                   </div>\n\t   *               </Draggable>\n\t   *           );\n\t   *       }\n\t   *   });\n\t   * ```\n\t   */\n\t  cancel: propTypes.string,\n\n\t  /**\n\t   * Called when dragging starts.\n\t   * If this function returns the boolean false, dragging will be canceled.\n\t   */\n\t  onStart: propTypes.func,\n\n\t  /**\n\t   * Called while dragging.\n\t   * If this function returns the boolean false, dragging will be canceled.\n\t   */\n\t  onDrag: propTypes.func,\n\n\t  /**\n\t   * Called when dragging stops.\n\t   * If this function returns the boolean false, the drag will remain active.\n\t   */\n\t  onStop: propTypes.func,\n\n\t  /**\n\t   * A workaround option which can be passed if onMouseDown needs to be accessed,\n\t   * since it'll always be blocked (as there is internal use of onMouseDown)\n\t   */\n\t  onMouseDown: propTypes.func,\n\n\t  /**\n\t   * These properties should be defined on the child, not here.\n\t   */\n\t  className: dontSetMe,\n\t  style: dontSetMe,\n\t  transform: dontSetMe\n\t};\n\tDraggableCore.defaultProps = {\n\t  allowAnyClick: false, // by default only accept left click\n\t  cancel: null,\n\t  disabled: false,\n\t  enableUserSelectHack: true,\n\t  offsetParent: null,\n\t  handle: null,\n\t  grid: null,\n\t  transform: null,\n\t  onStart: function onStart() {},\n\t  onDrag: function onDrag() {},\n\t  onStop: function onStop() {},\n\t  onMouseDown: function onMouseDown() {}\n\t};\n\n\t/*:: import type {DraggableEventHandler} from './utils/types';*/\n\t/*:: import type {Element as ReactElement} from 'react';*/\n\t/*:: type DraggableState = {\n\t  dragging: boolean,\n\t  dragged: boolean,\n\t  x: number, y: number,\n\t  slackX: number, slackY: number,\n\t  isElementSVG: boolean\n\t};*/\n\n\n\t//\n\t// Define <Draggable>\n\t//\n\n\t/*:: export type DraggableProps = {\n\t  ...$Exact<DraggableCoreProps>,\n\t  axis: 'both' | 'x' | 'y' | 'none',\n\t  bounds: DraggableBounds | string | false,\n\t  defaultClassName: string,\n\t  defaultClassNameDragging: string,\n\t  defaultClassNameDragged: string,\n\t  defaultPosition: ControlPosition,\n\t  positionOffset: PositionOffsetControlPosition,\n\t  position: ControlPosition,\n\t  scale: number\n\t};*/\n\n\tvar Draggable = function (_React$Component) {\n\t  inherits(Draggable, _React$Component);\n\n\t  function Draggable(props /*: DraggableProps*/) {\n\t    classCallCheck(this, Draggable);\n\n\t    var _this = possibleConstructorReturn(this, (Draggable.__proto__ || Object.getPrototypeOf(Draggable)).call(this, props));\n\n\t    _this.onDragStart = function (e, coreData) {\n\n\t      // Short-circuit if user's callback killed it.\n\t      var shouldStart = _this.props.onStart(e, createDraggableData(_this, coreData));\n\t      // Kills start event on core as well, so move handlers are never bound.\n\t      if (shouldStart === false) return false;\n\n\t      _this.setState({ dragging: true, dragged: true });\n\t    };\n\n\t    _this.onDrag = function (e, coreData) {\n\t      if (!_this.state.dragging) return false;\n\n\t      var uiData = createDraggableData(_this, coreData);\n\n\t      var newState /*: $Shape<DraggableState>*/ = {\n\t        x: uiData.x,\n\t        y: uiData.y\n\t      };\n\n\t      // Keep within bounds.\n\t      if (_this.props.bounds) {\n\t        // Save original x and y.\n\t        var _x = newState.x,\n\t            _y = newState.y;\n\n\t        // Add slack to the values used to calculate bound position. This will ensure that if\n\t        // we start removing slack, the element won't react to it right away until it's been\n\t        // completely removed.\n\n\t        newState.x += _this.state.slackX;\n\t        newState.y += _this.state.slackY;\n\n\t        // Get bound position. This will ceil/floor the x and y within the boundaries.\n\n\t        var _getBoundPosition = getBoundPosition(_this, newState.x, newState.y),\n\t            _getBoundPosition2 = slicedToArray(_getBoundPosition, 2),\n\t            newStateX = _getBoundPosition2[0],\n\t            newStateY = _getBoundPosition2[1];\n\n\t        newState.x = newStateX;\n\t        newState.y = newStateY;\n\n\t        // Recalculate slack by noting how much was shaved by the boundPosition handler.\n\t        newState.slackX = _this.state.slackX + (_x - newState.x);\n\t        newState.slackY = _this.state.slackY + (_y - newState.y);\n\n\t        // Update the event we fire to reflect what really happened after bounds took effect.\n\t        uiData.x = newState.x;\n\t        uiData.y = newState.y;\n\t        uiData.deltaX = newState.x - _this.state.x;\n\t        uiData.deltaY = newState.y - _this.state.y;\n\t      }\n\n\t      // Short-circuit if user's callback killed it.\n\t      var shouldUpdate = _this.props.onDrag(e, uiData);\n\t      if (shouldUpdate === false) return false;\n\n\t      _this.setState(newState);\n\t    };\n\n\t    _this.onDragStop = function (e, coreData) {\n\t      if (!_this.state.dragging) return false;\n\n\t      // Short-circuit if user's callback killed it.\n\t      var shouldStop = _this.props.onStop(e, createDraggableData(_this, coreData));\n\t      if (shouldStop === false) return false;\n\n\t      var newState /*: $Shape<DraggableState>*/ = {\n\t        dragging: false,\n\t        slackX: 0,\n\t        slackY: 0\n\t      };\n\n\t      // If this is a controlled component, the result of this operation will be to\n\t      // revert back to the old position. We expect a handler on `onDragStop`, at the least.\n\t      var controlled = Boolean(_this.props.position);\n\t      if (controlled) {\n\t        var _this$props$position = _this.props.position,\n\t            _x2 = _this$props$position.x,\n\t            _y2 = _this$props$position.y;\n\n\t        newState.x = _x2;\n\t        newState.y = _y2;\n\t      }\n\n\t      _this.setState(newState);\n\t    };\n\n\t    _this.state = {\n\t      // Whether or not we are currently dragging.\n\t      dragging: false,\n\n\t      // Whether or not we have been dragged before.\n\t      dragged: false,\n\n\t      // Current transform x and y.\n\t      x: props.position ? props.position.x : props.defaultPosition.x,\n\t      y: props.position ? props.position.y : props.defaultPosition.y,\n\n\t      // Used for compensating for out-of-bounds drags\n\t      slackX: 0, slackY: 0,\n\n\t      // Can only determine if SVG after mounting\n\t      isElementSVG: false\n\t    };\n\n\t    if (props.position && !(props.onDrag || props.onStop)) {\n\t      // eslint-disable-next-line no-console\n\t      console.warn('A `position` was applied to this <Draggable>, without drag handlers. This will make this ' + 'component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the ' + '`position` of this element.');\n\t    }\n\t    return _this;\n\t  }\n\n\t  createClass(Draggable, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      // Check to see if the element passed is an instanceof SVGElement\n\t      if (typeof window.SVGElement !== 'undefined' && ReactDOM.findDOMNode(this) instanceof window.SVGElement) {\n\t        this.setState({ isElementSVG: true });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'componentWillReceiveProps',\n\t    value: function componentWillReceiveProps(nextProps /*: Object*/) {\n\t      // Set x/y if position has changed\n\t      if (nextProps.position && (!this.props.position || nextProps.position.x !== this.props.position.x || nextProps.position.y !== this.props.position.y)) {\n\t        this.setState({ x: nextProps.position.x, y: nextProps.position.y });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      this.setState({ dragging: false }); // prevents invariant if unmounted while dragging\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() /*: ReactElement<any>*/ {\n\t      var _classNames;\n\n\t      var style = {},\n\t          svgTransform = null;\n\n\t      // If this is controlled, we don't want to move it - unless it's dragging.\n\t      var controlled = Boolean(this.props.position);\n\t      var draggable = !controlled || this.state.dragging;\n\n\t      var position = this.props.position || this.props.defaultPosition;\n\t      var transformOpts = {\n\t        // Set left if horizontal drag is enabled\n\t        x: canDragX(this) && draggable ? this.state.x : position.x,\n\n\t        // Set top if vertical drag is enabled\n\t        y: canDragY(this) && draggable ? this.state.y : position.y\n\t      };\n\n\t      // If this element was SVG, we use the `transform` attribute.\n\t      if (this.state.isElementSVG) {\n\t        svgTransform = createSVGTransform(transformOpts, this.props.positionOffset);\n\t      } else {\n\t        // Add a CSS transform to move the element around. This allows us to move the element around\n\t        // without worrying about whether or not it is relatively or absolutely positioned.\n\t        // If the item you are dragging already has a transform set, wrap it in a <span> so <Draggable>\n\t        // has a clean slate.\n\t        style = createCSSTransform(transformOpts, this.props.positionOffset);\n\t      }\n\n\t      var _props = this.props,\n\t          defaultClassName = _props.defaultClassName,\n\t          defaultClassNameDragging = _props.defaultClassNameDragging,\n\t          defaultClassNameDragged = _props.defaultClassNameDragged;\n\n\n\t      var children = React.Children.only(this.props.children);\n\n\t      // Mark with class while dragging\n\t      var className = classnames(children.props.className || '', defaultClassName, (_classNames = {}, defineProperty(_classNames, defaultClassNameDragging, this.state.dragging), defineProperty(_classNames, defaultClassNameDragged, this.state.dragged), _classNames));\n\n\t      // Reuse the child provided\n\t      // This makes it flexible to use whatever element is wanted (div, ul, etc)\n\t      return React.createElement(\n\t        DraggableCore,\n\t        _extends({}, this.props, { onStart: this.onDragStart, onDrag: this.onDrag, onStop: this.onDragStop }),\n\t        React.cloneElement(children, {\n\t          className: className,\n\t          style: _extends({}, children.props.style, style),\n\t          transform: svgTransform\n\t        })\n\t      );\n\t    }\n\t  }]);\n\t  return Draggable;\n\t}(React.Component);\n\n\tDraggable.displayName = 'Draggable';\n\tDraggable.propTypes = _extends({}, DraggableCore.propTypes, {\n\n\t  /**\n\t   * `axis` determines which axis the draggable can move.\n\t   *\n\t   *  Note that all callbacks will still return data as normal. This only\n\t   *  controls flushing to the DOM.\n\t   *\n\t   * 'both' allows movement horizontally and vertically.\n\t   * 'x' limits movement to horizontal axis.\n\t   * 'y' limits movement to vertical axis.\n\t   * 'none' limits all movement.\n\t   *\n\t   * Defaults to 'both'.\n\t   */\n\t  axis: propTypes.oneOf(['both', 'x', 'y', 'none']),\n\n\t  /**\n\t   * `bounds` determines the range of movement available to the element.\n\t   * Available values are:\n\t   *\n\t   * 'parent' restricts movement within the Draggable's parent node.\n\t   *\n\t   * Alternatively, pass an object with the following properties, all of which are optional:\n\t   *\n\t   * {left: LEFT_BOUND, right: RIGHT_BOUND, bottom: BOTTOM_BOUND, top: TOP_BOUND}\n\t   *\n\t   * All values are in px.\n\t   *\n\t   * Example:\n\t   *\n\t   * ```jsx\n\t   *   let App = React.createClass({\n\t   *       render: function () {\n\t   *         return (\n\t   *            <Draggable bounds={{right: 300, bottom: 300}}>\n\t   *              <div>Content</div>\n\t   *           </Draggable>\n\t   *         );\n\t   *       }\n\t   *   });\n\t   * ```\n\t   */\n\t  bounds: propTypes.oneOfType([propTypes.shape({\n\t    left: propTypes.number,\n\t    right: propTypes.number,\n\t    top: propTypes.number,\n\t    bottom: propTypes.number\n\t  }), propTypes.string, propTypes.oneOf([false])]),\n\n\t  defaultClassName: propTypes.string,\n\t  defaultClassNameDragging: propTypes.string,\n\t  defaultClassNameDragged: propTypes.string,\n\n\t  /**\n\t   * `defaultPosition` specifies the x and y that the dragged item should start at\n\t   *\n\t   * Example:\n\t   *\n\t   * ```jsx\n\t   *      let App = React.createClass({\n\t   *          render: function () {\n\t   *              return (\n\t   *                  <Draggable defaultPosition={{x: 25, y: 25}}>\n\t   *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n\t   *                  </Draggable>\n\t   *              );\n\t   *          }\n\t   *      });\n\t   * ```\n\t   */\n\t  defaultPosition: propTypes.shape({\n\t    x: propTypes.number,\n\t    y: propTypes.number\n\t  }),\n\t  positionOffset: propTypes.shape({\n\t    x: propTypes.oneOfType([propTypes.number, propTypes.string]),\n\t    y: propTypes.oneOfType([propTypes.number, propTypes.string])\n\t  }),\n\n\t  /**\n\t   * `position`, if present, defines the current position of the element.\n\t   *\n\t   *  This is similar to how form elements in React work - if no `position` is supplied, the component\n\t   *  is uncontrolled.\n\t   *\n\t   * Example:\n\t   *\n\t   * ```jsx\n\t   *      let App = React.createClass({\n\t   *          render: function () {\n\t   *              return (\n\t   *                  <Draggable position={{x: 25, y: 25}}>\n\t   *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n\t   *                  </Draggable>\n\t   *              );\n\t   *          }\n\t   *      });\n\t   * ```\n\t   */\n\t  position: propTypes.shape({\n\t    x: propTypes.number,\n\t    y: propTypes.number\n\t  }),\n\n\t  /**\n\t   * These properties should be defined on the child, not here.\n\t   */\n\t  className: dontSetMe,\n\t  style: dontSetMe,\n\t  transform: dontSetMe\n\t});\n\tDraggable.defaultProps = _extends({}, DraggableCore.defaultProps, {\n\t  axis: 'both',\n\t  bounds: false,\n\t  defaultClassName: 'react-draggable',\n\t  defaultClassNameDragging: 'react-draggable-dragging',\n\t  defaultClassNameDragged: 'react-draggable-dragged',\n\t  defaultPosition: { x: 0, y: 0 },\n\t  position: null,\n\t  scale: 1\n\t});\n\n\t// Previous versions of this lib exported <Draggable> as the root export. As to not break\n\t// them, or TypeScript, we export *both* as the root and as 'default'.\n\t// See https://github.com/mzabriskie/react-draggable/pull/254\n\t// and https://github.com/mzabriskie/react-draggable/issues/266\n\tDraggable.default = Draggable;\n\tDraggable.DraggableCore = DraggableCore;\n\n\treturn Draggable;\n\n})));\n//# sourceMappingURL=react-draggable.js.map\n","import React, { PureComponent, ReactNode } from 'react';\r\nimport ClipboardJS from 'clipboard';\r\n\r\ninterface Props {\r\n  text: () => string;\r\n  elType?: string;\r\n  onSuccess?: (evt: any) => void;\r\n  onError?: (evt: any) => void;\r\n  className?: string;\r\n  children?: ReactNode;\r\n}\r\n\r\nexport class CopyToClipboard extends PureComponent<Props> {\r\n  clipboardjs?: ClipboardJS;\r\n  myRef: any;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.myRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { text, onSuccess, onError } = this.props;\r\n\r\n    this.clipboardjs = new ClipboardJS(this.myRef.current, {\r\n      text: text,\r\n    });\r\n\r\n    if (onSuccess) {\r\n      this.clipboardjs.on('success', evt => {\r\n        evt.clearSelection();\r\n        onSuccess(evt);\r\n      });\r\n    }\r\n\r\n    if (onError) {\r\n      this.clipboardjs.on('error', evt => {\r\n        console.error('Action:', evt.action);\r\n        console.error('Trigger:', evt.trigger);\r\n        onError(evt);\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.clipboardjs) {\r\n      this.clipboardjs.destroy();\r\n    }\r\n  }\r\n\r\n  getElementType = () => {\r\n    return this.props.elType || 'button';\r\n  };\r\n\r\n  render() {\r\n    const { elType, text, children, onError, onSuccess, ...restProps } = this.props;\r\n\r\n    return React.createElement(\r\n      this.getElementType(),\r\n      {\r\n        ref: this.myRef,\r\n        ...restProps,\r\n      },\r\n      this.props.children\r\n    );\r\n  }\r\n}\r\n","import React, { forwardRef } from 'react';\r\nimport { escapeStringForRegex, unEscapeStringFromRegex } from '@grafana/data';\r\n\r\nexport interface Props {\r\n  value: string | undefined;\r\n  placeholder?: string;\r\n  labelClassName?: string;\r\n  inputClassName?: string;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\nexport const FilterInput = forwardRef<HTMLInputElement, Props>((props, ref) => (\r\n  <label className={props.labelClassName}>\r\n    <input\r\n      ref={ref}\r\n      type=\"text\"\r\n      className={props.inputClassName}\r\n      value={unEscapeStringFromRegex(props.value)}\r\n      onChange={event => props.onChange(escapeStringForRegex(event.target.value))}\r\n      placeholder={props.placeholder ? props.placeholder : null}\r\n    />\r\n    <i className=\"gf-form-input-icon fa fa-search\" />\r\n  </label>\r\n));\r\n","import React, { PureComponent } from 'react';\r\nimport { renderMarkdown } from '@grafana/data';\r\nimport { getBackendSrv } from '@grafana/runtime';\r\n\r\ninterface Props {\r\n  plugin: {\r\n    name: string;\r\n    id: string;\r\n  };\r\n  type: string;\r\n}\r\n\r\ninterface State {\r\n  isError: boolean;\r\n  isLoading: boolean;\r\n  help: string;\r\n}\r\n\r\nexport class PluginHelp extends PureComponent<Props, State> {\r\n  state = {\r\n    isError: false,\r\n    isLoading: false,\r\n    help: '',\r\n  };\r\n\r\n  componentDidMount(): void {\r\n    this.loadHelp();\r\n  }\r\n\r\n  constructPlaceholderInfo() {\r\n    return 'No plugin help or readme markdown file was found';\r\n  }\r\n\r\n  loadHelp = () => {\r\n    const { plugin, type } = this.props;\r\n    this.setState({ isLoading: true });\r\n\r\n    getBackendSrv()\r\n      .get(`/api/plugins/${plugin.id}/markdown/${type}`)\r\n      .then((response: string) => {\r\n        const helpHtml = renderMarkdown(response);\r\n\r\n        if (response === '' && type === 'help') {\r\n          this.setState({\r\n            isError: false,\r\n            isLoading: false,\r\n            help: this.constructPlaceholderInfo(),\r\n          });\r\n        } else {\r\n          this.setState({\r\n            isError: false,\r\n            isLoading: false,\r\n            help: helpHtml,\r\n          });\r\n        }\r\n      })\r\n      .catch(() => {\r\n        this.setState({\r\n          isError: true,\r\n          isLoading: false,\r\n        });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { type } = this.props;\r\n    const { isError, isLoading, help } = this.state;\r\n\r\n    if (isLoading) {\r\n      return <h2>Loading help...</h2>;\r\n    }\r\n\r\n    if (isError) {\r\n      return <h3>'Error occurred when loading help'</h3>;\r\n    }\r\n\r\n    if (type === 'panel_help' && help === '') {\r\n    }\r\n\r\n    return <div className=\"markdown-html\" dangerouslySetInnerHTML={{ __html: help }} />;\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport { connect } from 'react-redux';\r\nimport { css } from 'emotion';\r\nimport { Alert, Button } from '@grafana/ui';\r\n\r\nimport { AngularComponent, getAngularLoader, getDataSourceSrv } from '@grafana/runtime';\r\nimport appEvents from 'app/core/app_events';\r\nimport { getAlertingValidationMessage } from './getAlertingValidationMessage';\r\n\r\nimport { EditorTabBody, EditorToolbarView } from '../dashboard/panel_editor/EditorTabBody';\r\nimport EmptyListCTA from 'app/core/components/EmptyListCTA/EmptyListCTA';\r\nimport StateHistory from './StateHistory';\r\nimport 'app/features/alerting/AlertTabCtrl';\r\n\r\nimport { DashboardModel } from '../dashboard/state/DashboardModel';\r\nimport { PanelModel } from '../dashboard/state/PanelModel';\r\nimport { TestRuleResult } from './TestRuleResult';\r\nimport { AppNotificationSeverity, StoreState } from 'app/types';\r\nimport { PanelEditorTabIds, getPanelEditorTab } from '../dashboard/panel_editor/state/reducers';\r\nimport { changePanelEditorTab } from '../dashboard/panel_editor/state/actions';\r\nimport { CoreEvents } from 'app/types';\r\n\r\ninterface Props {\r\n  angularPanel?: AngularComponent;\r\n  dashboard: DashboardModel;\r\n  panel: PanelModel;\r\n  changePanelEditorTab: typeof changePanelEditorTab;\r\n}\r\n\r\ninterface State {\r\n  validatonMessage: string;\r\n}\r\n\r\nclass UnConnectedAlertTab extends PureComponent<Props, State> {\r\n  element: any;\r\n  component: AngularComponent;\r\n  panelCtrl: any;\r\n\r\n  state: State = {\r\n    validatonMessage: '',\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.shouldLoadAlertTab()) {\r\n      this.loadAlertTab();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    if (this.shouldLoadAlertTab()) {\r\n      this.loadAlertTab();\r\n    }\r\n  }\r\n\r\n  shouldLoadAlertTab() {\r\n    return this.props.angularPanel && this.element && !this.component;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.component) {\r\n      this.component.destroy();\r\n    }\r\n  }\r\n\r\n  async loadAlertTab() {\r\n    const { angularPanel, panel } = this.props;\r\n\r\n    const scope = angularPanel.getScope();\r\n\r\n    // When full page reloading in edit mode the angular panel has on fully compiled & instantiated yet\r\n    if (!scope.$$childHead) {\r\n      setTimeout(() => {\r\n        this.forceUpdate();\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.panelCtrl = scope.$$childHead.ctrl;\r\n    const loader = getAngularLoader();\r\n    const template = '<alert-tab />';\r\n\r\n    const scopeProps = { ctrl: this.panelCtrl };\r\n\r\n    this.component = loader.load(this.element, scopeProps, template);\r\n\r\n    const validatonMessage = await getAlertingValidationMessage(\r\n      panel.transformations,\r\n      panel.targets,\r\n      getDataSourceSrv(),\r\n      panel.datasource\r\n    );\r\n\r\n    if (validatonMessage) {\r\n      this.setState({ validatonMessage });\r\n    }\r\n  }\r\n\r\n  stateHistory = (): EditorToolbarView => {\r\n    return {\r\n      title: 'State history',\r\n      render: () => {\r\n        return (\r\n          <StateHistory\r\n            dashboard={this.props.dashboard}\r\n            panelId={this.props.panel.id}\r\n            onRefresh={this.panelCtrl.refresh}\r\n          />\r\n        );\r\n      },\r\n    };\r\n  };\r\n\r\n  deleteAlert = (): EditorToolbarView => {\r\n    const { panel } = this.props;\r\n    return {\r\n      title: 'Delete',\r\n      btnType: 'danger',\r\n      onClick: () => {\r\n        appEvents.emit(CoreEvents.showConfirmModal, {\r\n          title: 'Delete Alert',\r\n          text: 'Are you sure you want to delete this alert rule?',\r\n          text2: 'You need to save dashboard for the delete to take effect',\r\n          icon: 'fa-trash',\r\n          yesText: 'Delete',\r\n          onConfirm: () => {\r\n            delete panel.alert;\r\n            panel.thresholds = [];\r\n            this.panelCtrl.alertState = null;\r\n            this.panelCtrl.render();\r\n            this.forceUpdate();\r\n          },\r\n        });\r\n      },\r\n    };\r\n  };\r\n\r\n  renderTestRuleResult = () => {\r\n    const { panel, dashboard } = this.props;\r\n    return <TestRuleResult panelId={panel.id} dashboard={dashboard} />;\r\n  };\r\n\r\n  testRule = (): EditorToolbarView => ({\r\n    title: 'Test Rule',\r\n    render: () => this.renderTestRuleResult(),\r\n  });\r\n\r\n  onAddAlert = () => {\r\n    this.panelCtrl._enableAlert();\r\n    this.component.digest();\r\n    this.forceUpdate();\r\n  };\r\n\r\n  switchToQueryTab = () => {\r\n    const { changePanelEditorTab } = this.props;\r\n    changePanelEditorTab(getPanelEditorTab(PanelEditorTabIds.Queries));\r\n  };\r\n\r\n  renderValidationMessage = () => {\r\n    const { validatonMessage } = this.state;\r\n\r\n    return (\r\n      <div\r\n        className={css`\r\n          width: 508px;\r\n          margin: 128px auto;\r\n        `}\r\n      >\r\n        <h2>{validatonMessage}</h2>\r\n        <br />\r\n        <div className=\"gf-form-group\">\r\n          <Button size={'md'} variant={'secondary'} icon=\"fa fa-arrow-left\" onClick={this.switchToQueryTab}>\r\n            Go back to Queries\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { alert, transformations } = this.props.panel;\r\n    const { validatonMessage } = this.state;\r\n    const hasTransformations = transformations && transformations.length > 0;\r\n\r\n    if (!alert && validatonMessage) {\r\n      return this.renderValidationMessage();\r\n    }\r\n\r\n    const toolbarItems = alert ? [this.stateHistory(), this.testRule(), this.deleteAlert()] : [];\r\n\r\n    const model = {\r\n      title: 'Panel has no alert rule defined',\r\n      buttonIcon: 'gicon gicon-alert',\r\n      onClick: this.onAddAlert,\r\n      buttonTitle: 'Create Alert',\r\n    };\r\n\r\n    return (\r\n      <EditorTabBody heading=\"Alert\" toolbarItems={toolbarItems}>\r\n        <>\r\n          {alert && hasTransformations && (\r\n            <Alert\r\n              severity={AppNotificationSeverity.Error}\r\n              title=\"Transformations are not supported in alert queries\"\r\n            />\r\n          )}\r\n\r\n          <div ref={element => (this.element = element)} />\r\n          {!alert && !validatonMessage && <EmptyListCTA {...model} />}\r\n        </>\r\n      </EditorTabBody>\r\n    );\r\n  }\r\n}\r\n\r\nexport const mapStateToProps = (state: StoreState) => ({});\r\n\r\nconst mapDispatchToProps = { changePanelEditorTab };\r\n\r\nexport const AlertTab = hot(module)(connect(mapStateToProps, mapDispatchToProps)(UnConnectedAlertTab));\r\n","import React, { PureComponent } from 'react';\r\nimport alertDef from './state/alertDef';\r\nimport { getBackendSrv } from '@grafana/runtime';\r\nimport { DashboardModel } from '../dashboard/state/DashboardModel';\r\nimport appEvents from '../../core/app_events';\r\nimport { CoreEvents } from 'app/types';\r\n\r\ninterface Props {\r\n  dashboard: DashboardModel;\r\n  panelId: number;\r\n  onRefresh: () => void;\r\n}\r\n\r\ninterface State {\r\n  stateHistoryItems: any[];\r\n}\r\n\r\nclass StateHistory extends PureComponent<Props, State> {\r\n  state: State = {\r\n    stateHistoryItems: [],\r\n  };\r\n\r\n  componentDidMount(): void {\r\n    const { dashboard, panelId } = this.props;\r\n\r\n    getBackendSrv()\r\n      .get(`/api/annotations?dashboardId=${dashboard.id}&panelId=${panelId}&limit=50&type=alert`)\r\n      .then((res: any[]) => {\r\n        const items = res.map((item: any) => {\r\n          return {\r\n            stateModel: alertDef.getStateDisplayModel(item.newState),\r\n            time: dashboard.formatDate(item.time, 'MMM D, YYYY HH:mm:ss'),\r\n            info: alertDef.getAlertAnnotationInfo(item),\r\n          };\r\n        });\r\n\r\n        this.setState({\r\n          stateHistoryItems: items,\r\n        });\r\n      });\r\n  }\r\n\r\n  clearHistory = () => {\r\n    const { dashboard, onRefresh, panelId } = this.props;\r\n\r\n    appEvents.emit(CoreEvents.showConfirmModal, {\r\n      title: 'Delete Alert History',\r\n      text: 'Are you sure you want to remove all history & annotations for this alert?',\r\n      icon: 'fa-trash',\r\n      yesText: 'Yes',\r\n      onConfirm: () => {\r\n        getBackendSrv()\r\n          .post('/api/annotations/mass-delete', {\r\n            dashboardId: dashboard.id,\r\n            panelId: panelId,\r\n          })\r\n          .then(() => {\r\n            this.setState({\r\n              stateHistoryItems: [],\r\n            });\r\n            onRefresh();\r\n          });\r\n      },\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { stateHistoryItems } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        {stateHistoryItems.length > 0 && (\r\n          <div className=\"p-b-1\">\r\n            <span className=\"muted\">Last 50 state changes</span>\r\n            <button className=\"btn btn-small btn-danger pull-right\" onClick={this.clearHistory}>\r\n              <i className=\"fa fa-trash\" /> {` Clear history`}\r\n            </button>\r\n          </div>\r\n        )}\r\n        <ol className=\"alert-rule-list\">\r\n          {stateHistoryItems.length > 0 ? (\r\n            stateHistoryItems.map((item, index) => {\r\n              return (\r\n                <li className=\"alert-rule-item\" key={`${item.time}-${index}`}>\r\n                  <div className={`alert-rule-item__icon ${item.stateModel.stateClass}`}>\r\n                    <i className={item.stateModel.iconClass} />\r\n                  </div>\r\n                  <div className=\"alert-rule-item__body\">\r\n                    <div className=\"alert-rule-item__header\">\r\n                      <p className=\"alert-rule-item__name\">{item.alertName}</p>\r\n                      <div className=\"alert-rule-item__text\">\r\n                        <span className={`${item.stateModel.stateClass}`}>{item.stateModel.text}</span>\r\n                      </div>\r\n                    </div>\r\n                    {item.info}\r\n                  </div>\r\n                  <div className=\"alert-rule-item__time\">{item.time}</div>\r\n                </li>\r\n              );\r\n            })\r\n          ) : (\r\n            <i>No state changes recorded</i>\r\n          )}\r\n        </ol>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StateHistory;\r\n","import React, { PureComponent } from 'react';\r\nimport { LoadingPlaceholder, JSONFormatter } from '@grafana/ui';\r\n\r\nimport appEvents from 'app/core/app_events';\r\nimport { CopyToClipboard } from 'app/core/components/CopyToClipboard/CopyToClipboard';\r\nimport { DashboardModel } from '../dashboard/state/DashboardModel';\r\nimport { getBackendSrv, BackendSrv } from '@grafana/runtime';\r\nimport { AppEvents } from '@grafana/data';\r\n\r\nexport interface Props {\r\n  panelId: number;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\ninterface State {\r\n  isLoading: boolean;\r\n  allNodesExpanded: boolean;\r\n  testRuleResponse: {};\r\n}\r\n\r\nexport class TestRuleResult extends PureComponent<Props, State> {\r\n  readonly state: State = {\r\n    isLoading: false,\r\n    allNodesExpanded: null,\r\n    testRuleResponse: {},\r\n  };\r\n\r\n  formattedJson: any;\r\n  clipboard: any;\r\n  backendSrv: BackendSrv = null;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.backendSrv = getBackendSrv();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.testRule();\r\n  }\r\n\r\n  async testRule() {\r\n    const { panelId, dashboard } = this.props;\r\n    const payload = { dashboard: dashboard.getSaveModelClone(), panelId };\r\n\r\n    this.setState({ isLoading: true });\r\n    const testRuleResponse = await this.backendSrv.post(`/api/alerts/test`, payload);\r\n    this.setState({ isLoading: false, testRuleResponse });\r\n  }\r\n\r\n  setFormattedJson = (formattedJson: any) => {\r\n    this.formattedJson = formattedJson;\r\n  };\r\n\r\n  getTextForClipboard = () => {\r\n    return JSON.stringify(this.formattedJson, null, 2);\r\n  };\r\n\r\n  onClipboardSuccess = () => {\r\n    appEvents.emit(AppEvents.alertSuccess, ['Content copied to clipboard']);\r\n  };\r\n\r\n  onToggleExpand = () => {\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      allNodesExpanded: !this.state.allNodesExpanded,\r\n    }));\r\n  };\r\n\r\n  getNrOfOpenNodes = () => {\r\n    if (this.state.allNodesExpanded === null) {\r\n      return 3; // 3 is default, ie when state is null\r\n    } else if (this.state.allNodesExpanded) {\r\n      return 20;\r\n    }\r\n    return 1;\r\n  };\r\n\r\n  renderExpandCollapse = () => {\r\n    const { allNodesExpanded } = this.state;\r\n\r\n    const collapse = (\r\n      <>\r\n        <i className=\"fa fa-minus-square-o\" /> Collapse All\r\n      </>\r\n    );\r\n    const expand = (\r\n      <>\r\n        <i className=\"fa fa-plus-square-o\" /> Expand All\r\n      </>\r\n    );\r\n    return allNodesExpanded ? collapse : expand;\r\n  };\r\n\r\n  render() {\r\n    const { testRuleResponse, isLoading } = this.state;\r\n\r\n    if (isLoading === true) {\r\n      return <LoadingPlaceholder text=\"Evaluating rule\" />;\r\n    }\r\n\r\n    const openNodes = this.getNrOfOpenNodes();\r\n\r\n    return (\r\n      <>\r\n        <div className=\"pull-right\">\r\n          <button className=\"btn btn-transparent btn-p-x-0 m-r-1\" onClick={this.onToggleExpand}>\r\n            {this.renderExpandCollapse()}\r\n          </button>\r\n          <CopyToClipboard\r\n            className=\"btn btn-transparent btn-p-x-0\"\r\n            text={this.getTextForClipboard}\r\n            onSuccess={this.onClipboardSuccess}\r\n          >\r\n            <i className=\"fa fa-clipboard\" /> Copy to Clipboard\r\n          </CopyToClipboard>\r\n        </div>\r\n\r\n        <JSONFormatter json={testRuleResponse} open={openNodes} onDidRender={this.setFormattedJson} />\r\n      </>\r\n    );\r\n  }\r\n}\r\n","// Libraries\r\nimport React from 'react';\r\nimport _ from 'lodash';\r\nimport { LocationUpdate } from '@grafana/runtime';\r\nimport { e2e } from '@grafana/e2e';\r\n// Utils\r\nimport config from 'app/core/config';\r\nimport store from 'app/core/store';\r\n// Store\r\nimport { store as reduxStore } from 'app/store/store';\r\nimport { updateLocation } from 'app/core/actions';\r\n// Types\r\nimport { DashboardModel, PanelModel } from '../../state';\r\nimport { LS_PANEL_COPY_KEY } from 'app/core/constants';\r\n\r\nexport type PanelPluginInfo = { id: any; defaults: { gridPos: { w: any; h: any }; title: any } };\r\n\r\nexport interface Props {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\nexport interface State {\r\n  copiedPanelPlugins: any[];\r\n}\r\n\r\nexport class AddPanelWidget extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.handleCloseAddPanel = this.handleCloseAddPanel.bind(this);\r\n\r\n    this.state = {\r\n      copiedPanelPlugins: this.getCopiedPanelPlugins(),\r\n    };\r\n  }\r\n\r\n  getCopiedPanelPlugins() {\r\n    const panels = _.chain(config.panels)\r\n      .filter({ hideFromList: false })\r\n      .map(item => item)\r\n      .value();\r\n    const copiedPanels = [];\r\n\r\n    const copiedPanelJson = store.get(LS_PANEL_COPY_KEY);\r\n    if (copiedPanelJson) {\r\n      const copiedPanel = JSON.parse(copiedPanelJson);\r\n      const pluginInfo: any = _.find(panels, { id: copiedPanel.type });\r\n      if (pluginInfo) {\r\n        const pluginCopy = _.cloneDeep(pluginInfo);\r\n        pluginCopy.name = copiedPanel.title;\r\n        pluginCopy.sort = -1;\r\n        pluginCopy.defaults = copiedPanel;\r\n        copiedPanels.push(pluginCopy);\r\n      }\r\n    }\r\n\r\n    return _.sortBy(copiedPanels, 'sort');\r\n  }\r\n\r\n  handleCloseAddPanel(evt: any) {\r\n    evt.preventDefault();\r\n    this.props.dashboard.removePanel(this.props.panel);\r\n  }\r\n\r\n  onCreateNewPanel = (tab = 'queries') => {\r\n    const dashboard = this.props.dashboard;\r\n    const { gridPos } = this.props.panel;\r\n\r\n    const newPanel: any = {\r\n      type: 'graph',\r\n      title: 'Panel Title',\r\n      gridPos: { x: gridPos.x, y: gridPos.y, w: gridPos.w, h: gridPos.h },\r\n    };\r\n\r\n    dashboard.addPanel(newPanel);\r\n    dashboard.removePanel(this.props.panel);\r\n\r\n    const location: LocationUpdate = {\r\n      query: {\r\n        panelId: newPanel.id,\r\n        edit: true,\r\n        fullscreen: true,\r\n      },\r\n      partial: true,\r\n    };\r\n\r\n    if (tab === 'visualization') {\r\n      location.query.tab = 'visualization';\r\n      location.query.openVizPicker = true;\r\n    }\r\n\r\n    reduxStore.dispatch(updateLocation(location));\r\n  };\r\n\r\n  onPasteCopiedPanel = (panelPluginInfo: PanelPluginInfo) => {\r\n    const dashboard = this.props.dashboard;\r\n    const { gridPos } = this.props.panel;\r\n\r\n    const newPanel: any = {\r\n      type: panelPluginInfo.id,\r\n      title: 'Panel Title',\r\n      gridPos: {\r\n        x: gridPos.x,\r\n        y: gridPos.y,\r\n        w: panelPluginInfo.defaults.gridPos.w,\r\n        h: panelPluginInfo.defaults.gridPos.h,\r\n      },\r\n    };\r\n\r\n    // apply panel template / defaults\r\n    if (panelPluginInfo.defaults) {\r\n      _.defaults(newPanel, panelPluginInfo.defaults);\r\n      newPanel.title = panelPluginInfo.defaults.title;\r\n      store.delete(LS_PANEL_COPY_KEY);\r\n    }\r\n\r\n    dashboard.addPanel(newPanel);\r\n    dashboard.removePanel(this.props.panel);\r\n  };\r\n\r\n  onCreateNewRow = () => {\r\n    const dashboard = this.props.dashboard;\r\n\r\n    const newRow: any = {\r\n      type: 'row',\r\n      title: 'Row title',\r\n      gridPos: { x: 0, y: 0 },\r\n    };\r\n\r\n    dashboard.addPanel(newRow);\r\n    dashboard.removePanel(this.props.panel);\r\n  };\r\n\r\n  renderOptionLink = (icon: string, text: string, onClick: any) => {\r\n    return (\r\n      <div>\r\n        <a\r\n          href=\"#\"\r\n          onClick={onClick}\r\n          className=\"add-panel-widget__link btn btn-inverse\"\r\n          aria-label={e2e.pages.AddDashboard.selectors.ctaButtons(text)}\r\n        >\r\n          <div className=\"add-panel-widget__icon\">\r\n            <i className={`gicon gicon-${icon}`} />\r\n          </div>\r\n          <span>{text}</span>\r\n        </a>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { copiedPanelPlugins } = this.state;\r\n\r\n    return (\r\n      <div className=\"panel-container add-panel-widget-container\">\r\n        <div className=\"add-panel-widget\">\r\n          <div className=\"add-panel-widget__header grid-drag-handle\">\r\n            <i className=\"gicon gicon-add-panel\" />\r\n            <span className=\"add-panel-widget__title\">New Panel</span>\r\n            <button className=\"add-panel-widget__close\" onClick={this.handleCloseAddPanel}>\r\n              <i className=\"fa fa-close\" />\r\n            </button>\r\n          </div>\r\n          <div className=\"add-panel-widget__btn-container\">\r\n            <div className=\"add-panel-widget__create\">\r\n              {this.renderOptionLink('queries', 'Add Query', this.onCreateNewPanel)}\r\n              {this.renderOptionLink('visualization', 'Choose Visualization', () =>\r\n                this.onCreateNewPanel('visualization')\r\n              )}\r\n            </div>\r\n            <div className=\"add-panel-widget__actions\">\r\n              <button className=\"btn btn-inverse add-panel-widget__action\" onClick={this.onCreateNewRow}>\r\n                Convert to row\r\n              </button>\r\n              {copiedPanelPlugins.length === 1 && (\r\n                <button\r\n                  className=\"btn btn-inverse add-panel-widget__action\"\r\n                  onClick={() => this.onPasteCopiedPanel(copiedPanelPlugins[0])}\r\n                >\r\n                  Paste copied panel\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export { AddPanelWidget } from './AddPanelWidget';\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { PanelModel } from '../../state/PanelModel';\r\nimport { DashboardModel } from '../../state/DashboardModel';\r\nimport templateSrv from 'app/features/templating/template_srv';\r\nimport appEvents from 'app/core/app_events';\r\nimport { CoreEvents } from 'app/types';\r\n\r\nexport interface DashboardRowProps {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\nexport class DashboardRow extends React.Component<DashboardRowProps, any> {\r\n  constructor(props: DashboardRowProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      collapsed: this.props.panel.collapsed,\r\n    };\r\n\r\n    this.props.dashboard.on(CoreEvents.templateVariableValueUpdated, this.onVariableUpdated);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.dashboard.off(CoreEvents.templateVariableValueUpdated, this.onVariableUpdated);\r\n  }\r\n\r\n  onVariableUpdated = () => {\r\n    this.forceUpdate();\r\n  };\r\n\r\n  onToggle = () => {\r\n    this.props.dashboard.toggleRow(this.props.panel);\r\n\r\n    this.setState((prevState: any) => {\r\n      return { collapsed: !prevState.collapsed };\r\n    });\r\n  };\r\n\r\n  onUpdate = () => {\r\n    this.props.dashboard.processRepeats();\r\n    this.forceUpdate();\r\n  };\r\n\r\n  onOpenSettings = () => {\r\n    appEvents.emit(CoreEvents.showModal, {\r\n      templateHtml: `<row-options row=\"model.row\" on-updated=\"model.onUpdated()\" dismiss=\"dismiss()\"></row-options>`,\r\n      modalClass: 'modal--narrow',\r\n      model: {\r\n        row: this.props.panel,\r\n        onUpdated: this.onUpdate,\r\n      },\r\n    });\r\n  };\r\n\r\n  onDelete = () => {\r\n    appEvents.emit(CoreEvents.showConfirmModal, {\r\n      title: 'Delete Row',\r\n      text: 'Are you sure you want to remove this row and all its panels?',\r\n      altActionText: 'Delete row only',\r\n      icon: 'fa-trash',\r\n      onConfirm: () => {\r\n        this.props.dashboard.removeRow(this.props.panel, true);\r\n      },\r\n      onAltAction: () => {\r\n        this.props.dashboard.removeRow(this.props.panel, false);\r\n      },\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const classes = classNames({\r\n      'dashboard-row': true,\r\n      'dashboard-row--collapsed': this.state.collapsed,\r\n    });\r\n    const chevronClass = classNames({\r\n      fa: true,\r\n      'fa-chevron-down': !this.state.collapsed,\r\n      'fa-chevron-right': this.state.collapsed,\r\n    });\r\n\r\n    const title = templateSrv.replaceWithText(this.props.panel.title, this.props.panel.scopedVars);\r\n    const count = this.props.panel.panels ? this.props.panel.panels.length : 0;\r\n    const panels = count === 1 ? 'panel' : 'panels';\r\n    const canEdit = this.props.dashboard.meta.canEdit === true;\r\n\r\n    return (\r\n      <div className={classes}>\r\n        <a className=\"dashboard-row__title pointer\" onClick={this.onToggle}>\r\n          <i className={chevronClass} />\r\n          {title}\r\n          <span className=\"dashboard-row__panel_count\">\r\n            ({count} {panels})\r\n          </span>\r\n        </a>\r\n        {canEdit && (\r\n          <div className=\"dashboard-row__actions\">\r\n            <a className=\"pointer\" onClick={this.onOpenSettings}>\r\n              <i className=\"gicon gicon-cog\" />\r\n            </a>\r\n            <a className=\"pointer\" onClick={this.onDelete}>\r\n              <i className=\"fa fa-trash\" />\r\n            </a>\r\n          </div>\r\n        )}\r\n        {this.state.collapsed === true && (\r\n          <div className=\"dashboard-row__toggle-target\" onClick={this.onToggle}>\r\n            &nbsp;\r\n          </div>\r\n        )}\r\n        {canEdit && <div className=\"dashboard-row__drag grid-drag-handle\" />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export { DashboardRow } from './DashboardRow';\n","// Libraries\r\nimport React, { PureComponent } from 'react';\r\nimport classNames from 'classnames';\r\nimport AutoSizer from 'react-virtualized-auto-sizer';\r\n\r\n// Utils & Services\r\nimport { getAngularLoader, AngularComponent } from '@grafana/runtime';\r\nimport { importPanelPlugin } from 'app/features/plugins/plugin_loader';\r\n\r\n// Components\r\nimport { AddPanelWidget } from '../components/AddPanelWidget';\r\nimport { DashboardRow } from '../components/DashboardRow';\r\nimport { PanelChrome } from './PanelChrome';\r\nimport { PanelEditor } from '../panel_editor/PanelEditor';\r\nimport { PanelResizer } from './PanelResizer';\r\n\r\n// Types\r\nimport { PanelModel, DashboardModel } from '../state';\r\nimport { PanelPluginMeta, PanelPlugin } from '@grafana/data';\r\n\r\nexport interface Props {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n  isEditing: boolean;\r\n  isFullscreen: boolean;\r\n  isInView: boolean;\r\n}\r\n\r\nexport interface State {\r\n  plugin: PanelPlugin;\r\n  angularPanel: AngularComponent;\r\n  isLazy: boolean;\r\n}\r\n\r\nexport class DashboardPanel extends PureComponent<Props, State> {\r\n  element: HTMLElement;\r\n  specialPanels: { [key: string]: Function } = {};\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      plugin: null,\r\n      angularPanel: null,\r\n      isLazy: !props.isInView,\r\n    };\r\n\r\n    this.specialPanels['row'] = this.renderRow.bind(this);\r\n    this.specialPanels['add-panel'] = this.renderAddPanel.bind(this);\r\n  }\r\n\r\n  isSpecial(pluginId: string) {\r\n    return this.specialPanels[pluginId];\r\n  }\r\n\r\n  renderRow() {\r\n    return <DashboardRow panel={this.props.panel} dashboard={this.props.dashboard} />;\r\n  }\r\n\r\n  renderAddPanel() {\r\n    return <AddPanelWidget panel={this.props.panel} dashboard={this.props.dashboard} />;\r\n  }\r\n\r\n  onPluginTypeChange = (plugin: PanelPluginMeta) => {\r\n    this.loadPlugin(plugin.id);\r\n  };\r\n\r\n  async loadPlugin(pluginId: string) {\r\n    if (this.isSpecial(pluginId)) {\r\n      return;\r\n    }\r\n\r\n    const { panel } = this.props;\r\n\r\n    // handle plugin loading & changing of plugin type\r\n    if (!this.state.plugin || this.state.plugin.meta.id !== pluginId) {\r\n      const plugin = await importPanelPlugin(pluginId);\r\n\r\n      // unmount angular panel\r\n      this.cleanUpAngularPanel();\r\n\r\n      if (panel.type !== pluginId) {\r\n        panel.changePlugin(plugin);\r\n      } else {\r\n        panel.pluginLoaded(plugin);\r\n      }\r\n\r\n      this.setState({ plugin, angularPanel: null });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadPlugin(this.props.panel.type);\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props, prevState: State) {\r\n    if (this.state.isLazy && this.props.isInView) {\r\n      this.setState({ isLazy: false });\r\n    }\r\n\r\n    if (!this.element || this.state.angularPanel) {\r\n      return;\r\n    }\r\n\r\n    const loader = getAngularLoader();\r\n    const template = '<plugin-component type=\"panel\" class=\"panel-height-helper\"></plugin-component>';\r\n    const scopeProps = { panel: this.props.panel, dashboard: this.props.dashboard };\r\n    const angularPanel = loader.load(this.element, scopeProps, template);\r\n\r\n    this.setState({ angularPanel });\r\n  }\r\n\r\n  cleanUpAngularPanel() {\r\n    if (this.state.angularPanel) {\r\n      this.state.angularPanel.destroy();\r\n      this.element = null;\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.cleanUpAngularPanel();\r\n  }\r\n\r\n  onMouseEnter = () => {\r\n    this.props.dashboard.setPanelFocus(this.props.panel.id);\r\n  };\r\n\r\n  onMouseLeave = () => {\r\n    this.props.dashboard.setPanelFocus(0);\r\n  };\r\n\r\n  renderPanel() {\r\n    const { dashboard, panel, isFullscreen, isInView } = this.props;\r\n    const { plugin } = this.state;\r\n\r\n    if (plugin.angularPanelCtrl) {\r\n      return <div ref={element => (this.element = element)} className=\"panel-height-helper\" />;\r\n    }\r\n\r\n    return (\r\n      <AutoSizer>\r\n        {({ width, height }) => {\r\n          if (width === 0) {\r\n            return null;\r\n          }\r\n\r\n          return (\r\n            <PanelChrome\r\n              plugin={plugin}\r\n              panel={panel}\r\n              dashboard={dashboard}\r\n              isFullscreen={isFullscreen}\r\n              isInView={isInView}\r\n              width={width}\r\n              height={height}\r\n            />\r\n          );\r\n        }}\r\n      </AutoSizer>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { panel, dashboard, isFullscreen, isEditing } = this.props;\r\n    const { plugin, angularPanel, isLazy } = this.state;\r\n\r\n    if (this.isSpecial(panel.type)) {\r\n      return this.specialPanels[panel.type]();\r\n    }\r\n\r\n    // if we have not loaded plugin exports yet, wait\r\n    if (!plugin) {\r\n      return null;\r\n    }\r\n\r\n    // If we are lazy state don't render anything\r\n    if (isLazy) {\r\n      return null;\r\n    }\r\n\r\n    const editorContainerClasses = classNames({\r\n      'panel-editor-container': isEditing,\r\n      'panel-height-helper': !isEditing,\r\n    });\r\n\r\n    const panelWrapperClass = classNames({\r\n      'panel-wrapper': true,\r\n      'panel-wrapper--edit': isEditing,\r\n      'panel-wrapper--view': isFullscreen && !isEditing,\r\n    });\r\n\r\n    return (\r\n      <div className={editorContainerClasses}>\r\n        <PanelResizer\r\n          isEditing={isEditing}\r\n          panel={panel}\r\n          render={styles => (\r\n            <div\r\n              className={panelWrapperClass}\r\n              onMouseEnter={this.onMouseEnter}\r\n              onMouseLeave={this.onMouseLeave}\r\n              style={styles}\r\n            >\r\n              {this.renderPanel()}\r\n            </div>\r\n          )}\r\n        />\r\n        {panel.isEditing && (\r\n          <PanelEditor\r\n            panel={panel}\r\n            plugin={plugin}\r\n            dashboard={dashboard}\r\n            angularPanel={angularPanel}\r\n            onPluginTypeChange={this.onPluginTypeChange}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// Libraries\r\nimport React, { PureComponent } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Unsubscribable } from 'rxjs';\r\n// Components\r\nimport { PanelHeader } from './PanelHeader/PanelHeader';\r\nimport { ErrorBoundary } from '@grafana/ui';\r\n// Utils & Services\r\nimport { getTimeSrv, TimeSrv } from '../services/TimeSrv';\r\nimport { applyPanelTimeOverrides } from 'app/features/dashboard/utils/panel';\r\nimport { profiler } from 'app/core/profiler';\r\nimport { getProcessedDataFrames } from '../state/runRequest';\r\nimport templateSrv from 'app/features/templating/template_srv';\r\nimport config from 'app/core/config';\r\n// Types\r\nimport { DashboardModel, PanelModel } from '../state';\r\nimport { PANEL_BORDER } from 'app/core/constants';\r\nimport {\r\n  LoadingState,\r\n  ScopedVars,\r\n  AbsoluteTimeRange,\r\n  DefaultTimeRange,\r\n  toUtc,\r\n  toDataFrameDTO,\r\n  PanelEvents,\r\n  PanelData,\r\n  PanelPlugin,\r\n} from '@grafana/data';\r\n\r\nconst DEFAULT_PLUGIN_ERROR = 'Error in plugin';\r\n\r\nexport interface Props {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n  plugin: PanelPlugin;\r\n  isFullscreen: boolean;\r\n  isInView: boolean;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nexport interface State {\r\n  isFirstLoad: boolean;\r\n  renderCounter: number;\r\n  errorMessage: string | null;\r\n  refreshWhenInView: boolean;\r\n\r\n  // Current state of all events\r\n  data: PanelData;\r\n}\r\n\r\nexport class PanelChrome extends PureComponent<Props, State> {\r\n  timeSrv: TimeSrv = getTimeSrv();\r\n  querySubscription: Unsubscribable;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      isFirstLoad: true,\r\n      renderCounter: 0,\r\n      errorMessage: null,\r\n      refreshWhenInView: false,\r\n      data: {\r\n        state: LoadingState.NotStarted,\r\n        series: [],\r\n        timeRange: DefaultTimeRange,\r\n      },\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { panel, dashboard } = this.props;\r\n    panel.events.on(PanelEvents.refresh, this.onRefresh);\r\n    panel.events.on(PanelEvents.render, this.onRender);\r\n    dashboard.panelInitialized(this.props.panel);\r\n\r\n    // Move snapshot data into the query response\r\n    if (this.hasPanelSnapshot) {\r\n      this.setState({\r\n        data: {\r\n          ...this.state.data,\r\n          state: LoadingState.Done,\r\n          series: getProcessedDataFrames(panel.snapshotData),\r\n        },\r\n        isFirstLoad: false,\r\n      });\r\n    } else if (!this.wantsQueryExecution) {\r\n      this.setState({ isFirstLoad: false });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.panel.events.off(PanelEvents.refresh, this.onRefresh);\r\n    this.props.panel.events.off(PanelEvents.render, this.onRender);\r\n\r\n    if (this.querySubscription) {\r\n      this.querySubscription.unsubscribe();\r\n      this.querySubscription = null;\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    const { isInView } = this.props;\r\n\r\n    // View state has changed\r\n    if (isInView !== prevProps.isInView) {\r\n      if (isInView) {\r\n        // Check if we need a delayed refresh\r\n        if (this.state.refreshWhenInView) {\r\n          this.onRefresh();\r\n        }\r\n      } else if (this.querySubscription) {\r\n        this.querySubscription.unsubscribe();\r\n        this.querySubscription = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Updates the response with information from the stream\r\n  // The next is outside a react synthetic event so setState is not batched\r\n  // So in this context we can only do a single call to setState\r\n  onDataUpdate(data: PanelData) {\r\n    if (!this.props.isInView) {\r\n      // Ignore events when not visible.\r\n      // The call will be repeated when the panel comes into view\r\n      return;\r\n    }\r\n\r\n    let { isFirstLoad } = this.state;\r\n    let errorMessage: string | null = null;\r\n\r\n    switch (data.state) {\r\n      case LoadingState.Loading:\r\n        // Skip updating state data if it is already in loading state\r\n        // This is to avoid rendering partial loading responses\r\n        if (this.state.data.state === LoadingState.Loading) {\r\n          return;\r\n        }\r\n        break;\r\n      case LoadingState.Error:\r\n        const { error } = data;\r\n        if (error) {\r\n          if (errorMessage !== error.message) {\r\n            errorMessage = error.message;\r\n          }\r\n        }\r\n        break;\r\n      case LoadingState.Done:\r\n        // If we are doing a snapshot save data in panel model\r\n        if (this.props.dashboard.snapshot) {\r\n          this.props.panel.snapshotData = data.series.map(frame => toDataFrameDTO(frame));\r\n        }\r\n        if (isFirstLoad) {\r\n          isFirstLoad = false;\r\n        }\r\n        break;\r\n    }\r\n\r\n    this.setState({ isFirstLoad, errorMessage, data });\r\n  }\r\n\r\n  onRefresh = () => {\r\n    const { panel, isInView, width } = this.props;\r\n\r\n    if (!isInView) {\r\n      console.log('Refresh when panel is visible', panel.id);\r\n      this.setState({ refreshWhenInView: true });\r\n      return;\r\n    }\r\n\r\n    const timeData = applyPanelTimeOverrides(panel, this.timeSrv.timeRange());\r\n\r\n    // Issue Query\r\n    if (this.wantsQueryExecution) {\r\n      if (width < 0) {\r\n        console.log('Refresh skippted, no width yet... wait till we know');\r\n        return;\r\n      }\r\n\r\n      const queryRunner = panel.getQueryRunner();\r\n\r\n      if (!this.querySubscription) {\r\n        this.querySubscription = queryRunner.getData().subscribe({\r\n          next: data => this.onDataUpdate(data),\r\n        });\r\n      }\r\n\r\n      queryRunner.run({\r\n        datasource: panel.datasource,\r\n        queries: panel.targets,\r\n        panelId: panel.id,\r\n        dashboardId: this.props.dashboard.id,\r\n        timezone: this.props.dashboard.getTimezone(),\r\n        timeRange: timeData.timeRange,\r\n        timeInfo: timeData.timeInfo,\r\n        widthPixels: width,\r\n        maxDataPoints: panel.maxDataPoints,\r\n        minInterval: panel.interval,\r\n        scopedVars: panel.scopedVars,\r\n        cacheTimeout: panel.cacheTimeout,\r\n        transformations: panel.transformations,\r\n      });\r\n    }\r\n  };\r\n\r\n  onRender = () => {\r\n    const stateUpdate = { renderCounter: this.state.renderCounter + 1 };\r\n\r\n    this.setState(stateUpdate);\r\n  };\r\n\r\n  onOptionsChange = (options: any) => {\r\n    this.props.panel.updateOptions(options);\r\n  };\r\n\r\n  replaceVariables = (value: string, extraVars?: ScopedVars, format?: string) => {\r\n    let vars = this.props.panel.scopedVars;\r\n    if (extraVars) {\r\n      vars = vars ? { ...vars, ...extraVars } : extraVars;\r\n    }\r\n    return templateSrv.replace(value, vars, format);\r\n  };\r\n\r\n  onPanelError = (message: string) => {\r\n    if (this.state.errorMessage !== message) {\r\n      this.setState({ errorMessage: message });\r\n    }\r\n  };\r\n\r\n  get hasPanelSnapshot() {\r\n    const { panel } = this.props;\r\n    return panel.snapshotData && panel.snapshotData.length;\r\n  }\r\n\r\n  get wantsQueryExecution() {\r\n    return !(this.props.plugin.meta.skipDataQuery || this.hasPanelSnapshot);\r\n  }\r\n\r\n  onChangeTimeRange = (timeRange: AbsoluteTimeRange) => {\r\n    this.timeSrv.setTime({\r\n      from: toUtc(timeRange.from),\r\n      to: toUtc(timeRange.to),\r\n    });\r\n  };\r\n\r\n  renderPanel(width: number, height: number): JSX.Element {\r\n    const { panel, plugin } = this.props;\r\n    const { renderCounter, data, isFirstLoad } = this.state;\r\n    const { theme } = config;\r\n\r\n    // This is only done to increase a counter that is used by backend\r\n    // image rendering (phantomjs/headless chrome) to know when to capture image\r\n    const loading = data.state;\r\n    if (loading === LoadingState.Done) {\r\n      profiler.renderingCompleted();\r\n    }\r\n\r\n    // do not render component until we have first data\r\n    if (isFirstLoad && (loading === LoadingState.Loading || loading === LoadingState.NotStarted)) {\r\n      return this.renderLoadingState();\r\n    }\r\n\r\n    const PanelComponent = plugin.panel;\r\n    const timeRange = data.timeRange || this.timeSrv.timeRange();\r\n\r\n    const headerHeight = this.hasOverlayHeader() ? 0 : theme.panelHeaderHeight;\r\n    const chromePadding = plugin.noPadding ? 0 : theme.panelPadding;\r\n    const panelWidth = width - chromePadding * 2 - PANEL_BORDER;\r\n    const innerPanelHeight = height - headerHeight - chromePadding * 2 - PANEL_BORDER;\r\n\r\n    const panelContentClassNames = classNames({\r\n      'panel-content': true,\r\n      'panel-content--no-padding': plugin.noPadding,\r\n    });\r\n\r\n    return (\r\n      <>\r\n        {loading === LoadingState.Loading && this.renderLoadingState()}\r\n        <div className={panelContentClassNames}>\r\n          <PanelComponent\r\n            id={panel.id}\r\n            data={data}\r\n            timeRange={timeRange}\r\n            timeZone={this.props.dashboard.getTimezone()}\r\n            options={panel.getOptions()}\r\n            transparent={panel.transparent}\r\n            width={panelWidth}\r\n            height={innerPanelHeight}\r\n            renderCounter={renderCounter}\r\n            replaceVariables={this.replaceVariables}\r\n            onOptionsChange={this.onOptionsChange}\r\n            onChangeTimeRange={this.onChangeTimeRange}\r\n          />\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  private renderLoadingState(): JSX.Element {\r\n    return (\r\n      <div className=\"panel-loading\">\r\n        <i className=\"fa fa-spinner fa-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  hasOverlayHeader() {\r\n    const { panel } = this.props;\r\n    const { errorMessage, data } = this.state;\r\n\r\n    // always show normal header if we have an error message\r\n    if (errorMessage) {\r\n      return false;\r\n    }\r\n\r\n    // always show normal header if we have time override\r\n    if (data.request && data.request.timeInfo) {\r\n      return false;\r\n    }\r\n\r\n    return !panel.hasTitle();\r\n  }\r\n\r\n  render() {\r\n    const { dashboard, panel, isFullscreen, width, height } = this.props;\r\n    const { errorMessage, data } = this.state;\r\n    const { transparent } = panel;\r\n\r\n    const containerClassNames = classNames({\r\n      'panel-container': true,\r\n      'panel-container--absolute': true,\r\n      'panel-container--transparent': transparent,\r\n      'panel-container--no-title': this.hasOverlayHeader(),\r\n    });\r\n\r\n    return (\r\n      <div className={containerClassNames}>\r\n        <PanelHeader\r\n          panel={panel}\r\n          dashboard={dashboard}\r\n          timeInfo={data.request ? data.request.timeInfo : null}\r\n          title={panel.title}\r\n          description={panel.description}\r\n          scopedVars={panel.scopedVars}\r\n          links={panel.links}\r\n          error={errorMessage}\r\n          isFullscreen={isFullscreen}\r\n        />\r\n        <ErrorBoundary>\r\n          {({ error, errorInfo }) => {\r\n            if (errorInfo) {\r\n              this.onPanelError(error.message || DEFAULT_PLUGIN_ERROR);\r\n              return null;\r\n            }\r\n            return this.renderPanel(width, height);\r\n          }}\r\n        </ErrorBoundary>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport { isEqual } from 'lodash';\r\nimport { DataLink, ScopedVars } from '@grafana/data';\r\nimport { ClickOutsideWrapper } from '@grafana/ui';\r\nimport { e2e } from '@grafana/e2e';\r\n\r\nimport PanelHeaderCorner from './PanelHeaderCorner';\r\nimport { PanelHeaderMenu } from './PanelHeaderMenu';\r\nimport templateSrv from 'app/features/templating/template_srv';\r\n\r\nimport { DashboardModel } from 'app/features/dashboard/state/DashboardModel';\r\nimport { PanelModel } from 'app/features/dashboard/state/PanelModel';\r\nimport { getPanelLinksSupplier } from 'app/features/panel/panellinks/linkSuppliers';\r\n\r\nexport interface Props {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n  timeInfo: string;\r\n  title?: string;\r\n  description?: string;\r\n  scopedVars?: ScopedVars;\r\n  links?: DataLink[];\r\n  error?: string;\r\n  isFullscreen: boolean;\r\n}\r\n\r\ninterface ClickCoordinates {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\ninterface State {\r\n  panelMenuOpen: boolean;\r\n}\r\n\r\nexport class PanelHeader extends Component<Props, State> {\r\n  clickCoordinates: ClickCoordinates = { x: 0, y: 0 };\r\n  state = {\r\n    panelMenuOpen: false,\r\n    clickCoordinates: { x: 0, y: 0 },\r\n  };\r\n\r\n  eventToClickCoordinates = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    return {\r\n      x: event.clientX,\r\n      y: event.clientY,\r\n    };\r\n  };\r\n\r\n  onMouseDown = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    this.clickCoordinates = this.eventToClickCoordinates(event);\r\n  };\r\n\r\n  isClick = (clickCoordinates: ClickCoordinates) => {\r\n    return isEqual(clickCoordinates, this.clickCoordinates);\r\n  };\r\n\r\n  onMenuToggle = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    if (this.isClick(this.eventToClickCoordinates(event))) {\r\n      event.stopPropagation();\r\n\r\n      this.setState(prevState => ({\r\n        panelMenuOpen: !prevState.panelMenuOpen,\r\n      }));\r\n    }\r\n  };\r\n\r\n  closeMenu = () => {\r\n    this.setState({\r\n      panelMenuOpen: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { panel, dashboard, timeInfo, scopedVars, error, isFullscreen } = this.props;\r\n    const title = templateSrv.replaceWithText(panel.title, scopedVars);\r\n\r\n    const panelHeaderClass = classNames({\r\n      'panel-header': true,\r\n      'grid-drag-handle': !isFullscreen,\r\n    });\r\n\r\n    return (\r\n      <>\r\n        <div className={panelHeaderClass}>\r\n          <PanelHeaderCorner\r\n            panel={panel}\r\n            title={panel.title}\r\n            description={panel.description}\r\n            scopedVars={panel.scopedVars}\r\n            links={getPanelLinksSupplier(panel)}\r\n            error={error}\r\n          />\r\n          <div\r\n            className=\"panel-title-container\"\r\n            onClick={this.onMenuToggle}\r\n            onMouseDown={this.onMouseDown}\r\n            aria-label={e2e.pages.Dashboard.Panels.Panel.selectors.title(title)}\r\n          >\r\n            <div className=\"panel-title\">\r\n              <span className=\"icon-gf panel-alert-icon\" />\r\n              <span className=\"panel-title-text\">\r\n                {title} <span className=\"fa fa-caret-down panel-menu-toggle\" />\r\n              </span>\r\n              {this.state.panelMenuOpen && (\r\n                <ClickOutsideWrapper onClick={this.closeMenu}>\r\n                  <PanelHeaderMenu panel={panel} dashboard={dashboard} />\r\n                </ClickOutsideWrapper>\r\n              )}\r\n              {timeInfo && (\r\n                <span className=\"panel-time-info\">\r\n                  <i className=\"fa fa-clock-o\" /> {timeInfo}\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nimport { renderMarkdown, LinkModelSupplier, ScopedVars } from '@grafana/data';\r\nimport { Tooltip, PopoverContent } from '@grafana/ui';\r\n\r\nimport { PanelModel } from 'app/features/dashboard/state/PanelModel';\r\nimport templateSrv from 'app/features/templating/template_srv';\r\nimport { getTimeSrv, TimeSrv } from 'app/features/dashboard/services/TimeSrv';\r\nimport { getLocationSrv } from '@grafana/runtime';\r\n\r\nenum InfoMode {\r\n  Error = 'Error',\r\n  Info = 'Info',\r\n  Links = 'Links',\r\n}\r\n\r\ninterface Props {\r\n  panel: PanelModel;\r\n  title?: string;\r\n  description?: string;\r\n  scopedVars?: ScopedVars;\r\n  links?: LinkModelSupplier<PanelModel>;\r\n  error?: string;\r\n}\r\n\r\nexport class PanelHeaderCorner extends Component<Props> {\r\n  timeSrv: TimeSrv = getTimeSrv();\r\n\r\n  getInfoMode = () => {\r\n    const { panel, error } = this.props;\r\n    if (error) {\r\n      return InfoMode.Error;\r\n    }\r\n    if (!!panel.description) {\r\n      return InfoMode.Info;\r\n    }\r\n    if (panel.links && panel.links.length) {\r\n      return InfoMode.Links;\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n\r\n  getInfoContent = (): JSX.Element => {\r\n    const { panel } = this.props;\r\n    const markdown = panel.description || '';\r\n    const interpolatedMarkdown = templateSrv.replace(markdown, panel.scopedVars);\r\n    const markedInterpolatedMarkdown = renderMarkdown(interpolatedMarkdown);\r\n    const links = this.props.links && this.props.links.getLinks(panel);\r\n\r\n    return (\r\n      <div className=\"panel-info-content markdown-html\">\r\n        <div dangerouslySetInnerHTML={{ __html: markedInterpolatedMarkdown }} />\r\n\r\n        {links && links.length > 0 && (\r\n          <ul className=\"panel-info-corner-links\">\r\n            {links.map((link, idx) => {\r\n              return (\r\n                <li key={idx}>\r\n                  <a className=\"panel-info-corner-links__item\" href={link.href} target={link.target}>\r\n                    {link.title}\r\n                  </a>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Open the Panel Inspector when we click on an error\r\n   */\r\n  onClickError = () => {\r\n    getLocationSrv().update({ partial: true, query: { inspect: this.props.panel.id } });\r\n  };\r\n\r\n  renderCornerType(infoMode: InfoMode, content: PopoverContent, onClick?: () => void) {\r\n    const theme = infoMode === InfoMode.Error ? 'error' : 'info';\r\n    return (\r\n      <Tooltip content={content} placement=\"top-start\" theme={theme}>\r\n        <div className={`panel-info-corner panel-info-corner--${infoMode.toLowerCase()}`} onClick={onClick}>\r\n          <i className=\"fa\" />\r\n          <span className=\"panel-info-corner-inner\" />\r\n        </div>\r\n      </Tooltip>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const infoMode: InfoMode | undefined = this.getInfoMode();\r\n\r\n    if (!infoMode) {\r\n      return null;\r\n    }\r\n\r\n    if (infoMode === InfoMode.Error) {\r\n      return this.renderCornerType(infoMode, this.props.error, this.onClickError);\r\n    }\r\n\r\n    if (infoMode === InfoMode.Info || infoMode === InfoMode.Links) {\r\n      return this.renderCornerType(infoMode, this.getInfoContent);\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default PanelHeaderCorner;\r\n","import React, { PureComponent } from 'react';\r\nimport { DashboardModel } from 'app/features/dashboard/state/DashboardModel';\r\nimport { PanelModel } from 'app/features/dashboard/state/PanelModel';\r\nimport { PanelHeaderMenuItem } from './PanelHeaderMenuItem';\r\nimport { getPanelMenu } from 'app/features/dashboard/utils/getPanelMenu';\r\nimport { PanelMenuItem } from '@grafana/data';\r\n\r\nexport interface Props {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\nexport class PanelHeaderMenu extends PureComponent<Props> {\r\n  renderItems = (menu: PanelMenuItem[], isSubMenu = false) => {\r\n    return (\r\n      <ul className=\"dropdown-menu dropdown-menu--menu panel-menu\" role={isSubMenu ? '' : 'menu'}>\r\n        {menu.map((menuItem, idx: number) => {\r\n          return (\r\n            <PanelHeaderMenuItem\r\n              key={`${menuItem.text}${idx}`}\r\n              type={menuItem.type}\r\n              text={menuItem.text}\r\n              iconClassName={menuItem.iconClassName}\r\n              onClick={menuItem.onClick}\r\n              shortcut={menuItem.shortcut}\r\n            >\r\n              {menuItem.subMenu && this.renderItems(menuItem.subMenu, true)}\r\n            </PanelHeaderMenuItem>\r\n          );\r\n        })}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { dashboard, panel } = this.props;\r\n    const menu = getPanelMenu(dashboard, panel);\r\n\r\n    return <div className=\"panel-menu-container dropdown open\">{this.renderItems(menu)}</div>;\r\n  }\r\n}\r\n","import React, { FC } from 'react';\r\nimport { PanelMenuItem } from '@grafana/data';\r\nimport { e2e } from '@grafana/e2e';\r\n\r\ninterface Props {\r\n  children: any;\r\n}\r\n\r\nexport const PanelHeaderMenuItem: FC<Props & PanelMenuItem> = props => {\r\n  const isSubMenu = props.type === 'submenu';\r\n  const isDivider = props.type === 'divider';\r\n  return isDivider ? (\r\n    <li className=\"divider\" />\r\n  ) : (\r\n    <li className={isSubMenu ? 'dropdown-submenu' : null}>\r\n      <a onClick={props.onClick}>\r\n        {props.iconClassName && <i className={props.iconClassName} />}\r\n        <span\r\n          className=\"dropdown-item-text\"\r\n          aria-label={e2e.pages.Dashboard.Panels.Panel.selectors.headerItems(props.text)}\r\n        >\r\n          {props.text}\r\n        </span>\r\n        {props.shortcut && <span className=\"dropdown-menu-item-shortcut\">{props.shortcut}</span>}\r\n      </a>\r\n      {props.children}\r\n    </li>\r\n  );\r\n};\r\n","import React, { PureComponent } from 'react';\r\nimport { throttle } from 'lodash';\r\nimport Draggable, { DraggableEventHandler } from 'react-draggable';\r\n\r\nimport { PanelModel } from '../state/PanelModel';\r\n\r\ninterface Props {\r\n  isEditing: boolean;\r\n  render: (styles: object) => JSX.Element;\r\n  panel: PanelModel;\r\n}\r\n\r\ninterface State {\r\n  editorHeight: number;\r\n}\r\n\r\nexport class PanelResizer extends PureComponent<Props, State> {\r\n  initialHeight: number = Math.floor(document.documentElement.scrollHeight * 0.3);\r\n  prevEditorHeight: number;\r\n  throttledChangeHeight: (height: number) => void;\r\n  throttledResizeDone: () => void;\r\n  noStyles: object = {};\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    const { panel } = this.props;\r\n\r\n    this.state = {\r\n      editorHeight: this.initialHeight,\r\n    };\r\n\r\n    this.throttledChangeHeight = throttle(this.changeHeight, 20, { trailing: true });\r\n    this.throttledResizeDone = throttle(() => {\r\n      panel.resizeDone();\r\n    }, 50);\r\n  }\r\n\r\n  get largestHeight() {\r\n    return document.documentElement.scrollHeight * 0.9;\r\n  }\r\n  get smallestHeight() {\r\n    return 100;\r\n  }\r\n\r\n  changeHeight = (height: number) => {\r\n    const sh = this.smallestHeight;\r\n    const lh = this.largestHeight;\r\n    height = height < sh ? sh : height;\r\n    height = height > lh ? lh : height;\r\n\r\n    this.prevEditorHeight = this.state.editorHeight;\r\n    this.setState({\r\n      editorHeight: height,\r\n    });\r\n  };\r\n\r\n  onDrag: DraggableEventHandler = (evt, data) => {\r\n    const newHeight = this.state.editorHeight + data.y;\r\n    this.throttledChangeHeight(newHeight);\r\n    this.throttledResizeDone();\r\n  };\r\n\r\n  render() {\r\n    const { render, isEditing } = this.props;\r\n    const { editorHeight } = this.state;\r\n\r\n    return (\r\n      <>\r\n        {render(isEditing ? { height: editorHeight } : this.noStyles)}\r\n        {isEditing && (\r\n          <div className=\"panel-editor-container__resizer\">\r\n            <Draggable axis=\"y\" grid={[100, 1]} onDrag={this.onDrag} position={{ x: 0, y: 0 }}>\r\n              <div className=\"panel-editor-resizer\">\r\n                <div className=\"panel-editor-resizer__handle\" />\r\n              </div>\r\n            </Draggable>\r\n          </div>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React, { FC, ChangeEvent } from 'react';\r\nimport { FormLabel, Input } from '@grafana/ui';\r\n\r\ninterface Props {\r\n  label: string;\r\n  placeholder?: string;\r\n  name: string;\r\n  value: string;\r\n  onBlur: (event: ChangeEvent<HTMLInputElement>) => void;\r\n  onChange: (event: ChangeEvent<HTMLInputElement>) => void;\r\n  tooltipInfo?: any;\r\n}\r\n\r\nexport const DataSourceOption: FC<Props> = ({ label, placeholder, name, value, onBlur, onChange, tooltipInfo }) => {\r\n  return (\r\n    <div className=\"gf-form gf-form--flex-end\">\r\n      <FormLabel tooltip={tooltipInfo}>{label}</FormLabel>\r\n      <Input\r\n        type=\"text\"\r\n        className=\"gf-form-input width-6\"\r\n        placeholder={placeholder}\r\n        name={name}\r\n        spellCheck={false}\r\n        onBlur={onBlur}\r\n        onChange={onChange}\r\n        value={value}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","// Libraries\r\nimport React, { PureComponent } from 'react';\r\n\r\n// Components\r\nimport { CustomScrollbar, PanelOptionsGroup } from '@grafana/ui';\r\nimport { FadeIn } from 'app/core/components/Animations/FadeIn';\r\n\r\ninterface Props {\r\n  children: JSX.Element;\r\n  heading: string;\r\n  renderToolbar?: () => JSX.Element;\r\n  toolbarItems?: EditorToolbarView[];\r\n  scrollTop?: number;\r\n  setScrollTop?: (value: React.MouseEvent<HTMLElement>) => void;\r\n}\r\n\r\nexport interface EditorToolbarView {\r\n  title?: string;\r\n  heading?: string;\r\n  icon?: string;\r\n  disabled?: boolean;\r\n  onClick?: () => void;\r\n  render?: () => JSX.Element;\r\n  action?: () => void;\r\n  btnType?: 'danger';\r\n}\r\n\r\ninterface State {\r\n  openView?: EditorToolbarView;\r\n  isOpen: boolean;\r\n  fadeIn: boolean;\r\n}\r\n\r\nexport class EditorTabBody extends PureComponent<Props, State> {\r\n  static defaultProps: Partial<Props> = {\r\n    toolbarItems: [],\r\n  };\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      openView: null,\r\n      fadeIn: false,\r\n      isOpen: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ fadeIn: true });\r\n  }\r\n\r\n  onToggleToolBarView = (item: EditorToolbarView) => {\r\n    this.setState({\r\n      openView: item,\r\n      isOpen: this.state.openView !== item || !this.state.isOpen,\r\n    });\r\n  };\r\n\r\n  onCloseOpenView = () => {\r\n    this.setState({ isOpen: false });\r\n  };\r\n\r\n  static getDerivedStateFromProps(props: Props, state: State) {\r\n    if (state.openView) {\r\n      const activeToolbarItem = props.toolbarItems.find(\r\n        (item: any) => item.title === state.openView.title && item.icon === state.openView.icon\r\n      );\r\n      if (activeToolbarItem) {\r\n        return {\r\n          ...state,\r\n          openView: activeToolbarItem,\r\n        };\r\n      }\r\n    }\r\n    return state;\r\n  }\r\n\r\n  renderButton(view: EditorToolbarView) {\r\n    const onClick = () => {\r\n      if (view.onClick) {\r\n        view.onClick();\r\n      }\r\n\r\n      if (view.render) {\r\n        this.onToggleToolBarView(view);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"nav-buttons\" key={view.title + view.icon}>\r\n        <button className=\"btn navbar-button\" onClick={onClick} disabled={view.disabled}>\r\n          {view.icon && <i className={view.icon} />} {view.title}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderOpenView(view: EditorToolbarView) {\r\n    return (\r\n      <PanelOptionsGroup title={view.title || view.heading} onClose={this.onCloseOpenView}>\r\n        {view.render()}\r\n      </PanelOptionsGroup>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { children, renderToolbar, heading, toolbarItems, scrollTop, setScrollTop } = this.props;\r\n    const { openView, fadeIn, isOpen } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <div className=\"toolbar\">\r\n          <div className=\"toolbar__left\">\r\n            <div className=\"toolbar__heading\">{heading}</div>\r\n            {renderToolbar && renderToolbar()}\r\n          </div>\r\n          {toolbarItems.map(item => this.renderButton(item))}\r\n        </div>\r\n        <div className=\"panel-editor__scroll\">\r\n          <CustomScrollbar autoHide={false} scrollTop={scrollTop} setScrollTop={setScrollTop} updateAfterMountMs={300}>\r\n            <div className=\"panel-editor__content\">\r\n              <FadeIn in={isOpen} duration={200} unmountOnExit={true}>\r\n                {openView && this.renderOpenView(openView)}\r\n              </FadeIn>\r\n              <FadeIn in={fadeIn} duration={50}>\r\n                {children}\r\n              </FadeIn>\r\n            </div>\r\n          </CustomScrollbar>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","// Libraries\r\nimport React, { PureComponent } from 'react';\r\n\r\n// Components\r\nimport { getAngularLoader, AngularComponent } from '@grafana/runtime';\r\nimport { EditorTabBody } from './EditorTabBody';\r\nimport './../../panel/GeneralTabCtrl';\r\n\r\n// Types\r\nimport { PanelModel } from '../state/PanelModel';\r\nimport { DataLink } from '@grafana/data';\r\nimport { PanelOptionsGroup, DataLinksEditor } from '@grafana/ui';\r\nimport { getPanelLinksVariableSuggestions } from 'app/features/panel/panellinks/link_srv';\r\n\r\ninterface Props {\r\n  panel: PanelModel;\r\n}\r\n\r\nexport class GeneralTab extends PureComponent<Props> {\r\n  element: any;\r\n  component: AngularComponent;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.element) {\r\n      return;\r\n    }\r\n\r\n    const { panel } = this.props;\r\n\r\n    const loader = getAngularLoader();\r\n    const template = '<panel-general-tab />';\r\n    const scopeProps = {\r\n      ctrl: {\r\n        panel: panel,\r\n      },\r\n    };\r\n\r\n    this.component = loader.load(this.element, scopeProps, template);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.component) {\r\n      this.component.destroy();\r\n    }\r\n  }\r\n\r\n  onDataLinksChanged = (links: DataLink[], callback?: () => void) => {\r\n    this.props.panel.links = links;\r\n    this.props.panel.render();\r\n    this.forceUpdate(callback);\r\n  };\r\n\r\n  render() {\r\n    const { panel } = this.props;\r\n    const suggestions = getPanelLinksVariableSuggestions();\r\n\r\n    return (\r\n      <EditorTabBody heading=\"General\" toolbarItems={[]}>\r\n        <>\r\n          <div ref={element => (this.element = element)} />\r\n          <PanelOptionsGroup title=\"Panel links\">\r\n            <DataLinksEditor\r\n              value={panel.links}\r\n              onChange={this.onDataLinksChanged}\r\n              suggestions={suggestions}\r\n              maxLinks={10}\r\n            />\r\n          </PanelOptionsGroup>\r\n        </>\r\n      </EditorTabBody>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport classNames from 'classnames';\r\nimport { hot } from 'react-hot-loader';\r\nimport { connect } from 'react-redux';\r\nimport { Tooltip } from '@grafana/ui';\r\nimport { PanelPlugin, PanelPluginMeta } from '@grafana/data';\r\nimport { AngularComponent, config } from '@grafana/runtime';\r\nimport { e2e } from '@grafana/e2e';\r\n\r\nimport { QueriesTab } from './QueriesTab';\r\nimport VisualizationTab from './VisualizationTab';\r\nimport { GeneralTab } from './GeneralTab';\r\nimport { AlertTab } from '../../alerting/AlertTab';\r\nimport { PanelModel } from '../state/PanelModel';\r\nimport { DashboardModel } from '../state/DashboardModel';\r\nimport { StoreState } from '../../../types';\r\nimport { panelEditorCleanUp, PanelEditorTab, PanelEditorTabIds } from './state/reducers';\r\nimport { changePanelEditorTab, refreshPanelEditor } from './state/actions';\r\nimport { getActiveTabAndTabs } from './state/selectors';\r\n\r\ninterface PanelEditorProps {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n  plugin: PanelPlugin;\r\n  angularPanel?: AngularComponent;\r\n  onPluginTypeChange: (newType: PanelPluginMeta) => void;\r\n  activeTab: PanelEditorTabIds;\r\n  tabs: PanelEditorTab[];\r\n  refreshPanelEditor: typeof refreshPanelEditor;\r\n  panelEditorCleanUp: typeof panelEditorCleanUp;\r\n  changePanelEditorTab: typeof changePanelEditorTab;\r\n}\r\n\r\nclass UnConnectedPanelEditor extends PureComponent<PanelEditorProps> {\r\n  constructor(props: PanelEditorProps) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount(): void {\r\n    this.refreshFromState();\r\n  }\r\n\r\n  componentWillUnmount(): void {\r\n    const { panelEditorCleanUp } = this.props;\r\n    panelEditorCleanUp();\r\n  }\r\n\r\n  refreshFromState = (meta?: PanelPluginMeta) => {\r\n    const { refreshPanelEditor, plugin } = this.props;\r\n    meta = meta || plugin.meta;\r\n\r\n    refreshPanelEditor({\r\n      hasQueriesTab: !meta.skipDataQuery,\r\n      usesGraphPlugin: meta.id === 'graph',\r\n      alertingEnabled: config.alertingEnabled,\r\n    });\r\n  };\r\n\r\n  onChangeTab = (tab: PanelEditorTab) => {\r\n    const { changePanelEditorTab } = this.props;\r\n    // Angular Query Components can potentially refresh the PanelModel\r\n    // onBlur so this makes sure we change tab after that\r\n    setTimeout(() => changePanelEditorTab(tab), 10);\r\n  };\r\n\r\n  onPluginTypeChange = (newType: PanelPluginMeta) => {\r\n    const { onPluginTypeChange } = this.props;\r\n    onPluginTypeChange(newType);\r\n\r\n    this.refreshFromState(newType);\r\n  };\r\n\r\n  renderCurrentTab(activeTab: string) {\r\n    const { panel, dashboard, plugin, angularPanel } = this.props;\r\n\r\n    switch (activeTab) {\r\n      case 'advanced':\r\n        return <GeneralTab panel={panel} />;\r\n      case 'queries':\r\n        return <QueriesTab panel={panel} dashboard={dashboard} />;\r\n      case 'alert':\r\n        return <AlertTab angularPanel={angularPanel} dashboard={dashboard} panel={panel} />;\r\n      case 'visualization':\r\n        return (\r\n          <VisualizationTab\r\n            panel={panel}\r\n            dashboard={dashboard}\r\n            plugin={plugin}\r\n            onPluginTypeChange={this.onPluginTypeChange}\r\n            angularPanel={angularPanel}\r\n          />\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { activeTab, tabs } = this.props;\r\n\r\n    return (\r\n      <div className=\"panel-editor-container__editor\">\r\n        <div className=\"panel-editor-tabs\">\r\n          {tabs.map(tab => {\r\n            return <TabItem tab={tab} activeTab={activeTab} onClick={this.onChangeTab} key={tab.id} />;\r\n          })}\r\n        </div>\r\n        <div className=\"panel-editor__right\">{this.renderCurrentTab(activeTab)}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const mapStateToProps = (state: StoreState) => getActiveTabAndTabs(state.location, state.panelEditor);\r\n\r\nconst mapDispatchToProps = { refreshPanelEditor, panelEditorCleanUp, changePanelEditorTab };\r\n\r\nexport const PanelEditor = hot(module)(connect(mapStateToProps, mapDispatchToProps)(UnConnectedPanelEditor));\r\n\r\ninterface TabItemParams {\r\n  tab: PanelEditorTab;\r\n  activeTab: string;\r\n  onClick: (tab: PanelEditorTab) => void;\r\n}\r\n\r\nfunction TabItem({ tab, activeTab, onClick }: TabItemParams) {\r\n  const tabClasses = classNames({\r\n    'panel-editor-tabs__link': true,\r\n    active: activeTab === tab.id,\r\n  });\r\n\r\n  return (\r\n    <div className=\"panel-editor-tabs__item\" onClick={() => onClick(tab)}>\r\n      <a className={tabClasses} aria-label={e2e.pages.Dashboard.Panels.EditPanel.selectors.tabItems(tab.text)}>\r\n        <Tooltip content={`${tab.text}`} placement=\"auto\">\r\n          <i className={`gicon gicon-${tab.id}${activeTab === tab.id ? '-active' : ''}`} />\r\n        </Tooltip>\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n","// Libraries\r\nimport React, { PureComponent } from 'react';\r\nimport _ from 'lodash';\r\nimport { css } from 'emotion';\r\n// Components\r\nimport { EditorTabBody, EditorToolbarView } from './EditorTabBody';\r\nimport { DataSourcePicker } from 'app/core/components/Select/DataSourcePicker';\r\nimport { QueryInspector } from './QueryInspector';\r\nimport { QueryOptions } from './QueryOptions';\r\nimport { PanelOptionsGroup, TransformationsEditor, AlphaNotice } from '@grafana/ui';\r\nimport { QueryEditorRows } from './QueryEditorRows';\r\n// Services\r\nimport { getDatasourceSrv } from 'app/features/plugins/datasource_srv';\r\nimport { getBackendSrv } from 'app/core/services/backend_srv';\r\nimport config from 'app/core/config';\r\n// Types\r\nimport { PanelModel } from '../state/PanelModel';\r\nimport { DashboardModel } from '../state/DashboardModel';\r\nimport {\r\n  LoadingState,\r\n  DataTransformerConfig,\r\n  DefaultTimeRange,\r\n  DataSourceSelectItem,\r\n  DataQuery,\r\n  PanelData,\r\n  PluginState,\r\n} from '@grafana/data';\r\nimport { PluginHelp } from 'app/core/components/PluginHelp/PluginHelp';\r\nimport { addQuery } from 'app/core/utils/query';\r\nimport { Unsubscribable } from 'rxjs';\r\nimport { isSharedDashboardQuery, DashboardQueryEditor } from 'app/plugins/datasource/dashboard';\r\nimport { expressionDatasource, ExpressionDatasourceID } from 'app/features/expressions/ExpressionDatasource';\r\n\r\ninterface Props {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n}\r\n\r\ninterface State {\r\n  currentDS: DataSourceSelectItem;\r\n  helpContent: JSX.Element;\r\n  isLoadingHelp: boolean;\r\n  isPickerOpen: boolean;\r\n  isAddingMixed: boolean;\r\n  scrollTop: number;\r\n  data: PanelData;\r\n}\r\n\r\nexport class QueriesTab extends PureComponent<Props, State> {\r\n  datasources: DataSourceSelectItem[] = getDatasourceSrv().getMetricSources();\r\n  backendSrv = getBackendSrv();\r\n  querySubscription: Unsubscribable;\r\n\r\n  state: State = {\r\n    isLoadingHelp: false,\r\n    currentDS: this.findCurrentDataSource(),\r\n    helpContent: null,\r\n    isPickerOpen: false,\r\n    isAddingMixed: false,\r\n    scrollTop: 0,\r\n    data: {\r\n      state: LoadingState.NotStarted,\r\n      series: [],\r\n      timeRange: DefaultTimeRange,\r\n    },\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { panel } = this.props;\r\n    const queryRunner = panel.getQueryRunner();\r\n\r\n    this.querySubscription = queryRunner.getData(false).subscribe({\r\n      next: (data: PanelData) => this.onPanelDataUpdate(data),\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.querySubscription) {\r\n      this.querySubscription.unsubscribe();\r\n      this.querySubscription = null;\r\n    }\r\n  }\r\n\r\n  onPanelDataUpdate(data: PanelData) {\r\n    this.setState({ data });\r\n  }\r\n\r\n  findCurrentDataSource(): DataSourceSelectItem {\r\n    const { panel } = this.props;\r\n    return this.datasources.find(datasource => datasource.value === panel.datasource) || this.datasources[0];\r\n  }\r\n\r\n  onChangeDataSource = (datasource: DataSourceSelectItem) => {\r\n    const { panel } = this.props;\r\n    const { currentDS } = this.state;\r\n\r\n    // switching to mixed\r\n    if (datasource.meta.mixed) {\r\n      // Set the datasource on all targets\r\n      panel.targets.forEach(target => {\r\n        if (target.datasource !== ExpressionDatasourceID) {\r\n          target.datasource = panel.datasource;\r\n          if (!target.datasource) {\r\n            target.datasource = config.defaultDatasource;\r\n          }\r\n        }\r\n      });\r\n    } else if (currentDS) {\r\n      // if switching from mixed\r\n      if (currentDS.meta.mixed) {\r\n        // Remove the explicit datasource\r\n        for (const target of panel.targets) {\r\n          if (target.datasource !== ExpressionDatasourceID) {\r\n            delete target.datasource;\r\n          }\r\n        }\r\n      } else if (currentDS.meta.id !== datasource.meta.id) {\r\n        // we are changing data source type, clear queries\r\n        panel.targets = [{ refId: 'A' }];\r\n      }\r\n    }\r\n\r\n    panel.datasource = datasource.value;\r\n    panel.refresh();\r\n\r\n    this.setState({\r\n      currentDS: datasource,\r\n    });\r\n  };\r\n\r\n  renderQueryInspector = () => {\r\n    const { panel } = this.props;\r\n    return <QueryInspector panel={panel} />;\r\n  };\r\n\r\n  renderHelp = () => {\r\n    return <PluginHelp plugin={this.state.currentDS.meta} type=\"query_help\" />;\r\n  };\r\n\r\n  /**\r\n   * Sets the queries for the panel\r\n   */\r\n  onUpdateQueries = (queries: DataQuery[]) => {\r\n    this.props.panel.targets = queries;\r\n    this.forceUpdate();\r\n  };\r\n\r\n  onAddQueryClick = () => {\r\n    if (this.state.currentDS.meta.mixed) {\r\n      this.setState({ isAddingMixed: true });\r\n      return;\r\n    }\r\n\r\n    this.onUpdateQueries(addQuery(this.props.panel.targets));\r\n    this.onScrollBottom();\r\n  };\r\n\r\n  onAddExpressionClick = () => {\r\n    this.onUpdateQueries(addQuery(this.props.panel.targets, expressionDatasource.newQuery()));\r\n    this.onScrollBottom();\r\n  };\r\n\r\n  onScrollBottom = () => {\r\n    this.setState({ scrollTop: this.state.scrollTop + 10000 });\r\n  };\r\n\r\n  renderToolbar = () => {\r\n    const { currentDS, isAddingMixed } = this.state;\r\n    const showAddButton = !(isAddingMixed || isSharedDashboardQuery(currentDS.name));\r\n\r\n    return (\r\n      <>\r\n        <DataSourcePicker datasources={this.datasources} onChange={this.onChangeDataSource} current={currentDS} />\r\n        <div className=\"flex-grow-1\" />\r\n        {showAddButton && (\r\n          <button className=\"btn navbar-button\" onClick={this.onAddQueryClick}>\r\n            Add Query\r\n          </button>\r\n        )}\r\n        {isAddingMixed && this.renderMixedPicker()}\r\n        {config.featureToggles.expressions && (\r\n          <button className=\"btn navbar-button\" onClick={this.onAddExpressionClick}>\r\n            Add Expression\r\n          </button>\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  renderMixedPicker = () => {\r\n    // We cannot filter on mixed flag as some mixed data sources like external plugin\r\n    // meta queries data source is mixed but also supports it's own queries\r\n    const filteredDsList = this.datasources.filter(ds => ds.meta.id !== 'mixed');\r\n\r\n    return (\r\n      <DataSourcePicker\r\n        datasources={filteredDsList}\r\n        onChange={this.onAddMixedQuery}\r\n        current={null}\r\n        autoFocus={true}\r\n        onBlur={this.onMixedPickerBlur}\r\n        openMenuOnFocus={true}\r\n      />\r\n    );\r\n  };\r\n\r\n  onAddMixedQuery = (datasource: any) => {\r\n    this.props.panel.targets = addQuery(this.props.panel.targets, { datasource: datasource.name });\r\n    this.setState({ isAddingMixed: false, scrollTop: this.state.scrollTop + 10000 });\r\n    this.forceUpdate();\r\n  };\r\n\r\n  onMixedPickerBlur = () => {\r\n    this.setState({ isAddingMixed: false });\r\n  };\r\n\r\n  onQueryChange = (query: DataQuery, index: number) => {\r\n    this.props.panel.changeQuery(query, index);\r\n    this.forceUpdate();\r\n  };\r\n\r\n  onTransformersChange = (transformers: DataTransformerConfig[]) => {\r\n    this.props.panel.setTransformations(transformers);\r\n    this.forceUpdate();\r\n  };\r\n\r\n  setScrollTop = (event: React.MouseEvent<HTMLElement>) => {\r\n    const target = event.target as HTMLElement;\r\n    this.setState({ scrollTop: target.scrollTop });\r\n  };\r\n\r\n  renderQueryBody = () => {\r\n    const { panel, dashboard } = this.props;\r\n    const { currentDS, data } = this.state;\r\n\r\n    if (isSharedDashboardQuery(currentDS.name)) {\r\n      return <DashboardQueryEditor panel={panel} panelData={data} onChange={query => this.onUpdateQueries([query])} />;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <QueryEditorRows\r\n          queries={panel.targets}\r\n          datasource={currentDS}\r\n          onChangeQueries={this.onUpdateQueries}\r\n          onScrollBottom={this.onScrollBottom}\r\n          panel={panel}\r\n          dashboard={dashboard}\r\n          data={data}\r\n        />\r\n        <PanelOptionsGroup>\r\n          <QueryOptions panel={panel} datasource={currentDS} />\r\n        </PanelOptionsGroup>\r\n      </>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { scrollTop, data } = this.state;\r\n    const queryInspector: EditorToolbarView = {\r\n      title: 'Query Inspector',\r\n      render: this.renderQueryInspector,\r\n    };\r\n\r\n    const dsHelp: EditorToolbarView = {\r\n      heading: 'Help',\r\n      icon: 'fa fa-question',\r\n      render: this.renderHelp,\r\n    };\r\n\r\n    const enableTransformations = config.featureToggles.transformations;\r\n\r\n    return (\r\n      <EditorTabBody\r\n        heading=\"Query\"\r\n        renderToolbar={this.renderToolbar}\r\n        toolbarItems={[queryInspector, dsHelp]}\r\n        setScrollTop={this.setScrollTop}\r\n        scrollTop={scrollTop}\r\n      >\r\n        <>\r\n          {this.renderQueryBody()}\r\n\r\n          {enableTransformations && (\r\n            <PanelOptionsGroup\r\n              title={\r\n                <>\r\n                  Query results\r\n                  <AlphaNotice\r\n                    state={PluginState.alpha}\r\n                    className={css`\r\n                      margin-left: 16px;\r\n                    `}\r\n                  />\r\n                </>\r\n              }\r\n            >\r\n              {this.state.data.state !== LoadingState.NotStarted && (\r\n                <TransformationsEditor\r\n                  transformations={this.props.panel.transformations || []}\r\n                  onChange={this.onTransformersChange}\r\n                  dataFrames={data.series}\r\n                />\r\n              )}\r\n            </PanelOptionsGroup>\r\n          )}\r\n        </>\r\n      </EditorTabBody>\r\n    );\r\n  }\r\n}\r\n","// Libraries\r\nimport React, { PureComponent } from 'react';\r\n\r\n// @ts-ignore ignoring this for now, otherwise we would have to extend _ interface with move\r\nimport _ from 'lodash';\r\n\r\n// Types\r\nimport { PanelModel } from '../state/PanelModel';\r\nimport { DataQuery, PanelData, DataSourceSelectItem } from '@grafana/data';\r\nimport { DashboardModel } from '../state/DashboardModel';\r\nimport { QueryEditorRow } from './QueryEditorRow';\r\nimport { addQuery } from 'app/core/utils/query';\r\n\r\ninterface Props {\r\n  // The query configuration\r\n  queries: DataQuery[];\r\n  datasource: DataSourceSelectItem;\r\n\r\n  // Query editing\r\n  onChangeQueries: (queries: DataQuery[]) => void;\r\n  onScrollBottom: () => void;\r\n\r\n  // Dashboard Configs\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n\r\n  // Query Response Data\r\n  data: PanelData;\r\n}\r\n\r\nexport class QueryEditorRows extends PureComponent<Props> {\r\n  onAddQuery = (query?: Partial<DataQuery>) => {\r\n    const { queries, onChangeQueries } = this.props;\r\n    onChangeQueries(addQuery(queries, query));\r\n    this.props.onScrollBottom();\r\n  };\r\n\r\n  onRemoveQuery = (query: DataQuery) => {\r\n    const { queries, onChangeQueries, panel } = this.props;\r\n    const removed = queries.filter(q => {\r\n      return q !== query;\r\n    });\r\n    onChangeQueries(removed);\r\n    panel.refresh();\r\n  };\r\n\r\n  onMoveQuery = (query: DataQuery, direction: number) => {\r\n    const { queries, onChangeQueries, panel } = this.props;\r\n\r\n    const index = _.indexOf(queries, query);\r\n    // @ts-ignore\r\n    _.move(queries, index, index + direction);\r\n    onChangeQueries(queries);\r\n    panel.refresh();\r\n  };\r\n\r\n  onChangeQuery(query: DataQuery, index: number) {\r\n    const { queries, onChangeQueries } = this.props;\r\n\r\n    // ensure refId is maintained\r\n    query.refId = queries[index].refId;\r\n\r\n    // update query in array\r\n    onChangeQueries(\r\n      queries.map((item, itemIndex) => {\r\n        if (itemIndex === index) {\r\n          return query;\r\n        }\r\n        return item;\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { props } = this;\r\n    return (\r\n      <div className=\"query-editor-rows\">\r\n        {props.queries.map((query, index) => (\r\n          <QueryEditorRow\r\n            dataSourceValue={query.datasource || props.datasource.value}\r\n            key={query.refId}\r\n            panel={props.panel}\r\n            dashboard={props.dashboard}\r\n            data={props.data}\r\n            query={query}\r\n            onChange={query => this.onChangeQuery(query, index)}\r\n            onRemoveQuery={this.onRemoveQuery}\r\n            onAddQuery={this.onAddQuery}\r\n            onMoveQuery={this.onMoveQuery}\r\n            inMixedMode={props.datasource.meta.mixed}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport appEvents from 'app/core/app_events';\r\nimport { CopyToClipboard } from 'app/core/components/CopyToClipboard/CopyToClipboard';\r\nimport { LoadingPlaceholder, JSONFormatter } from '@grafana/ui';\r\nimport { CoreEvents } from 'app/types';\r\nimport { AppEvents, PanelEvents } from '@grafana/data';\r\n\r\ninterface DsQuery {\r\n  isLoading: boolean;\r\n  response: {};\r\n}\r\n\r\ninterface Props {\r\n  panel: any;\r\n}\r\n\r\ninterface State {\r\n  allNodesExpanded: boolean;\r\n  isMocking: boolean;\r\n  mockedResponse: string;\r\n  dsQuery: DsQuery;\r\n}\r\n\r\nexport class QueryInspector extends PureComponent<Props, State> {\r\n  formattedJson: any;\r\n  clipboard: any;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      allNodesExpanded: null,\r\n      isMocking: false,\r\n      mockedResponse: '',\r\n      dsQuery: {\r\n        isLoading: false,\r\n        response: {},\r\n      },\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { panel } = this.props;\r\n\r\n    appEvents.on(CoreEvents.dsRequestResponse, this.onDataSourceResponse);\r\n    appEvents.on(CoreEvents.dsRequestError, this.onRequestError);\r\n\r\n    panel.events.on(PanelEvents.refresh, this.onPanelRefresh);\r\n    panel.refresh();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { panel } = this.props;\r\n\r\n    appEvents.off(CoreEvents.dsRequestResponse, this.onDataSourceResponse);\r\n    appEvents.on(CoreEvents.dsRequestError, this.onRequestError);\r\n\r\n    panel.events.off(PanelEvents.refresh, this.onPanelRefresh);\r\n  }\r\n\r\n  handleMocking(response: any) {\r\n    const { mockedResponse } = this.state;\r\n    let mockedData;\r\n    try {\r\n      mockedData = JSON.parse(mockedResponse);\r\n    } catch (err) {\r\n      appEvents.emit(AppEvents.alertError, ['R: Failed to parse mocked response']);\r\n      return;\r\n    }\r\n\r\n    response.data = mockedData;\r\n  }\r\n\r\n  onPanelRefresh = () => {\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      dsQuery: {\r\n        isLoading: true,\r\n        response: {},\r\n      },\r\n    }));\r\n  };\r\n\r\n  onRequestError = (err: any) => {\r\n    this.onDataSourceResponse(err);\r\n  };\r\n\r\n  onDataSourceResponse = (response: any = {}) => {\r\n    if (this.state.isMocking) {\r\n      this.handleMocking(response);\r\n      return;\r\n    }\r\n\r\n    response = { ...response }; // clone - dont modify the response\r\n\r\n    if (response.headers) {\r\n      delete response.headers;\r\n    }\r\n\r\n    if (response.config) {\r\n      response.request = response.config;\r\n      delete response.config;\r\n      delete response.request.transformRequest;\r\n      delete response.request.transformResponse;\r\n      delete response.request.paramSerializer;\r\n      delete response.request.jsonpCallbackParam;\r\n      delete response.request.headers;\r\n      delete response.request.requestId;\r\n      delete response.request.inspect;\r\n      delete response.request.retry;\r\n      delete response.request.timeout;\r\n    }\r\n\r\n    if (response.data) {\r\n      response.response = response.data;\r\n\r\n      delete response.data;\r\n      delete response.status;\r\n      delete response.statusText;\r\n      delete response.$$config;\r\n    }\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      dsQuery: {\r\n        isLoading: false,\r\n        response: response,\r\n      },\r\n    }));\r\n  };\r\n\r\n  setFormattedJson = (formattedJson: any) => {\r\n    this.formattedJson = formattedJson;\r\n  };\r\n\r\n  getTextForClipboard = () => {\r\n    return JSON.stringify(this.formattedJson, null, 2);\r\n  };\r\n\r\n  onClipboardSuccess = () => {\r\n    appEvents.emit(AppEvents.alertSuccess, ['Content copied to clipboard']);\r\n  };\r\n\r\n  onToggleExpand = () => {\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      allNodesExpanded: !this.state.allNodesExpanded,\r\n    }));\r\n  };\r\n\r\n  onToggleMocking = () => {\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      isMocking: !this.state.isMocking,\r\n    }));\r\n  };\r\n\r\n  getNrOfOpenNodes = () => {\r\n    if (this.state.allNodesExpanded === null) {\r\n      return 3; // 3 is default, ie when state is null\r\n    } else if (this.state.allNodesExpanded) {\r\n      return 20;\r\n    }\r\n    return 1;\r\n  };\r\n\r\n  setMockedResponse = (evt: any) => {\r\n    const mockedResponse = evt.target.value;\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      mockedResponse,\r\n    }));\r\n  };\r\n\r\n  renderExpandCollapse = () => {\r\n    const { allNodesExpanded } = this.state;\r\n\r\n    const collapse = (\r\n      <>\r\n        <i className=\"fa fa-minus-square-o\" /> Collapse All\r\n      </>\r\n    );\r\n    const expand = (\r\n      <>\r\n        <i className=\"fa fa-plus-square-o\" /> Expand All\r\n      </>\r\n    );\r\n    return allNodesExpanded ? collapse : expand;\r\n  };\r\n\r\n  render() {\r\n    const { response, isLoading } = this.state.dsQuery;\r\n    const openNodes = this.getNrOfOpenNodes();\r\n\r\n    if (isLoading) {\r\n      return <LoadingPlaceholder text=\"Loading query inspector...\" />;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <div className=\"pull-right\">\r\n          <button className=\"btn btn-transparent btn-p-x-0 m-r-1\" onClick={this.onToggleExpand}>\r\n            {this.renderExpandCollapse()}\r\n          </button>\r\n          <CopyToClipboard\r\n            className=\"btn btn-transparent btn-p-x-0\"\r\n            text={this.getTextForClipboard}\r\n            onSuccess={this.onClipboardSuccess}\r\n          >\r\n            <i className=\"fa fa-clipboard\" /> Copy to Clipboard\r\n          </CopyToClipboard>\r\n        </div>\r\n\r\n        <JSONFormatter json={response} open={openNodes} onDidRender={this.setFormattedJson} />\r\n      </>\r\n    );\r\n  }\r\n}\r\n","// Libraries\r\nimport React, { PureComponent, ChangeEvent, FocusEvent, ReactText } from 'react';\r\n\r\n// Utils\r\nimport { rangeUtil, DataSourceSelectItem } from '@grafana/data';\r\n\r\n// Components\r\nimport { EventsWithValidation, Input, InputStatus, Switch, ValidationEvents, FormLabel } from '@grafana/ui';\r\nimport { DataSourceOption } from './DataSourceOption';\r\n\r\n// Types\r\nimport { PanelModel } from '../state';\r\n\r\nconst timeRangeValidationEvents: ValidationEvents = {\r\n  [EventsWithValidation.onBlur]: [\r\n    {\r\n      rule: value => {\r\n        if (!value) {\r\n          return true;\r\n        }\r\n        return rangeUtil.isValidTimeSpan(value);\r\n      },\r\n      errorMessage: 'Not a valid timespan',\r\n    },\r\n  ],\r\n};\r\n\r\nconst emptyToNull = (value: string) => {\r\n  return value === '' ? null : value;\r\n};\r\n\r\ninterface Props {\r\n  panel: PanelModel;\r\n  datasource: DataSourceSelectItem;\r\n}\r\n\r\ninterface State {\r\n  relativeTime: string;\r\n  timeShift: string;\r\n  cacheTimeout: string;\r\n  maxDataPoints: string | ReactText;\r\n  interval: string;\r\n  hideTimeOverride: boolean;\r\n}\r\n\r\nexport class QueryOptions extends PureComponent<Props, State> {\r\n  allOptions: any = {\r\n    cacheTimeout: {\r\n      label: 'Cache timeout',\r\n      placeholder: '60',\r\n      name: 'cacheTimeout',\r\n      tooltipInfo: (\r\n        <>\r\n          If your time series store has a query cache this option can override the default cache timeout. Specify a\r\n          numeric value in seconds.\r\n        </>\r\n      ),\r\n    },\r\n    maxDataPoints: {\r\n      label: 'Max data points',\r\n      placeholder: 'auto',\r\n      name: 'maxDataPoints',\r\n      tooltipInfo: (\r\n        <>\r\n          The maximum data points the query should return. For graphs this is automatically set to one data point per\r\n          pixel. For some data sources this can also be capped in the datasource settings page. With streaming data,\r\n          this value is used for the rolling buffer.\r\n        </>\r\n      ),\r\n    },\r\n    minInterval: {\r\n      label: 'Min time interval',\r\n      placeholder: '0',\r\n      name: 'minInterval',\r\n      panelKey: 'interval',\r\n      tooltipInfo: (\r\n        <>\r\n          A lower limit for the auto group by time interval. Recommended to be set to write frequency, for example{' '}\r\n          <code>1m</code> if your data is written every minute. Access auto interval via variable{' '}\r\n          <code>$__interval</code> for time range string and <code>$__interval_ms</code> for numeric variable that can\r\n          be used in math expressions.\r\n        </>\r\n      ),\r\n    },\r\n  };\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      relativeTime: props.panel.timeFrom || '',\r\n      timeShift: props.panel.timeShift || '',\r\n      cacheTimeout: props.panel.cacheTimeout || '',\r\n      maxDataPoints: props.panel.maxDataPoints || '',\r\n      interval: props.panel.interval || '',\r\n      hideTimeOverride: props.panel.hideTimeOverride || false,\r\n    };\r\n  }\r\n\r\n  onRelativeTimeChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({\r\n      relativeTime: event.target.value,\r\n    });\r\n  };\r\n\r\n  onTimeShiftChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({\r\n      timeShift: event.target.value,\r\n    });\r\n  };\r\n\r\n  onOverrideTime = (event: FocusEvent<HTMLInputElement>, status: InputStatus) => {\r\n    const { value } = event.target;\r\n    const { panel } = this.props;\r\n    const emptyToNullValue = emptyToNull(value);\r\n    if (status === InputStatus.Valid && panel.timeFrom !== emptyToNullValue) {\r\n      panel.timeFrom = emptyToNullValue;\r\n      panel.refresh();\r\n    }\r\n  };\r\n\r\n  onTimeShift = (event: FocusEvent<HTMLInputElement>, status: InputStatus) => {\r\n    const { value } = event.target;\r\n    const { panel } = this.props;\r\n    const emptyToNullValue = emptyToNull(value);\r\n    if (status === InputStatus.Valid && panel.timeShift !== emptyToNullValue) {\r\n      panel.timeShift = emptyToNullValue;\r\n      panel.refresh();\r\n    }\r\n  };\r\n\r\n  onToggleTimeOverride = () => {\r\n    const { panel } = this.props;\r\n    this.setState({ hideTimeOverride: !this.state.hideTimeOverride }, () => {\r\n      panel.hideTimeOverride = this.state.hideTimeOverride;\r\n      panel.refresh();\r\n    });\r\n  };\r\n\r\n  onDataSourceOptionBlur = (panelKey: string) => () => {\r\n    const { panel } = this.props;\r\n\r\n    // @ts-ignore\r\n    panel[panelKey] = this.state[panelKey];\r\n    panel.refresh();\r\n  };\r\n\r\n  onDataSourceOptionChange = (panelKey: string) => (event: ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({ ...this.state, [panelKey]: event.target.value });\r\n  };\r\n\r\n  /**\r\n   * Show options for any value that is set, or values that the\r\n   * current datasource says it will use\r\n   */\r\n  renderOptions = () => {\r\n    const { datasource } = this.props;\r\n    const queryOptions: any = datasource.meta.queryOptions || {};\r\n\r\n    return Object.keys(this.allOptions).map(key => {\r\n      const options = this.allOptions[key];\r\n      const panelKey = options.panelKey || key;\r\n\r\n      // @ts-ignore\r\n      const value = this.state[panelKey];\r\n\r\n      if (queryOptions[key]) {\r\n        return (\r\n          <DataSourceOption\r\n            key={key}\r\n            {...options}\r\n            onChange={this.onDataSourceOptionChange(panelKey)}\r\n            onBlur={this.onDataSourceOptionBlur(panelKey)}\r\n            value={value}\r\n          />\r\n        );\r\n      }\r\n      return null; // nothing to render\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { hideTimeOverride } = this.state;\r\n    const { relativeTime, timeShift } = this.state;\r\n    return (\r\n      <div className=\"gf-form-inline\">\r\n        {this.renderOptions()}\r\n\r\n        <div className=\"gf-form\">\r\n          <FormLabel>Relative time</FormLabel>\r\n          <Input\r\n            type=\"text\"\r\n            className=\"width-6\"\r\n            placeholder=\"1h\"\r\n            onChange={this.onRelativeTimeChange}\r\n            onBlur={this.onOverrideTime}\r\n            validationEvents={timeRangeValidationEvents}\r\n            hideErrorMessage={true}\r\n            value={relativeTime}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"gf-form\">\r\n          <span className=\"gf-form-label\">Time shift</span>\r\n          <Input\r\n            type=\"text\"\r\n            className=\"width-6\"\r\n            placeholder=\"1h\"\r\n            onChange={this.onTimeShiftChange}\r\n            onBlur={this.onTimeShift}\r\n            validationEvents={timeRangeValidationEvents}\r\n            hideErrorMessage={true}\r\n            value={timeShift}\r\n          />\r\n        </div>\r\n        {(timeShift || relativeTime) && (\r\n          <div className=\"gf-form-inline\">\r\n            <Switch label=\"Hide time info\" checked={hideTimeOverride} onChange={this.onToggleTimeOverride} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// Libraries\r\nimport React, { PureComponent } from 'react';\r\n// Utils & Services\r\nimport { AngularComponent, getAngularLoader } from '@grafana/runtime';\r\nimport { connectWithStore } from 'app/core/utils/connectWithReduxStore';\r\nimport { StoreState } from 'app/types';\r\nimport { updateLocation } from 'app/core/actions';\r\n// Components\r\nimport { EditorTabBody, EditorToolbarView } from './EditorTabBody';\r\nimport { VizTypePicker } from './VizTypePicker';\r\nimport { PluginHelp } from 'app/core/components/PluginHelp/PluginHelp';\r\nimport { FadeIn } from 'app/core/components/Animations/FadeIn';\r\n// Types\r\nimport { PanelModel, DashboardModel } from '../state';\r\nimport { VizPickerSearch } from './VizPickerSearch';\r\nimport PluginStateinfo from 'app/features/plugins/PluginStateInfo';\r\nimport { PanelCtrl } from 'app/plugins/sdk';\r\nimport { Unsubscribable } from 'rxjs';\r\nimport { PanelPlugin, PanelPluginMeta, PanelData, LoadingState, DefaultTimeRange } from '@grafana/data';\r\n\r\ninterface Props {\r\n  panel: PanelModel;\r\n  dashboard: DashboardModel;\r\n  plugin: PanelPlugin;\r\n  angularPanel?: AngularComponent;\r\n  onPluginTypeChange: (newType: PanelPluginMeta) => void;\r\n  updateLocation: typeof updateLocation;\r\n  urlOpenVizPicker: boolean;\r\n}\r\n\r\ninterface State {\r\n  isVizPickerOpen: boolean;\r\n  searchQuery: string;\r\n  scrollTop: number;\r\n  hasBeenFocused: boolean;\r\n  data: PanelData;\r\n}\r\n\r\nexport class VisualizationTab extends PureComponent<Props, State> {\r\n  element: HTMLElement;\r\n  angularOptions: AngularComponent;\r\n  querySubscription: Unsubscribable;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isVizPickerOpen: this.props.urlOpenVizPicker,\r\n      hasBeenFocused: false,\r\n      searchQuery: '',\r\n      scrollTop: 0,\r\n      data: {\r\n        state: LoadingState.NotStarted,\r\n        series: [],\r\n        timeRange: DefaultTimeRange,\r\n      },\r\n    };\r\n  }\r\n\r\n  getReactPanelOptions = () => {\r\n    const { panel } = this.props;\r\n    return panel.getOptions();\r\n  };\r\n\r\n  renderPanelOptions() {\r\n    const { plugin, angularPanel } = this.props;\r\n\r\n    if (angularPanel) {\r\n      return <div ref={element => (this.element = element)} />;\r\n    }\r\n\r\n    if (plugin.editor) {\r\n      return (\r\n        <plugin.editor\r\n          data={this.state.data}\r\n          options={this.getReactPanelOptions()}\r\n          onOptionsChange={this.onPanelOptionsChanged}\r\n        />\r\n      );\r\n    }\r\n\r\n    return <p>Visualization has no options</p>;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { panel } = this.props;\r\n    const queryRunner = panel.getQueryRunner();\r\n    if (this.shouldLoadAngularOptions()) {\r\n      this.loadAngularOptions();\r\n    }\r\n\r\n    this.querySubscription = queryRunner.getData().subscribe({\r\n      next: (data: PanelData) => this.setState({ data }),\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    if (this.props.plugin !== prevProps.plugin) {\r\n      this.cleanUpAngularOptions();\r\n    }\r\n\r\n    if (this.shouldLoadAngularOptions()) {\r\n      this.loadAngularOptions();\r\n    }\r\n  }\r\n\r\n  shouldLoadAngularOptions() {\r\n    return this.props.angularPanel && this.element && !this.angularOptions;\r\n  }\r\n\r\n  loadAngularOptions() {\r\n    const { angularPanel } = this.props;\r\n\r\n    const scope = angularPanel.getScope();\r\n\r\n    // When full page reloading in edit mode the angular panel has on fully compiled & instantiated yet\r\n    if (!scope.$$childHead) {\r\n      setTimeout(() => {\r\n        this.forceUpdate();\r\n      });\r\n      return;\r\n    }\r\n\r\n    const panelCtrl: PanelCtrl = scope.$$childHead.ctrl;\r\n    panelCtrl.initEditMode();\r\n    panelCtrl.onPluginTypeChange = this.onPluginTypeChange;\r\n\r\n    let template = '';\r\n    for (let i = 0; i < panelCtrl.editorTabs.length; i++) {\r\n      template +=\r\n        `\r\n      <div class=\"panel-options-group\" ng-cloak>` +\r\n        (i > 0\r\n          ? `<div class=\"panel-options-group__header\">\r\n           <span class=\"panel-options-group__title\">{{ctrl.editorTabs[${i}].title}}\r\n           </span>\r\n         </div>`\r\n          : '') +\r\n        `<div class=\"panel-options-group__body\">\r\n          <panel-editor-tab editor-tab=\"ctrl.editorTabs[${i}]\" ctrl=\"ctrl\"></panel-editor-tab>\r\n        </div>\r\n      </div>\r\n      `;\r\n    }\r\n\r\n    const loader = getAngularLoader();\r\n    const scopeProps = { ctrl: panelCtrl };\r\n\r\n    this.angularOptions = loader.load(this.element, scopeProps, template);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.querySubscription) {\r\n      this.querySubscription.unsubscribe();\r\n    }\r\n    this.cleanUpAngularOptions();\r\n  }\r\n\r\n  cleanUpAngularOptions() {\r\n    if (this.angularOptions) {\r\n      this.angularOptions.destroy();\r\n      this.angularOptions = null;\r\n    }\r\n  }\r\n\r\n  clearQuery = () => {\r\n    this.setState({ searchQuery: '' });\r\n  };\r\n\r\n  onPanelOptionsChanged = (options: any, callback?: () => void) => {\r\n    this.props.panel.updateOptions(options);\r\n    this.forceUpdate(callback);\r\n  };\r\n\r\n  onOpenVizPicker = () => {\r\n    this.setState({ isVizPickerOpen: true, scrollTop: 0 });\r\n  };\r\n\r\n  onCloseVizPicker = () => {\r\n    if (this.props.urlOpenVizPicker) {\r\n      this.props.updateLocation({ query: { openVizPicker: null }, partial: true });\r\n    }\r\n\r\n    this.setState({ isVizPickerOpen: false, hasBeenFocused: false });\r\n  };\r\n\r\n  onSearchQueryChange = (value: string) => {\r\n    this.setState({\r\n      searchQuery: value,\r\n    });\r\n  };\r\n\r\n  renderToolbar = (): JSX.Element => {\r\n    const { plugin } = this.props;\r\n    const { isVizPickerOpen, searchQuery } = this.state;\r\n    const { meta } = plugin;\r\n\r\n    if (isVizPickerOpen) {\r\n      return (\r\n        <VizPickerSearch\r\n          plugin={meta}\r\n          searchQuery={searchQuery}\r\n          onChange={this.onSearchQueryChange}\r\n          onClose={this.onCloseVizPicker}\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <>\r\n          <div className=\"toolbar__main\" onClick={this.onOpenVizPicker}>\r\n            <img className=\"toolbar__main-image\" src={meta.info.logos.small} />\r\n            <div className=\"toolbar__main-name\">{meta.name}</div>\r\n            <i className=\"fa fa-caret-down\" />\r\n          </div>\r\n          <PluginStateinfo state={meta.state} />\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  onPluginTypeChange = (plugin: PanelPluginMeta) => {\r\n    if (plugin.id === this.props.plugin.meta.id) {\r\n      this.setState({ isVizPickerOpen: false });\r\n    } else {\r\n      this.props.onPluginTypeChange(plugin);\r\n    }\r\n  };\r\n\r\n  renderHelp = () => <PluginHelp plugin={this.props.plugin.meta} type=\"help\" />;\r\n\r\n  setScrollTop = (event: React.MouseEvent<HTMLElement>) => {\r\n    const target = event.target as HTMLElement;\r\n    this.setState({ scrollTop: target.scrollTop });\r\n  };\r\n\r\n  render() {\r\n    const { plugin } = this.props;\r\n    const { isVizPickerOpen, searchQuery, scrollTop } = this.state;\r\n    const { meta } = plugin;\r\n\r\n    const pluginHelp: EditorToolbarView = {\r\n      heading: 'Help',\r\n      icon: 'fa fa-question',\r\n      render: this.renderHelp,\r\n    };\r\n\r\n    return (\r\n      <EditorTabBody\r\n        heading=\"Visualization\"\r\n        renderToolbar={this.renderToolbar}\r\n        toolbarItems={[pluginHelp]}\r\n        scrollTop={scrollTop}\r\n        setScrollTop={this.setScrollTop}\r\n      >\r\n        <>\r\n          <FadeIn in={isVizPickerOpen} duration={200} unmountOnExit={true} onExited={this.clearQuery}>\r\n            <VizTypePicker\r\n              current={meta}\r\n              onTypeChange={this.onPluginTypeChange}\r\n              searchQuery={searchQuery}\r\n              onClose={this.onCloseVizPicker}\r\n            />\r\n          </FadeIn>\r\n          {this.renderPanelOptions()}\r\n        </>\r\n      </EditorTabBody>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: StoreState) => ({\r\n  urlOpenVizPicker: !!state.location.query.openVizPicker,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  updateLocation,\r\n};\r\n\r\nexport default connectWithStore(VisualizationTab, mapStateToProps, mapDispatchToProps);\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport { FilterInput } from 'app/core/components/FilterInput/FilterInput';\r\nimport { PanelPluginMeta } from '@grafana/data';\r\n\r\ninterface Props {\r\n  plugin: PanelPluginMeta;\r\n  searchQuery: string;\r\n  onChange: (query: string) => void;\r\n  onClose: () => void;\r\n}\r\n\r\nexport class VizPickerSearch extends PureComponent<Props> {\r\n  render() {\r\n    const { searchQuery, onChange, onClose } = this.props;\r\n    return (\r\n      <>\r\n        <FilterInput\r\n          labelClassName=\"gf-form--has-input-icon\"\r\n          inputClassName=\"gf-form-input width-13\"\r\n          placeholder=\"\"\r\n          onChange={onChange}\r\n          value={searchQuery}\r\n          ref={element => element && element.focus()}\r\n        />\r\n        <button className=\"btn btn-link toolbar__close\" onClick={onClose}>\r\n          <i className=\"fa fa-chevron-up\" />\r\n        </button>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport config from 'app/core/config';\r\nimport VizTypePickerPlugin from './VizTypePickerPlugin';\r\nimport { EmptySearchResult } from '@grafana/ui';\r\nimport { PanelPluginMeta } from '@grafana/data';\r\n\r\nexport interface Props {\r\n  current: PanelPluginMeta;\r\n  onTypeChange: (newType: PanelPluginMeta) => void;\r\n  searchQuery: string;\r\n  onClose: () => void;\r\n}\r\n\r\nexport class VizTypePicker extends PureComponent<Props> {\r\n  searchInput: HTMLElement;\r\n  pluginList = this.getPanelPlugins;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n\r\n  get maxSelectedIndex() {\r\n    const filteredPluginList = this.getFilteredPluginList();\r\n    return filteredPluginList.length - 1;\r\n  }\r\n\r\n  get getPanelPlugins(): PanelPluginMeta[] {\r\n    const allPanels = config.panels;\r\n\r\n    return Object.keys(allPanels)\r\n      .filter(key => allPanels[key]['hideFromList'] === false)\r\n      .map(key => allPanels[key])\r\n      .sort((a: PanelPluginMeta, b: PanelPluginMeta) => a.sort - b.sort);\r\n  }\r\n\r\n  renderVizPlugin = (plugin: PanelPluginMeta, index: number) => {\r\n    const { onTypeChange } = this.props;\r\n    const isCurrent = plugin.id === this.props.current.id;\r\n\r\n    return (\r\n      <VizTypePickerPlugin key={plugin.id} isCurrent={isCurrent} plugin={plugin} onClick={() => onTypeChange(plugin)} />\r\n    );\r\n  };\r\n\r\n  getFilteredPluginList = (): PanelPluginMeta[] => {\r\n    const { searchQuery } = this.props;\r\n    const regex = new RegExp(searchQuery, 'i');\r\n    const pluginList = this.pluginList;\r\n\r\n    const filtered = pluginList.filter(item => {\r\n      return regex.test(item.name);\r\n    });\r\n\r\n    return filtered;\r\n  };\r\n\r\n  render() {\r\n    const filteredPluginList = this.getFilteredPluginList();\r\n    const hasResults = filteredPluginList.length > 0;\r\n    return (\r\n      <div className=\"viz-picker\">\r\n        <div className=\"viz-picker-list\">\r\n          {hasResults ? (\r\n            filteredPluginList.map((plugin, index) => this.renderVizPlugin(plugin, index))\r\n          ) : (\r\n            <EmptySearchResult>Could not find anything matching your query</EmptySearchResult>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { PanelPluginMeta } from '@grafana/data';\r\n\r\ninterface Props {\r\n  isCurrent: boolean;\r\n  plugin: PanelPluginMeta;\r\n  onClick: () => void;\r\n}\r\n\r\nconst VizTypePickerPlugin = React.memo(\r\n  ({ isCurrent, plugin, onClick }: Props) => {\r\n    const cssClass = classNames({\r\n      'viz-picker__item': true,\r\n      'viz-picker__item--current': isCurrent,\r\n    });\r\n\r\n    return (\r\n      <div className={cssClass} onClick={onClick} title={plugin.name}>\r\n        <div className=\"viz-picker__item-name\">{plugin.name}</div>\r\n        <img className=\"viz-picker__item-img\" src={plugin.info.logos.small} />\r\n      </div>\r\n    );\r\n  },\r\n  (prevProps, nextProps) => {\r\n    if (prevProps.isCurrent === nextProps.isCurrent) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n);\r\n\r\nexport default VizTypePickerPlugin;\r\n","import { getPanelEditorTab, panelEditorInitCompleted, PanelEditorTab, PanelEditorTabIds } from './reducers';\r\nimport { ThunkResult } from '../../../../types';\r\nimport { updateLocation } from '../../../../core/actions';\r\n\r\nexport const refreshPanelEditor = (props: {\r\n  hasQueriesTab?: boolean;\r\n  usesGraphPlugin?: boolean;\r\n  alertingEnabled?: boolean;\r\n}): ThunkResult<void> => {\r\n  return async (dispatch, getState) => {\r\n    let activeTab = getState().panelEditor.activeTab || PanelEditorTabIds.Queries;\r\n    const { hasQueriesTab, usesGraphPlugin, alertingEnabled } = props;\r\n\r\n    const tabs: PanelEditorTab[] = [\r\n      getPanelEditorTab(PanelEditorTabIds.Queries),\r\n      getPanelEditorTab(PanelEditorTabIds.Visualization),\r\n      getPanelEditorTab(PanelEditorTabIds.Advanced),\r\n    ];\r\n\r\n    // handle panels that do not have queries tab\r\n    if (!hasQueriesTab) {\r\n      // remove queries tab\r\n      tabs.shift();\r\n      // switch tab\r\n      if (activeTab === PanelEditorTabIds.Queries) {\r\n        activeTab = PanelEditorTabIds.Visualization;\r\n      }\r\n    }\r\n\r\n    if (alertingEnabled && usesGraphPlugin) {\r\n      tabs.push(getPanelEditorTab(PanelEditorTabIds.Alert));\r\n    }\r\n\r\n    dispatch(panelEditorInitCompleted({ activeTab, tabs }));\r\n  };\r\n};\r\n\r\nexport const changePanelEditorTab = (activeTab: PanelEditorTab): ThunkResult<void> => {\r\n  return async dispatch => {\r\n    dispatch(updateLocation({ query: { tab: activeTab.id, openVizPicker: null }, partial: true }));\r\n  };\r\n};\r\n","import memoizeOne from 'memoize-one';\r\nimport { LocationState } from '../../../../types';\r\nimport { PanelEditorState, PanelEditorTabIds } from './reducers';\r\n\r\nexport const getActiveTabAndTabs = memoizeOne((location: LocationState, panelEditor: PanelEditorState) => {\r\n  const panelEditorTab = panelEditor.tabs.length > 0 ? panelEditor.tabs[0].id : PanelEditorTabIds.Queries;\r\n  return {\r\n    activeTab: location.query.tab || panelEditorTab,\r\n    tabs: panelEditor.tabs,\r\n  };\r\n});\r\n","// Services & Utils\r\nimport { createErrorNotification } from 'app/core/copy/appNotification';\r\nimport { getBackendSrv } from 'app/core/services/backend_srv';\r\nimport { DashboardSrv } from 'app/features/dashboard/services/DashboardSrv';\r\nimport { DashboardLoaderSrv } from 'app/features/dashboard/services/DashboardLoaderSrv';\r\nimport { TimeSrv } from 'app/features/dashboard/services/TimeSrv';\r\nimport { AnnotationsSrv } from 'app/features/annotations/annotations_srv';\r\nimport { VariableSrv } from 'app/features/templating/variable_srv';\r\nimport { KeybindingSrv } from 'app/core/services/keybindingSrv';\r\n\r\n// Actions\r\nimport { updateLocation } from 'app/core/actions';\r\nimport { notifyApp } from 'app/core/actions';\r\nimport locationUtil from 'app/core/utils/location_util';\r\nimport {\r\n  dashboardInitFetching,\r\n  dashboardInitCompleted,\r\n  dashboardInitFailed,\r\n  dashboardInitSlow,\r\n  dashboardInitServices,\r\n  clearDashboardQueriesToUpdate,\r\n} from './actions';\r\n\r\n// Types\r\nimport { DashboardRouteInfo, StoreState, ThunkDispatch, ThunkResult, DashboardDTO } from 'app/types';\r\nimport { DashboardModel } from './DashboardModel';\r\nimport { DataQuery } from '@grafana/data';\r\n\r\nexport interface InitDashboardArgs {\r\n  $injector: any;\r\n  $scope: any;\r\n  urlUid?: string;\r\n  urlSlug?: string;\r\n  urlType?: string;\r\n  urlFolderId?: string;\r\n  routeInfo: DashboardRouteInfo;\r\n  fixUrl: boolean;\r\n}\r\n\r\nasync function redirectToNewUrl(slug: string, dispatch: ThunkDispatch, currentPath: string) {\r\n  const res = await getBackendSrv().getDashboardBySlug(slug);\r\n\r\n  if (res) {\r\n    let newUrl = res.meta.url;\r\n\r\n    // fix solo route urls\r\n    if (currentPath.indexOf('dashboard-solo') !== -1) {\r\n      newUrl = newUrl.replace('/d/', '/d-solo/');\r\n    }\r\n\r\n    const url = locationUtil.stripBaseFromUrl(newUrl);\r\n    dispatch(updateLocation({ path: url, partial: true, replace: true }));\r\n  }\r\n}\r\n\r\nasync function fetchDashboard(\r\n  args: InitDashboardArgs,\r\n  dispatch: ThunkDispatch,\r\n  getState: () => StoreState\r\n): Promise<DashboardDTO | null> {\r\n  try {\r\n    switch (args.routeInfo) {\r\n      case DashboardRouteInfo.Home: {\r\n        // load home dash\r\n        const dashDTO: DashboardDTO = await getBackendSrv().get('/api/dashboards/home');\r\n\r\n        // if user specified a custom home dashboard redirect to that\r\n        if (dashDTO.redirectUri) {\r\n          const newUrl = locationUtil.stripBaseFromUrl(dashDTO.redirectUri);\r\n          dispatch(updateLocation({ path: newUrl, replace: true }));\r\n          return null;\r\n        }\r\n\r\n        // disable some actions on the default home dashboard\r\n        dashDTO.meta.canSave = false;\r\n        dashDTO.meta.canShare = false;\r\n        dashDTO.meta.canStar = false;\r\n        return dashDTO;\r\n      }\r\n      case DashboardRouteInfo.Normal: {\r\n        // for old db routes we redirect\r\n        if (args.urlType === 'db') {\r\n          redirectToNewUrl(args.urlSlug, dispatch, getState().location.path);\r\n          return null;\r\n        }\r\n\r\n        const loaderSrv: DashboardLoaderSrv = args.$injector.get('dashboardLoaderSrv');\r\n        const dashDTO: DashboardDTO = await loaderSrv.loadDashboard(args.urlType, args.urlSlug, args.urlUid);\r\n\r\n        if (args.fixUrl && dashDTO.meta.url) {\r\n          // check if the current url is correct (might be old slug)\r\n          const dashboardUrl = locationUtil.stripBaseFromUrl(dashDTO.meta.url);\r\n          const currentPath = getState().location.path;\r\n\r\n          if (dashboardUrl !== currentPath) {\r\n            // replace url to not create additional history items and then return so that initDashboard below isn't executed multiple times.\r\n            dispatch(updateLocation({ path: dashboardUrl, partial: true, replace: true }));\r\n            return null;\r\n          }\r\n        }\r\n        return dashDTO;\r\n      }\r\n      case DashboardRouteInfo.New: {\r\n        return getNewDashboardModelData(args.urlFolderId);\r\n      }\r\n      default:\r\n        throw { message: 'Unknown route ' + args.routeInfo };\r\n    }\r\n  } catch (err) {\r\n    dispatch(dashboardInitFailed({ message: 'Failed to fetch dashboard', error: err }));\r\n    console.log(err);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * This action (or saga) does everything needed to bootstrap a dashboard & dashboard model.\r\n * First it handles the process of fetching the dashboard, correcting the url if required (causing redirects/url updates)\r\n *\r\n * This is used both for single dashboard & solo panel routes, home & new dashboard routes.\r\n *\r\n * Then it handles the initializing of the old angular services that the dashboard components & panels still depend on\r\n *\r\n */\r\nexport function initDashboard(args: InitDashboardArgs): ThunkResult<void> {\r\n  return async (dispatch, getState) => {\r\n    // set fetching state\r\n    dispatch(dashboardInitFetching());\r\n\r\n    // Detect slow loading / initializing and set state flag\r\n    // This is in order to not show loading indication for fast loading dashboards as it creates blinking/flashing\r\n    setTimeout(() => {\r\n      if (getState().dashboard.model === null) {\r\n        dispatch(dashboardInitSlow());\r\n      }\r\n    }, 500);\r\n\r\n    // fetch dashboard data\r\n    const dashDTO = await fetchDashboard(args, dispatch, getState);\r\n\r\n    // returns null if there was a redirect or error\r\n    if (!dashDTO) {\r\n      return;\r\n    }\r\n\r\n    // set initializing state\r\n    dispatch(dashboardInitServices());\r\n\r\n    // create model\r\n    let dashboard: DashboardModel;\r\n    try {\r\n      dashboard = new DashboardModel(dashDTO.dashboard, dashDTO.meta);\r\n    } catch (err) {\r\n      dispatch(dashboardInitFailed({ message: 'Failed create dashboard model', error: err }));\r\n      console.log(err);\r\n      return;\r\n    }\r\n\r\n    // add missing orgId query param\r\n    const storeState = getState();\r\n    if (!storeState.location.query.orgId) {\r\n      dispatch(updateLocation({ query: { orgId: storeState.user.orgId }, partial: true, replace: true }));\r\n    }\r\n\r\n    // init services\r\n    const timeSrv: TimeSrv = args.$injector.get('timeSrv');\r\n    const annotationsSrv: AnnotationsSrv = args.$injector.get('annotationsSrv');\r\n    const variableSrv: VariableSrv = args.$injector.get('variableSrv');\r\n    const keybindingSrv: KeybindingSrv = args.$injector.get('keybindingSrv');\r\n    const unsavedChangesSrv = args.$injector.get('unsavedChangesSrv');\r\n    const dashboardSrv: DashboardSrv = args.$injector.get('dashboardSrv');\r\n\r\n    timeSrv.init(dashboard);\r\n    annotationsSrv.init(dashboard);\r\n\r\n    const { panelId, queries } = storeState.dashboard.modifiedQueries;\r\n    dashboard.meta.fromExplore = !!(panelId && queries);\r\n\r\n    // template values service needs to initialize completely before\r\n    // the rest of the dashboard can load\r\n    try {\r\n      await variableSrv.init(dashboard);\r\n    } catch (err) {\r\n      dispatch(notifyApp(createErrorNotification('Templating init failed', err)));\r\n      console.log(err);\r\n    }\r\n\r\n    try {\r\n      dashboard.processRepeats();\r\n      dashboard.updateSubmenuVisibility();\r\n\r\n      // handle auto fix experimental feature\r\n      const queryParams = getState().location.query;\r\n      if (queryParams.autofitpanels) {\r\n        dashboard.autoFitPanels(window.innerHeight, queryParams.kiosk);\r\n      }\r\n\r\n      // init unsaved changes tracking\r\n      unsavedChangesSrv.init(dashboard, args.$scope);\r\n      keybindingSrv.setupDashboardBindings(args.$scope, dashboard);\r\n    } catch (err) {\r\n      dispatch(notifyApp(createErrorNotification('Dashboard init failed', err)));\r\n      console.log(err);\r\n    }\r\n\r\n    if (dashboard.meta.fromExplore) {\r\n      updateQueriesWhenComingFromExplore(dispatch, dashboard, panelId, queries);\r\n    }\r\n\r\n    // legacy srv state\r\n    dashboardSrv.setCurrent(dashboard);\r\n\r\n    // yay we are done\r\n    dispatch(dashboardInitCompleted(dashboard));\r\n  };\r\n}\r\n\r\nfunction getNewDashboardModelData(urlFolderId?: string): any {\r\n  const data = {\r\n    meta: {\r\n      canStar: false,\r\n      canShare: false,\r\n      isNew: true,\r\n      folderId: 0,\r\n    },\r\n    dashboard: {\r\n      title: 'New dashboard',\r\n      panels: [\r\n        {\r\n          type: 'add-panel',\r\n          gridPos: { x: 0, y: 0, w: 12, h: 9 },\r\n          title: 'Panel Title',\r\n        },\r\n      ],\r\n    },\r\n  };\r\n\r\n  if (urlFolderId) {\r\n    data.meta.folderId = parseInt(urlFolderId, 10);\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction updateQueriesWhenComingFromExplore(\r\n  dispatch: ThunkDispatch,\r\n  dashboard: DashboardModel,\r\n  originPanelId: number,\r\n  queries: DataQuery[]\r\n) {\r\n  const panelArrId = dashboard.panels.findIndex(panel => panel.id === originPanelId);\r\n\r\n  if (panelArrId > -1) {\r\n    dashboard.panels[panelArrId].targets = queries;\r\n  }\r\n\r\n  // Clear update state now that we're done\r\n  dispatch(clearDashboardQueriesToUpdate());\r\n}\r\n","import { updateLocation } from 'app/core/actions';\r\nimport { store } from 'app/store/store';\r\nimport config from 'app/core/config';\r\nimport { getDataSourceSrv, getLocationSrv } from '@grafana/runtime';\r\nimport { PanelMenuItem } from '@grafana/data';\r\n\r\nimport { copyPanel, duplicatePanel, editPanelJson, removePanel, sharePanel } from 'app/features/dashboard/utils/panel';\r\nimport { PanelModel } from 'app/features/dashboard/state/PanelModel';\r\nimport { DashboardModel } from 'app/features/dashboard/state/DashboardModel';\r\nimport { contextSrv } from '../../../core/services/context_srv';\r\nimport { navigateToExplore } from '../../explore/state/actions';\r\nimport { getExploreUrl } from '../../../core/utils/explore';\r\nimport { getTimeSrv } from '../services/TimeSrv';\r\n\r\nexport const getPanelMenu = (dashboard: DashboardModel, panel: PanelModel) => {\r\n  const onViewPanel = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    store.dispatch(\r\n      updateLocation({\r\n        query: {\r\n          panelId: panel.id,\r\n          edit: null,\r\n          fullscreen: true,\r\n        },\r\n        partial: true,\r\n      })\r\n    );\r\n  };\r\n\r\n  const onEditPanel = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    store.dispatch(\r\n      updateLocation({\r\n        query: {\r\n          panelId: panel.id,\r\n          edit: true,\r\n          fullscreen: true,\r\n        },\r\n        partial: true,\r\n      })\r\n    );\r\n  };\r\n\r\n  const onNewEditPanel = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    store.dispatch(\r\n      updateLocation({\r\n        query: {\r\n          editPanel: panel.id,\r\n        },\r\n        partial: true,\r\n      })\r\n    );\r\n  };\r\n\r\n  const onSharePanel = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    sharePanel(dashboard, panel);\r\n  };\r\n\r\n  const onInspectPanel = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    getLocationSrv().update({\r\n      partial: true,\r\n      query: {\r\n        inspect: panel.id,\r\n      },\r\n    });\r\n  };\r\n\r\n  const onMore = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  const onDuplicatePanel = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    duplicatePanel(dashboard, panel);\r\n  };\r\n\r\n  const onCopyPanel = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    copyPanel(panel);\r\n  };\r\n\r\n  const onEditPanelJson = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    editPanelJson(dashboard, panel);\r\n  };\r\n\r\n  const onRemovePanel = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    removePanel(dashboard, panel, true);\r\n  };\r\n\r\n  const onNavigateToExplore = (event: React.MouseEvent<any>) => {\r\n    event.preventDefault();\r\n    const openInNewWindow = event.ctrlKey || event.metaKey ? (url: string) => window.open(url) : undefined;\r\n    store.dispatch(navigateToExplore(panel, { getDataSourceSrv, getTimeSrv, getExploreUrl, openInNewWindow }) as any);\r\n  };\r\n\r\n  const menu: PanelMenuItem[] = [];\r\n\r\n  menu.push({\r\n    text: 'View',\r\n    iconClassName: 'gicon gicon-viewer',\r\n    onClick: onViewPanel,\r\n    shortcut: 'v',\r\n  });\r\n\r\n  if (dashboard.canEditPanel(panel)) {\r\n    menu.push({\r\n      text: 'Edit',\r\n      iconClassName: 'gicon gicon-editor',\r\n      onClick: onEditPanel,\r\n      shortcut: 'e',\r\n    });\r\n  }\r\n\r\n  menu.push({\r\n    text: 'Share',\r\n    iconClassName: 'fa fa-fw fa-share',\r\n    onClick: onSharePanel,\r\n    shortcut: 'p s',\r\n  });\r\n\r\n  if (contextSrv.hasAccessToExplore() && panel.datasource) {\r\n    menu.push({\r\n      text: 'Explore',\r\n      iconClassName: 'gicon gicon-explore',\r\n      shortcut: 'x',\r\n      onClick: onNavigateToExplore,\r\n    });\r\n  }\r\n\r\n  if (config.featureToggles.inspect) {\r\n    menu.push({\r\n      text: 'Inspect',\r\n      iconClassName: 'fa fa-fw fa-info-circle',\r\n      onClick: onInspectPanel,\r\n      shortcut: 'p i',\r\n    });\r\n  }\r\n\r\n  if (config.featureToggles.newEdit) {\r\n    menu.push({\r\n      text: 'New edit',\r\n      iconClassName: 'gicon gicon-editor',\r\n      onClick: onNewEditPanel,\r\n      shortcut: 'p i',\r\n    });\r\n  }\r\n\r\n  const subMenu: PanelMenuItem[] = [];\r\n\r\n  if (!panel.fullscreen && dashboard.canEditPanel(panel)) {\r\n    subMenu.push({\r\n      text: 'Duplicate',\r\n      onClick: onDuplicatePanel,\r\n      shortcut: 'p d',\r\n    });\r\n\r\n    subMenu.push({\r\n      text: 'Copy',\r\n      onClick: onCopyPanel,\r\n    });\r\n  }\r\n\r\n  subMenu.push({\r\n    text: 'Panel JSON',\r\n    onClick: onEditPanelJson,\r\n  });\r\n\r\n  menu.push({\r\n    type: 'submenu',\r\n    text: 'More...',\r\n    iconClassName: 'fa fa-fw fa-cube',\r\n    subMenu: subMenu,\r\n    onClick: onMore,\r\n  });\r\n\r\n  if (dashboard.canEditPanel(panel)) {\r\n    menu.push({ type: 'divider' });\r\n\r\n    menu.push({\r\n      text: 'Remove',\r\n      iconClassName: 'fa fa-fw fa-trash',\r\n      onClick: onRemovePanel,\r\n      shortcut: 'p r',\r\n    });\r\n  }\r\n\r\n  return menu;\r\n};\r\n","import coreModule from 'app/core/core_module';\r\n\r\nconst obj2string = (obj: any) => {\r\n  return Object.keys(obj)\r\n    .reduce((acc, curr) => acc.concat(curr + '=' + obj[curr]), [])\r\n    .join();\r\n};\r\n\r\nexport class GeneralTabCtrl {\r\n  panelCtrl: any;\r\n\r\n  /** @ngInject */\r\n  constructor($scope: any) {\r\n    this.panelCtrl = $scope.ctrl;\r\n\r\n    const updatePanel = () => {\r\n      console.log('panel.render()');\r\n      this.panelCtrl.panel.render();\r\n    };\r\n\r\n    const generateValueFromPanel = (scope: any) => {\r\n      const { panel } = scope.ctrl;\r\n      const panelPropsToTrack = ['title', 'description', 'transparent', 'repeat', 'repeatDirection', 'minSpan'];\r\n      const panelPropsString = panelPropsToTrack\r\n        .map(prop => prop + '=' + (panel[prop] && panel[prop].toString ? panel[prop].toString() : panel[prop]))\r\n        .join();\r\n      const panelLinks = panel.links || [];\r\n      const panelLinksString = panelLinks.map(obj2string).join();\r\n      return panelPropsString + panelLinksString;\r\n    };\r\n\r\n    $scope.$watch(generateValueFromPanel, updatePanel, true);\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function generalTab() {\r\n  'use strict';\r\n  return {\r\n    restrict: 'E',\r\n    templateUrl: 'public/app/features/panel/partials/general_tab.html',\r\n    controller: GeneralTabCtrl,\r\n  };\r\n}\r\n\r\ncoreModule.directive('panelGeneralTab', generalTab);\r\n","import React, { FC } from 'react';\r\nimport { AlphaNotice } from '@grafana/ui';\r\nimport { PluginState } from '@grafana/data';\r\nimport { css } from 'emotion';\r\n\r\ninterface Props {\r\n  state?: PluginState;\r\n}\r\n\r\nfunction getPluginStateInfoText(state?: PluginState): string | null {\r\n  switch (state) {\r\n    case PluginState.alpha:\r\n      return 'Alpha Plugin: This plugin is a work in progress and updates may include breaking changes';\r\n    case PluginState.beta:\r\n      return 'Beta Plugin: There could be bugs and minor breaking changes to this plugin';\r\n  }\r\n  return null;\r\n}\r\n\r\nconst PluginStateinfo: FC<Props> = props => {\r\n  const text = getPluginStateInfoText(props.state);\r\n\r\n  if (!text) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <AlphaNotice\r\n      state={props.state}\r\n      text={text}\r\n      className={css`\r\n        margin-left: 16px;\r\n      `}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PluginStateinfo;\r\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA,UACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACrqEA;AACA;AAWA;AAAA;AAIA;AAAA;AAkCA;AACA;AACA;AAlCA;;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAMA;AACA;AAEA;AAQA;AACA;AAAA;;;;;;;;;;;;;;AClEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AAEA;AAQA;;;;;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AAgBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAUA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAmBA;AAxDA;AACA;AACA;AAEA;AACA;AACA;AAiCA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjFA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAaA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAyDA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAOA;AACA;AACA;AACA;AAMA;;AAoCA;AA1KA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;;;;;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;;AAAA;AAOA;AACA;AACA;;;;;AACA;AAmFA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAOA;AACA;AAIA;AACA;AAAA;AAEA;AAEA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;AC3NA;AACA;AACA;AAEA;AACA;AAYA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAsBA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA2CA;AArFA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AA0BA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAAA;AAIA;AAGA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AAEA;AAGA;AAOA;AACA;AAAA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;AC7GA;AACA;AAEA;AACA;AAEA;AACA;AAaA;AAAA;AAWA;AAAA;AAVA;AACA;AACA;AACA;AACA;AAIA;AAoBA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAIA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AA1DA;;AACA;AAEA;AACA;AACA;AAEA;;;;;;AACA;AACA;AAEA;AACA;;AAAA;AACA;;;;;AACA;AA8CA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAGA;AAKA;AACA;AAGA;AAGA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzHA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAaA;AAAA;AACA;AAAA;AAqCA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAMA;AACA;AAEA;AAIA;AAxHA;AAEA;AACA;AACA;;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAyFA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AAGA;AAaA;AACA;AAAA;;;;;;;;;;;;;;AC7LA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AAGA;AACA;AACA;AAOA;AAAA;AACA;AAAA;AAcA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApDA;AACA;AACA;AAEA;;AACA;AAEA;AACA;AACA;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;;AACA;;AAAA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAIA;AAKA;AAGA;AACA;AAAA;;;;;;;;;;;;;;ACnHA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAoBA;AAAA;AAIA;AAAA;AAFA;AA2BA;AACA;AACA;AA0DA;AACA;AACA;AAEA;AACA;AACA;AAxFA;AACA;AACA;AACA;AACA;AAEA;AACA;;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAMA;;;;;;AACA;AACA;AACA;AAEA;AAGA;AACA;;AAAA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAEA;;;;;;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAUA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAWA;AAGA;AAEA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAcA;AAWA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3NA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAYA;AAsBA;AAAA;AAIA;AAAA;AAHA;AA6GA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAWA;AACA;AACA;AACA;AACA;AACA;AA1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAKA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAsEA;AAAA;AACA;AACA;AACA;;;AAAA;AAEA;AAAA;AACA;AACA;;;AAAA;AASA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAiBA;AAEA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxWA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAIA;AAuBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAiDA;AA/CA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAQA;AAMA;AACA;AACA;AACA;;AAAA;AAEA;AAEA;AAGA;AAEA;;AAAA;AAQA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;ACzHA;AAEA;AACA;AAGA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAWA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAGA;AAEA;AAKA;AAKA;AAEA;;AAEA;AACA;AACA;AACA;;AA+BA;AA7BA;AACA;AACA;AAEA;AACA;AACA;AAIA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;;AAEA;;;;;;;;;;;;;;;;;;;;;AC7GA;AAGA;AACA;AAQA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAGA;AAYA;AAGA;;AAQA;AANA;AACA;AACA;AAEA;AACA;AACA;AAAA;;;;;;;;;;;;;;ACxCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAMA;AACA;AACA;AACA;AAIA;AACA;AACA;AAMA;AAEA;AAGA;;;;;;;;;;;;;;;;;;;;;;;AC5BA;AACA;AACA;AAcA;AAAA;AAOA;AAAA;AANA;AAIA;AAuBA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAnCA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;AACA;AAEA;AAAA;AACA;AACA;;;AAAA;AACA;AAAA;AACA;AACA;;;AAAA;AAoBA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AAOA;AACA;AAAA;;;;;;;;;;;;;;ACjFA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAYA;AAAA;AACA;AAEA;AACA;AAYA;;;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AAEA;AACA;AACA;AA4BA;AAAA;AAKA;AAAA;AAcA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AApBA;AACA;AACA;AACA;AACA;;AACA;AAEA;AACA;AACA;AAaA;AACA;AACA;AAGA;AACA;AAIA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;;AAAA;AAIA;AAEA;AACA;AAKA;AAEA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAGA;AAQA;AAnGA;AACA;AACA;AAkGA;AAAA;AArGA;;;;;;;;;;;;;;;;;;;;;;;;ACjCA;AACA;AAEA;AACA;AACA;AACA;AAKA;AACA;AAMA;AAAA;AAIA;AAAA;AA4BA;AACA;AACA;AACA;AACA;;AA9BA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAQA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAUA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5EA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAIA;AACA;AACA;AAeA;AAAA;AACA;AAAA;AAaA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;;AAlCA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AA2BA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AASA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AAGA;AACA;AAAA;AAEA;AAEA;AAEA;AAQA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5IA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AASA;AACA;AAEA;AACA;AAiBA;AAAA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA2BA;;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAKA;AACA;AAOA;AAEA;AACA;AACA;AACA;AAEA;AAUA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AASA;AACA;AAIA;;AAuDA;AAnPA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAuKA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAQA;AACA;AAEA;;AAKA;AAqBA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;ACtTA;AACA;AAEA;AACA;AAMA;AACA;AAmBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAyCA;AAvCA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AACA;AACA;AAmBA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AAkBA;AAAA;AAIA;AAAA;AA6CA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAIA;AAEA;AACA;AAIA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAIA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AA7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAsHA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAGA;AAKA;AACA;AAGA;AAGA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;ACvNA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAgBA;AAAA;AAyCA;AAAA;AAxCA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAAA;AACA;;AAAA;AAEA;AAEA;AACA;AAeA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;;AACA;AACA;AAEA;;;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AASA;AACA;AACA;AACA;AA1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAoFA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAYA;AACA;AACA;AAWA;AAEA;AAKA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/NA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAGA;AAoBA;AAAA;AAKA;AAAA;AAgBA;AACA;AACA;AACA;AAuGA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAQA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AA3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAOA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAOA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAIA;AACA;AAKA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAwEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAQA;AACA;AACA;AAOA;AAIA;AACA;AAAA;;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;ACtRA;AAEA;AAUA;AAAA;AAAA;;AAmBA;AAlBA;AACA;AACA;AAEA;AAQA;AACA;AAIA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;AC/BA;AAEA;AACA;AACA;AAUA;AAAA;AAIA;AAAA;AAFA;AAoBA;AACA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;;AAnCA;AAEA;AAAA;AACA;AACA;AACA;;;AAAA;AAEA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAAA;AAuBA;AAAA;AACA;AACA;AACA;AAEA;AASA;AACA;AAAA;;;;;;;;;;;;;;ACxEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;AChCA;AAEA;AAEA;AAKA;;;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;;AACA;AACA;AAEA;AACA;;AACA;;;AACA;AACA;;;;;;;;;;;;;ACzCA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AASA;AACA;AACA;AAcA;;;;;AACA;;AAAA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;AACA;AAEA;AAIA;;;;;;AAEA;;AACA;AAiBA;AAuBA;;;AAtCA;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAAA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;AAGA;AACA;AACA;;;;;AAEA;AAEA;;;;;;;;AAQA;AACA;AAAA;AACA;;;;;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;;;;AAKA;;AAAA;;;;AAEA;AACA;;;AAGA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;;;;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAMA;AAEA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;;;;AClQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;;;;;;;;;AChMA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AASA;AAEA;;;;;;A","sourceRoot":""}